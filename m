Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 5D68E9527A3
	for <lists+qemu-devel@lfdr.de>; Thu, 15 Aug 2024 03:48:33 +0200 (CEST)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1sePZu-0008MH-Gx; Wed, 14 Aug 2024 21:47:02 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <alvinga@andestech.com>)
 id 1sePZq-0008L2-N0; Wed, 14 Aug 2024 21:46:59 -0400
Received: from mail-eastasiaazlp170100000.outbound.protection.outlook.com
 ([2a01:111:f403:c400::] helo=HK2PR02CU002.outbound.protection.outlook.com)
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <alvinga@andestech.com>)
 id 1sePZn-0002Nv-Ma; Wed, 14 Aug 2024 21:46:58 -0400
ARC-Seal: i=1; a=rsa-sha256; s=arcselector10001; d=microsoft.com; cv=none;
 b=pJeIiUl129R3+1u+UogaBwJuW3ZOWVdBQxI8q2yT5EhG2CIvbVidNV+bpweP25gECAYAVz1b/gTK8vu3Kr5RUB/MtSHtTeZC5o4cKbU9pI10B452e717qrNNnS5+sK6keIS/oygBmcKLVuIYpPWy9GE6WSSxveOdb+Owtgz6NXhEP5kgq1NCT1bGHR61TISk/3jHBVNKZoaQxe8GNd4juFX6vxl2shwtHPuXKoORtBdOK/VwjfaJb8snb/sl/DwWS1uQEgPJORhb7PZScHZfa9P51hPOLY2J9WDz7eLDBW1FeawxD+nqRqqo8IIvpuqwOD2UOuECPC0ZVrm3KLat7A==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector10001;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=VpnUAiLWs4fU3YzDDcNnj5hdzZSvMvurAQkvG5OHeFg=;
 b=W5SfZLELqemmhJRQ3cUlJTDcEMdamlTTELq8b8SYlxVFlPlbzrrPsIeA9pbfAb2ngLdQEC1CsOyjwuKrJGrhBufFF/dlmYoOC53Zb7dZDtZ8phG2UB/JHxlo54zJM22kj356vHxBseZga2a97GCmEvWsIaLlJ4FRxad9HtyR2yB4cJuSNz/FUN2L/jB7IF3mO2hhcLRSSw9MiIL0dP4biunEtwHH/dk6NV3nxtb6M91WCpRTtb6Dx14WN+8HLXKi01dTOsSpajACyV5RqZxwrADMaKQL9byvojGbvouG7QGr+ee3Q1YQnkUHakkc2MKb4MYWKF1fHCEWB8rZXWzEoA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=andestech.com; dmarc=pass action=none
 header.from=andestech.com; dkim=pass header.d=andestech.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=andestech.com;
 s=selector1;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=VpnUAiLWs4fU3YzDDcNnj5hdzZSvMvurAQkvG5OHeFg=;
 b=YUQt4lVmRnjmIllS5758dEd6Suv8fXRClqweWhZqjZ+eEaXBmqquoMAKf+0Q0FMXbaRQ+MPBYBafq7dgxgTZt0NmIytGdvPiMK4LAtKD1kJQaTmO0eX4EShUv6KvXAoJI+WOXYxEJ010gppY5DazlGrbXiL77/7cJGdNjASmrRgPnahSzF1M6p+fBWMmXeXNC7kpq6ovNwPfKOGwW0tj4OdeOX7PuagoRA2xMipq1q35j90Wt+SCyJjsysp6SDny/2wUxpyiDVtjOoch0BoapKFFs743nOWOj+/1oMfeJWvbYZv2gGgzLofQVOFyaQWka3C9cfULOWWOyWM7jAgMTQ==
Received: from SEYPR03MB6700.apcprd03.prod.outlook.com (2603:1096:101:69::14)
 by TYZPR03MB6597.apcprd03.prod.outlook.com (2603:1096:400:1fb::12)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.7875.16; Thu, 15 Aug
 2024 01:40:13 +0000
Received: from SEYPR03MB6700.apcprd03.prod.outlook.com
 ([fe80::292f:e1ce:7df8:115e]) by SEYPR03MB6700.apcprd03.prod.outlook.com
 ([fe80::292f:e1ce:7df8:115e%4]) with mapi id 15.20.7875.016; Thu, 15 Aug 2024
 01:40:13 +0000
From: =?utf-8?B?QWx2aW4gQ2hlLUNoaWEgQ2hhbmco5by15ZOy5ZiJKQ==?=
 <alvinga@andestech.com>
To: Tommy Wu <tommy.wu@sifive.com>, "qemu-devel@nongnu.org"
 <qemu-devel@nongnu.org>, "qemu-riscv@nongnu.org" <qemu-riscv@nongnu.org>
CC: "frank.chang@sifive.com" <frank.chang@sifive.com>, "palmer@dabbelt.com"
 <palmer@dabbelt.com>, "alistair.francis@wdc.com" <alistair.francis@wdc.com>,
 "alistair23@gmail.com" <alistair23@gmail.com>, "bin.meng@windriver.com"
 <bin.meng@windriver.com>, "liweiwei@iscas.ac.cn" <liweiwei@iscas.ac.cn>,
 "dbarboza@ventanamicro.com" <dbarboza@ventanamicro.com>
Subject: RE: [PATCH v5 2/5] target/riscv: Handle Smrnmi interrupt and
 exception.
Thread-Topic: [PATCH v5 2/5] target/riscv: Handle Smrnmi interrupt and
 exception.
Thread-Index: AQHa6jQOkfEHO+dd4ES13vGrpi21cLInkzVg
Date: Thu, 15 Aug 2024 01:40:13 +0000
Message-ID: <SEYPR03MB6700217C202361DE37802EABA8802@SEYPR03MB6700.apcprd03.prod.outlook.com>
References: <20240809081227.1588508-1-tommy.wu@sifive.com>
 <20240809081227.1588508-3-tommy.wu@sifive.com>
In-Reply-To: <20240809081227.1588508-3-tommy.wu@sifive.com>
Accept-Language: zh-TW, en-US
Content-Language: zh-TW
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=andestech.com;
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: SEYPR03MB6700:EE_|TYZPR03MB6597:EE_
x-ms-office365-filtering-correlation-id: 9bb463af-f31e-4730-140e-08dcbccb3505
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
 ARA:13230040|366016|1800799024|376014|7416014|38070700018; 
x-microsoft-antispam-message-info: =?utf-8?B?alhyUmpzTGZ0S2ppR0hpbGN6ZmYrUk5VWEhFRTB5TUw3ejZsYVdYbGpkb1Uz?=
 =?utf-8?B?dkFMK2gxeVU2emtraEJwVGlxNzZmUUg3WGpnWDIzTHRmSHNTbkkxdG5DOHFa?=
 =?utf-8?B?REJmQmVHVDBsTXgrWlhSMkd4KzdQcTZYdUNDaGNJc2Z6S096RUd4TWxBT0lq?=
 =?utf-8?B?NGJ1bXkva3BCbDBZc2h2Tk9XWjRLOFh6Y3h5UWNINXlmeWRUbEhnSFBuaUtD?=
 =?utf-8?B?SzNpTEo0Mm5YREFuMUVqZW9PZ2JUVXJvWW1BMUhIR3ZyMDRoYVh3VVhoZXBD?=
 =?utf-8?B?SG92aWx4WnpFY0VhM3RoRk5ZUGZPT29XSjN6eEk4SksyajZXRUFoTjcwQnRI?=
 =?utf-8?B?RFRidThQdFd2UmtRWHQ5RW9ROFdqR01FRWt1WEYvek55ZlNIOGtYLzR4d0My?=
 =?utf-8?B?OHZCSXYzSEJYd2tEMGc5ZUFneFhNZS92Sm4vTkpUeUEyL2M4OHI3UnJJWFl3?=
 =?utf-8?B?RUdJNkl2VmsvbU5WLzNtNldOdmpFTk1DQXJVZHVDR0FoVkMvUmVkbGU5TXJk?=
 =?utf-8?B?VGhsemZuTDk2YURidmQzOTNQYXh0eHM0TVIxdGFtbkF5MlNsdEFJZUhWWmN4?=
 =?utf-8?B?V2U4SzNNQW02MFFsdFNUanBnQXRnU2VYK0dnblZuVUJFRjlwR0tGckpjNHJG?=
 =?utf-8?B?RGVVN0dWTmF0K3Y3WjdPWFlFby9PZlRiTitsRUZwNmFySlg0bkdHTGxIQnlN?=
 =?utf-8?B?aXBUSlJ6RXNCdm9NSlhOdHM0ZzhkM2xNNlc3MEZwT2FUUUhrenhWbTkzVDdR?=
 =?utf-8?B?VVdpdE90NjcrVWJYdVFBNi9kVjhDbnFpejFnbWhrdEJiaXZTZjkwaDhkVGgz?=
 =?utf-8?B?U0U1eDBQYVdpZWE0OWM4ZURLQ0xUZjI0a0tuVnBlb1A0K2lWMDZBcVpjRExB?=
 =?utf-8?B?YTBjcm0xeGFQb3ZvUWpDczF2TS9KNlR1MnhoSUNrUmtzbEZkQ0lPbEhOQ3h4?=
 =?utf-8?B?QlczMmg2RHJXY1dnZmREL1Bhd2NsWlM0WVFLWGdBaE83K2E5N1JFMXdQQTNh?=
 =?utf-8?B?cnh2WHJ6R3RTYWNSeUZ4V2JyM3dHZ083WHY2bFlTenBJdkpVMGY2a09jdCtO?=
 =?utf-8?B?V3AwZVpOOCt4WmEyQVVhT3Y1M3pQSGExaXJhV3g5V3lXaUNMT2RMb1ZVTjB0?=
 =?utf-8?B?SXRybnlTN2dYblp0dHlOd0dENllPQWJCTXZJK0lrbzlhVEM2Nm1SdVAyNmVZ?=
 =?utf-8?B?eDFqdUdMYzhYa0E2M1dqdWJhMDVxVGpTZFRMNllHb1BsbC8rZ2sxQ3lubTZ5?=
 =?utf-8?B?QmtjVktDWEpmcGVJckFDN1lFeU5tWU14N2x5aHhObGRiOHlKQ1Z1cmFBdVg1?=
 =?utf-8?B?enFnOTJqc3ZtU1ZMUGx6cUNIYUtJa092REZ6WnNqK0dKa2NPanFEd2YraEtq?=
 =?utf-8?B?Nm1pZ00ya3ZCdVZ5THpibTJaODdSYS9nN3c3OVRIazZhc1llTzdSSk5jOHVr?=
 =?utf-8?B?dnprWHhldUlZSEZ2Rk0wNmVrb3NBVWliRGhuUS9hMloxK2tjQkdGNUVNL2ZB?=
 =?utf-8?B?UHR4OFN4aEpDYmVkbUNiUTJpUnpQNTZ3d0NWMVJneUorWVdmRm5QMGFxMlc3?=
 =?utf-8?B?ZTFidTRML3hPaHRjOTVhZkNxOHQ5dGFURGVHaFAwWU5ZanpqeXgvd3VXYzNO?=
 =?utf-8?B?ZzgrY0V3RUpXK09OYktNTEQ5OVMwWEpxejVtdVQzT091OGZjWUtBdmZSYnlS?=
 =?utf-8?B?Si9nSVhRdHhRM0FCcmRPdjlQa1ZDUzdnNEhZeUdJVnFSZWphNEJlUXVUMVFh?=
 =?utf-8?B?VUwwbENHdGwzUTI4eXVDSnp4dHZDRC9HRUtKNmZxYzQ1aEU2WE9rbW10dUU5?=
 =?utf-8?B?QkZtTHJXdGREOWVHVks4NnB2RnpHako3VUQ4OXlHVCs3T2x3TGpORzJWeDJs?=
 =?utf-8?B?cHltWXdzMy93alJ3R0FtTXQ5b0dvMHF4ZFlhOEdWUE53Smc9PQ==?=
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:zh-tw; SCL:1;
 SRV:; IPV:NLI; SFV:NSPM; H:SEYPR03MB6700.apcprd03.prod.outlook.com; PTR:;
 CAT:NONE; SFS:(13230040)(366016)(1800799024)(376014)(7416014)(38070700018);
 DIR:OUT; SFP:1102; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?bUZHd0dwNnBJZW5oMVlZdmJqTG4zT3ZNT1pVczJLMEVPNStQNndIN2lCZ1pm?=
 =?utf-8?B?T0ExVjc4cFZjV2x1c0ZRU0hIN3dzMm5ocG1oWlBiaUltbW9KSnQyL2VIOXNy?=
 =?utf-8?B?NElOMmFvdnBHRzg0bUs3bUFNOVhha2JURmhHUDV4REhlamZ5NUgrSUtiVTJB?=
 =?utf-8?B?K09pZHZxaTliQW9WOHUreklzckpQU29KWVpLQnJHSEFIOEtJZlRNYXNhcTg4?=
 =?utf-8?B?K0Rxd2dxVThxRVlPOThaS2pNL3g5M2pZc2V4eTFnYXhXNHNrS3M0c2Ezd3Iz?=
 =?utf-8?B?ZU1WMHB5T0xheFhyenFTSUw4d2VjK01JNjlXb1ZnNFpVbjZkMGJDcnFmelY1?=
 =?utf-8?B?YXo4ZXNZQ1VBVTd5b05PVXFETzBzK1FQK21XZFVTQi9Mc0NNKzM2a1RHaElj?=
 =?utf-8?B?TWhiYTNXRmsxU283U2R5WkRYd2Q2bGcxcjk2NDBCSndOSWRZUFZnWlNXekdk?=
 =?utf-8?B?d3R1S1hTdlFOSm5MQ0NUeHRDTVF1ZHM0SEw0V1hJZ0U5cUdlWlcyeC9tU2tL?=
 =?utf-8?B?VFd1VlVZY2VEQzN6L2FlTGxnVDdXZkFob05IY3ZYNHd4b1Nxa1RjbkN4bmcw?=
 =?utf-8?B?UzBQSTFPLzh6Qjl2Szl6eHdPNHdQSStrWmxIZmptYUpYbE91aEN0MFdNbTc4?=
 =?utf-8?B?WTdpM2YvbzdZSzZUQUxUcEhlUnZCY1ZlcGhQWC90bnBHVnZHNlNWaDZrS05D?=
 =?utf-8?B?dXVKTDVHYk14ZGZkWWd6WkgraHNSaFFmZXdkSnB5NlRyWkNxSXdEQ0o0Nmsy?=
 =?utf-8?B?Z3REVGRteGdQWk9iZVpsUUhHQi9XZ1pITXJHTnRVMHNFdXVZa1J6NUdYRmhi?=
 =?utf-8?B?d2pDMHVuNlFaVS82a2ZZZWtxaS9sUnRFVVdybzROSHpUUlVCeGhuZndMb2pY?=
 =?utf-8?B?dHdHOGRzL0cxcGdhcDNFK1M2VkdvQVNQYUZEbHVSdkJPeXVqckFreHRPMWF1?=
 =?utf-8?B?YTJzK2ppdnUzY1VLTEZPd2dGN3JaWk9NcVNOVEp4WmdHVWIreHYwQlZOSmor?=
 =?utf-8?B?RmpVeUpNR05kVmc2Ym9ERk5RQlkxMlRzNUZSSmN6RFlUeEt2NjBiWHlnUmk4?=
 =?utf-8?B?VVkvRzMyVTZIZlNtOG95azZucjRrT052VXJtVk1YcHhGZ1pENUpYMmlPeCsv?=
 =?utf-8?B?MGNZK055WE9YOGFjWHZ2SHlhaHlIaVFlRitQL3FMTVZBTllKNGo2cHVza2Jm?=
 =?utf-8?B?bTQ0YStXNm0wejNCVVdINDA3UUU4eGhSU2RRaUZtUFRDejZuY1pWb3NXa0lp?=
 =?utf-8?B?V3dmR3EvMmpaaStnRHNSWE04UHIrZ0l1dWJIR05mMXgxUVMxRHlRdWpscVZr?=
 =?utf-8?B?RnZVdFNpN21mbkNkcjFkSG4wTmVWcFFTaUJQL3JTZmJ0aFhsUUhCQVAvbjB5?=
 =?utf-8?B?Tmo4Uk10T1QrY015ZlZGLzFYR2MxK3NYeDdNeWpUbW9kbjFVeGg1Mm1QbUQ5?=
 =?utf-8?B?dzRPWFpnSE5jUEJ5VWJ0VGRDcjRrV2o3cU9OSWtrc3VqWG1DQ05kVXdhR1gr?=
 =?utf-8?B?dXVPT3RVZ0c2MGpVaEJKaHJIZmxpNFNDU3lDclo0MlRqS0xpUGVFTXRLZytP?=
 =?utf-8?B?QmQ2S29DajZRTG9PNVptQXpBZnE3RjBmL1VVYnFjdllNSWdZRGRTcjIrVmVj?=
 =?utf-8?B?MDQvMisrRXlsZUVUWlhhdEo2SGxZTk1wbG1OSTJkYjRSbVpTbWxXVVNZSm03?=
 =?utf-8?B?NllISFRUMkRjM1FIMFlsc2JKVjYxZzI4UUdxZDBlckIrd3cwT2VEWjVaSXBk?=
 =?utf-8?B?SHA3UlU4UlNtM3kySGVZNnBvVzNWem9aWnR6ZGhsMmYzWW1hR1d4eExoa05w?=
 =?utf-8?B?NWIvbGVlRmdqeURwOXdVdUVZMEd5NTV1S25ReVZLS29rM1l5M21oYjJaWk9O?=
 =?utf-8?B?L0U2Sm1GaEZySkp0NEpmUXd5dXliOFV1MFFVUnI0WDFEbWF2TWdrNW1wNTVq?=
 =?utf-8?B?UGFNQ0JydTVxYXdLeVArU1doL0p3a3hrVGptKzhLRm5pejhySXhVd1hGNE5T?=
 =?utf-8?B?SEVKOWx4U0hDT0RIWG11N2hubW00R3M2RmFsKzJPUllsT1lDYVpHTHBUTGhG?=
 =?utf-8?B?dThGM0ZaM3MyQ2RJWGl4L0lmRUFweU9mY0VGalVHSUtlU0tsSVVNT1pvZCt6?=
 =?utf-8?Q?f/Fb+TdcpVK1/wzatuaspOrQJ?=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: andestech.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: SEYPR03MB6700.apcprd03.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: 9bb463af-f31e-4730-140e-08dcbccb3505
X-MS-Exchange-CrossTenant-originalarrivaltime: 15 Aug 2024 01:40:13.3461 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: e3ec21b7-ec6c-4041-9add-61aea8171458
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: 7odvxmuuh+U9rcPIeDJruiH69e5cawex2EmDdJRdSw5aozcmLWyxFcD3txj+LDXXBcToVMNMva+qdADcXe3CWg==
X-MS-Exchange-Transport-CrossTenantHeadersStamped: TYZPR03MB6597
Received-SPF: pass client-ip=2a01:111:f403:c400::;
 envelope-from=alvinga@andestech.com;
 helo=HK2PR02CU002.outbound.protection.outlook.com
X-Spam_score_int: -20
X-Spam_score: -2.1
X-Spam_bar: --
X-Spam_report: (-2.1 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1, SPF_HELO_PASS=-0.001,
 SPF_PASS=-0.001, T_SCC_BODY_TEXT_LINE=-0.01 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

SGkgVG9tbXksDQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogcWVtdS1y
aXNjdi1ib3VuY2VzK2FsdmluZ2E9YW5kZXN0ZWNoLmNvbUBub25nbnUub3JnDQo+IDxxZW11LXJp
c2N2LWJvdW5jZXMrYWx2aW5nYT1hbmRlc3RlY2guY29tQG5vbmdudS5vcmc+IE9uIEJlaGFsZiBP
Zg0KPiBUb21teSBXdQ0KPiBTZW50OiBGcmlkYXksIEF1Z3VzdCA5LCAyMDI0IDQ6MTIgUE0NCj4g
VG86IHFlbXUtZGV2ZWxAbm9uZ251Lm9yZzsgcWVtdS1yaXNjdkBub25nbnUub3JnDQo+IENjOiBm
cmFuay5jaGFuZ0BzaWZpdmUuY29tOyBwYWxtZXJAZGFiYmVsdC5jb207IGFsaXN0YWlyLmZyYW5j
aXNAd2RjLmNvbTsNCj4gYWxpc3RhaXIyM0BnbWFpbC5jb207IGJpbi5tZW5nQHdpbmRyaXZlci5j
b207IGxpd2Vpd2VpQGlzY2FzLmFjLmNuOw0KPiBkYmFyYm96YUB2ZW50YW5hbWljcm8uY29tOyBU
b21teSBXdSA8dG9tbXkud3VAc2lmaXZlLmNvbT4NCj4gU3ViamVjdDogW1BBVENIIHY1IDIvNV0g
dGFyZ2V0L3Jpc2N2OiBIYW5kbGUgU21ybm1pIGludGVycnVwdCBhbmQgZXhjZXB0aW9uLg0KPg0K
PiBbRVhURVJOQUwgTUFJTF0NCj4NCj4gQmVjYXVzZSB0aGUgUk5NSSBpbnRlcnJ1cHQgdHJhcCBo
YW5kbGVyIGFkZHJlc3MgaXMgaW1wbGVtZW50YXRpb24gZGVmaW5lZC4NCj4gV2UgYWRkIHRoZSBg
cm5taS1pbnRlcnJ1cHQtdmVjdG9yYCBhbmQgYHJubWktZXhjZXB0aW9uLXZlY3RvcmAgYXMgdGhl
DQo+IHByb3BlcnR5IG9mIHRoZSBoYXJ0cy4gSXTigJlzIHZlcnkgZWFzeSBmb3IgdXNlcnMgdG8g
c2V0IHRoZSBhZGRyZXNzIGJhc2VkIG9uIHRoZWlyDQo+IGV4cGVjdGF0aW9uLiBUaGlzIHBhdGNo
IGFsc28gYWRkcyB0aGUgZnVuY3Rpb25hbGl0eSB0byBoYW5kbGUgdGhlIFJOTUkgc2lnbmFscy4N
Cj4NCj4gU2lnbmVkLW9mZi1ieTogRnJhbmsgQ2hhbmcgPGZyYW5rLmNoYW5nQHNpZml2ZS5jb20+
DQo+IFNpZ25lZC1vZmYtYnk6IFRvbW15IFd1IDx0b21teS53dUBzaWZpdmUuY29tPg0KPiAtLS0N
Cj4gIGh3L3Jpc2N2L3Jpc2N2X2hhcnQuYyAgICAgICAgIHwgMTggKysrKysrKysNCj4gIGluY2x1
ZGUvaHcvcmlzY3YvcmlzY3ZfaGFydC5oIHwgIDQgKysNCj4gIHRhcmdldC9yaXNjdi9jcHUuYyAg
ICAgICAgICAgIHwgMTEgKysrKysNCj4gIHRhcmdldC9yaXNjdi9jcHUuaCAgICAgICAgICAgIHwg
IDYgKysrDQo+ICB0YXJnZXQvcmlzY3YvY3B1X2JpdHMuaCAgICAgICB8IDEyICsrKysrKw0KPiAg
dGFyZ2V0L3Jpc2N2L2NwdV9oZWxwZXIuYyAgICAgfCA3Nw0KPiArKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKystLQ0KPiAgNiBmaWxlcyBjaGFuZ2VkLCAxMjUgaW5zZXJ0aW9ucygrKSwg
MyBkZWxldGlvbnMoLSkNCj4NCj4gZGlmZiAtLWdpdCBhL2h3L3Jpc2N2L3Jpc2N2X2hhcnQuYyBi
L2h3L3Jpc2N2L3Jpc2N2X2hhcnQuYyBpbmRleA0KPiA2MTNlYTJhYWEwLi5iN2Q3M2Y3YTgyIDEw
MDY0NA0KPiAtLS0gYS9ody9yaXNjdi9yaXNjdl9oYXJ0LmMNCj4gKysrIGIvaHcvcmlzY3Yvcmlz
Y3ZfaGFydC5jDQo+IEBAIC0zMyw2ICszMywxMiBAQCBzdGF0aWMgUHJvcGVydHkgcmlzY3ZfaGFy
dHNfcHJvcHNbXSA9IHsNCj4gICAgICBERUZJTkVfUFJPUF9TVFJJTkcoImNwdS10eXBlIiwgUklT
Q1ZIYXJ0QXJyYXlTdGF0ZSwgY3B1X3R5cGUpLA0KPiAgICAgIERFRklORV9QUk9QX1VJTlQ2NCgi
cmVzZXR2ZWMiLCBSSVNDVkhhcnRBcnJheVN0YXRlLCByZXNldHZlYywNCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgREVGQVVMVF9SU1RWRUMpLA0KPiArICAgIERFRklORV9QUk9QX0FSUkFZKCJy
bm1pLWludGVycnVwdC12ZWN0b3IiLCBSSVNDVkhhcnRBcnJheVN0YXRlLA0KPiArICAgICAgICAg
ICAgICAgICAgICAgIG51bV9ybm1pX2lycXZlYywgcm5taV9pcnF2ZWMsDQo+IHFkZXZfcHJvcF91
aW50NjQsDQo+ICsgICAgICAgICAgICAgICAgICAgICAgdWludDY0X3QpLA0KPiArICAgIERFRklO
RV9QUk9QX0FSUkFZKCJybm1pLWV4Y2VwdGlvbi12ZWN0b3IiLCBSSVNDVkhhcnRBcnJheVN0YXRl
LA0KPiArICAgICAgICAgICAgICAgICAgICAgIG51bV9ybm1pX2V4Y3B2ZWMsIHJubWlfZXhjcHZl
YywNCj4gcWRldl9wcm9wX3VpbnQ2NCwNCj4gKyAgICAgICAgICAgICAgICAgICAgICB1aW50NjRf
dCksDQo+ICAgICAgREVGSU5FX1BST1BfRU5EX09GX0xJU1QoKSwNCj4gIH07DQo+DQo+IEBAIC00
Nyw2ICs1MywxOCBAQCBzdGF0aWMgYm9vbCByaXNjdl9oYXJ0X3JlYWxpemUoUklTQ1ZIYXJ0QXJy
YXlTdGF0ZSAqcywNCj4gaW50IGlkeCwgIHsNCj4gICAgICBvYmplY3RfaW5pdGlhbGl6ZV9jaGls
ZChPQkpFQ1QocyksICJoYXJ0c1sqXSIsICZzLT5oYXJ0c1tpZHhdLCBjcHVfdHlwZSk7DQo+ICAg
ICAgcWRldl9wcm9wX3NldF91aW50NjQoREVWSUNFKCZzLT5oYXJ0c1tpZHhdKSwgInJlc2V0dmVj
Iiwgcy0+cmVzZXR2ZWMpOw0KPiArICAgIGlmIChzLT5oYXJ0c1tpZHhdLmNmZy5leHRfc21ybm1p
KSB7DQo+ICsgICAgICAgIGlmIChzLT5ybm1pX2lycXZlYykgew0KPiArICAgICAgICAgICAgcWRl
dl9wcm9wX3NldF91aW50NjQoREVWSUNFKCZzLT5oYXJ0c1tpZHhdKSwNCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICJybm1pLWludGVycnVwdC12ZWN0b3IiLA0KPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgcy0+cm5taV9pcnF2ZWNbaWR4XSk7DQo+ICsgICAg
ICAgIH0NCj4gKyAgICAgICAgaWYgKHMtPnJubWlfZXhjcHZlYykgew0KPiArICAgICAgICAgICAg
cWRldl9wcm9wX3NldF91aW50NjQoREVWSUNFKCZzLT5oYXJ0c1tpZHhdKSwNCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICJybm1pLWV4Y2VwdGlvbi12ZWN0b3IiLA0KPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy0+cm5taV9leGNwdmVjW2lkeF0pOw0KPiAr
ICAgICAgICB9DQo+ICsgICAgfQ0KPiAgICAgIHMtPmhhcnRzW2lkeF0uZW52Lm1oYXJ0aWQgPSBz
LT5oYXJ0aWRfYmFzZSArIGlkeDsNCj4gICAgICBxZW11X3JlZ2lzdGVyX3Jlc2V0KHJpc2N2X2hh
cnRzX2NwdV9yZXNldCwgJnMtPmhhcnRzW2lkeF0pOw0KPiAgICAgIHJldHVybiBxZGV2X3JlYWxp
emUoREVWSUNFKCZzLT5oYXJ0c1tpZHhdKSwgTlVMTCwgZXJycCk7IGRpZmYgLS1naXQNCj4gYS9p
bmNsdWRlL2h3L3Jpc2N2L3Jpc2N2X2hhcnQuaCBiL2luY2x1ZGUvaHcvcmlzY3YvcmlzY3ZfaGFy
dC5oIGluZGV4DQo+IDkxMmI0YTI2ODIuLmE2ZWQ3M2ExOTUgMTAwNjQ0DQo+IC0tLSBhL2luY2x1
ZGUvaHcvcmlzY3YvcmlzY3ZfaGFydC5oDQo+ICsrKyBiL2luY2x1ZGUvaHcvcmlzY3YvcmlzY3Zf
aGFydC5oDQo+IEBAIC0zOCw2ICszOCwxMCBAQCBzdHJ1Y3QgUklTQ1ZIYXJ0QXJyYXlTdGF0ZSB7
DQo+ICAgICAgdWludDMyX3QgaGFydGlkX2Jhc2U7DQo+ICAgICAgY2hhciAqY3B1X3R5cGU7DQo+
ICAgICAgdWludDY0X3QgcmVzZXR2ZWM7DQo+ICsgICAgdWludDMyX3QgbnVtX3JubWlfaXJxdmVj
Ow0KPiArICAgIHVpbnQ2NF90ICpybm1pX2lycXZlYzsNCj4gKyAgICB1aW50MzJfdCBudW1fcm5t
aV9leGNwdmVjOw0KPiArICAgIHVpbnQ2NF90ICpybm1pX2V4Y3B2ZWM7DQo+ICAgICAgUklTQ1ZD
UFUgKmhhcnRzOw0KPiAgfTsNCj4NCj4gZGlmZiAtLWdpdCBhL3RhcmdldC9yaXNjdi9jcHUuYyBi
L3RhcmdldC9yaXNjdi9jcHUuYyBpbmRleA0KPiBhOTA4MDhhM2JhLi4yZjY0YjNkZjIyIDEwMDY0
NA0KPiAtLS0gYS90YXJnZXQvcmlzY3YvY3B1LmMNCj4gKysrIGIvdGFyZ2V0L3Jpc2N2L2NwdS5j
DQo+IEBAIC0xMzA5LDYgKzEzMDksMTEgQEAgc3RhdGljIHZvaWQgcmlzY3ZfY3B1X3NldF9pcnEo
dm9pZCAqb3BhcXVlLCBpbnQgaXJxLA0KPiBpbnQgbGV2ZWwpDQo+ICAgICAgICAgIGdfYXNzZXJ0
X25vdF9yZWFjaGVkKCk7DQo+ICAgICAgfQ0KPiAgfQ0KPiArDQo+ICtzdGF0aWMgdm9pZCByaXNj
dl9jcHVfc2V0X25taSh2b2lkICpvcGFxdWUsIGludCBpcnEsIGludCBsZXZlbCkgew0KPiArICAg
IHJpc2N2X2NwdV9zZXRfcm5taShSSVNDVl9DUFUob3BhcXVlKSwgaXJxLCBsZXZlbCk7IH0NCj4g
ICNlbmRpZiAvKiBDT05GSUdfVVNFUl9PTkxZICovDQo+DQo+ICBzdGF0aWMgYm9vbCByaXNjdl9j
cHVfaXNfZHluYW1pYyhPYmplY3QgKmNwdV9vYmopIEBAIC0xMzMyLDYgKzEzMzcsOCBAQA0KPiBz
dGF0aWMgdm9pZCByaXNjdl9jcHVfaW5pdChPYmplY3QgKm9iaikgICNpZm5kZWYgQ09ORklHX1VT
RVJfT05MWQ0KPiAgICAgIHFkZXZfaW5pdF9ncGlvX2luKERFVklDRShvYmopLCByaXNjdl9jcHVf
c2V0X2lycSwNCj4gICAgICAgICAgICAgICAgICAgICAgICBJUlFfTE9DQUxfTUFYICsgSVJRX0xP
Q0FMX0dVRVNUX01BWCk7DQo+ICsgICAgcWRldl9pbml0X2dwaW9faW5fbmFtZWQoREVWSUNFKGNw
dSksIHJpc2N2X2NwdV9zZXRfbm1pLA0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICJy
aXNjdi5jcHUucm5taSIsIFJOTUlfTUFYKTsNCj4gICNlbmRpZiAvKiBDT05GSUdfVVNFUl9PTkxZ
ICovDQo+DQo+ICAgICAgZ2VuZXJhbF91c2VyX29wdHMgPSBnX2hhc2hfdGFibGVfbmV3KGdfc3Ry
X2hhc2gsIGdfc3RyX2VxdWFsKTsgQEANCj4gLTI2ODEsNiArMjY4OCwxMCBAQCBzdGF0aWMgUHJv
cGVydHkgcmlzY3ZfY3B1X3Byb3BlcnRpZXNbXSA9IHsNCj4NCj4gICNpZm5kZWYgQ09ORklHX1VT
RVJfT05MWQ0KPiAgICAgIERFRklORV9QUk9QX1VJTlQ2NCgicmVzZXR2ZWMiLCBSSVNDVkNQVSwg
ZW52LnJlc2V0dmVjLA0KPiBERUZBVUxUX1JTVFZFQyksDQo+ICsgICAgREVGSU5FX1BST1BfVUlO
VDY0KCJybm1pLWludGVycnVwdC12ZWN0b3IiLCBSSVNDVkNQVSwNCj4gZW52LnJubWlfaXJxdmVj
LA0KPiArICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX1JOTUlfSVJRVkVDKSwNCj4gKyAg
ICBERUZJTkVfUFJPUF9VSU5UNjQoInJubWktZXhjZXB0aW9uLXZlY3RvciIsIFJJU0NWQ1BVLA0K
PiBlbnYucm5taV9leGNwdmVjLA0KPiArICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX1JO
TUlfRVhDUFZFQyksDQo+ICAjZW5kaWYNCj4NCj4gICAgICBERUZJTkVfUFJPUF9CT09MKCJzaG9y
dC1pc2Etc3RyaW5nIiwgUklTQ1ZDUFUsIGNmZy5zaG9ydF9pc2Ffc3RyaW5nLA0KPiBmYWxzZSks
IGRpZmYgLS1naXQgYS90YXJnZXQvcmlzY3YvY3B1LmggYi90YXJnZXQvcmlzY3YvY3B1LmggaW5k
ZXgNCj4gMTYxOWMzYWNiNi4uZDhhZDA0ZWMzMSAxMDA2NDQNCj4gLS0tIGEvdGFyZ2V0L3Jpc2N2
L2NwdS5oDQo+ICsrKyBiL3RhcmdldC9yaXNjdi9jcHUuaA0KPiBAQCAtNDcyLDYgKzQ3MiwxMSBA
QCBzdHJ1Y3QgQ1BVQXJjaFN0YXRlIHsNCj4gICAgICB1aW50NjRfdCBrdm1fdGltZXJfc3RhdGU7
DQo+ICAgICAgdWludDY0X3Qga3ZtX3RpbWVyX2ZyZXF1ZW5jeTsNCj4gICNlbmRpZiAvKiBDT05G
SUdfS1ZNICovDQo+ICsNCj4gKyAgICAvKiBSTk1JICovDQo+ICsgICAgdGFyZ2V0X3Vsb25nIHJu
bWlwOw0KPiArICAgIHVpbnQ2NF90IHJubWlfaXJxdmVjOw0KPiArICAgIHVpbnQ2NF90IHJubWlf
ZXhjcHZlYzsNCj4gIH07DQo+DQo+ICAvKg0KPiBAQCAtNTY4LDYgKzU3Myw3IEBAIHZvaWQgcmlz
Y3ZfY3B1X3N3YXBfaHlwZXJ2aXNvcl9yZWdzKENQVVJJU0NWU3RhdGUNCj4gKmVudik7ICBpbnQg
cmlzY3ZfY3B1X2NsYWltX2ludGVycnVwdHMoUklTQ1ZDUFUgKmNwdSwgdWludDY0X3QgaW50ZXJy
dXB0cyk7DQo+IHVpbnQ2NF90IHJpc2N2X2NwdV91cGRhdGVfbWlwKENQVVJJU0NWU3RhdGUgKmVu
diwgdWludDY0X3QgbWFzaywNCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2
NF90IHZhbHVlKTsNCj4gK3ZvaWQgcmlzY3ZfY3B1X3NldF9ybm1pKFJJU0NWQ1BVICpjcHUsIHVp
bnQzMl90IGlycSwgYm9vbCBsZXZlbCk7DQo+ICB2b2lkIHJpc2N2X2NwdV9pbnRlcnJ1cHQoQ1BV
UklTQ1ZTdGF0ZSAqZW52KTsgICNkZWZpbmUgQk9PTF9UT19NQVNLKHgpDQo+ICgtISEoeCkpIC8q
IGhlbHBlciBmb3IgcmlzY3ZfY3B1X3VwZGF0ZV9taXAgdmFsdWUgKi8gIHZvaWQNCj4gcmlzY3Zf
Y3B1X3NldF9yZHRpbWVfZm4oQ1BVUklTQ1ZTdGF0ZSAqZW52LCB1aW50NjRfdCAoKmZuKSh2b2lk
ICopLCBkaWZmIC0tZ2l0DQo+IGEvdGFyZ2V0L3Jpc2N2L2NwdV9iaXRzLmggYi90YXJnZXQvcmlz
Y3YvY3B1X2JpdHMuaCBpbmRleA0KPiAzMmIwNjhmMThhLi5lMTRiNjU0YzM1IDEwMDY0NA0KPiAt
LS0gYS90YXJnZXQvcmlzY3YvY3B1X2JpdHMuaA0KPiArKysgYi90YXJnZXQvcmlzY3YvY3B1X2Jp
dHMuaA0KPiBAQCAtNjYyLDYgKzY2MiwxMiBAQCB0eXBlZGVmIGVudW0gew0KPiAgLyogRGVmYXVs
dCBSZXNldCBWZWN0b3IgYWRkcmVzcyAqLw0KPiAgI2RlZmluZSBERUZBVUxUX1JTVFZFQyAgICAg
IDB4MTAwMA0KPg0KPiArLyogRGVmYXVsdCBSTk1JIEludGVycnVwdCBWZWN0b3IgYWRkcmVzcyAq
Lw0KPiArI2RlZmluZSBERUZBVUxUX1JOTUlfSVJRVkVDICAgICAweDANCj4gKw0KPiArLyogRGVm
YXVsdCBSTk1JIEV4Y2VwdGlvbiBWZWN0b3IgYWRkcmVzcyAqLw0KPiArI2RlZmluZSBERUZBVUxU
X1JOTUlfRVhDUFZFQyAgICAweDANCj4gKw0KPiAgLyogRXhjZXB0aW9uIGNhdXNlcyAqLw0KPiAg
dHlwZWRlZiBlbnVtIFJJU0NWRXhjZXB0aW9uIHsNCj4gICAgICBSSVNDVl9FWENQX05PTkUgPSAt
MSwgLyogc2VudGluZWwgdmFsdWUgKi8gQEAgLTcxMSw2ICs3MTcsOSBAQA0KPiB0eXBlZGVmIGVu
dW0gUklTQ1ZFeGNlcHRpb24gew0KPiAgLyogLTEgaXMgZHVlIHRvIGJpdCB6ZXJvIG9mIGhnZWlw
IGFuZCBoZ2VpZSBiZWluZyBST1ouICovDQo+ICAjZGVmaW5lIElSUV9MT0NBTF9HVUVTVF9NQVgg
ICAgICAgICAgICAgICAgKFRBUkdFVF9MT05HX0JJVFMgLQ0KPiAxKQ0KPg0KPiArLyogUk5NSSBj
YXVzZXMgKi8NCj4gKyNkZWZpbmUgUk5NSV9NQVggICAgICAgICAgICAgICAgICAgICAgICAgICAx
Ng0KPiArDQo+ICAvKiBtaXAgbWFza3MgKi8NCj4gICNkZWZpbmUgTUlQX1VTSVAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAoMSA8PCBJUlFfVV9TT0ZUKQ0KPiAgI2RlZmluZSBNSVBfU1NJUCAg
ICAgICAgICAgICAgICAgICAgICAgICAgICgxIDw8IElSUV9TX1NPRlQpDQo+IEBAIC05NDIsNiAr
OTUxLDkgQEAgdHlwZWRlZiBlbnVtIFJJU0NWRXhjZXB0aW9uIHsNCj4gICNkZWZpbmUgTUhQTUVW
RU5UX0lEWF9NQVNLICAgICAgICAgICAgICAgICAweEZGRkZGDQo+ICAjZGVmaW5lIE1IUE1FVkVO
VF9TU0NPRl9SRVNWRCAgICAgICAgICAgICAgMTYNCj4NCj4gKy8qIFJJU0MtVi1zcGVjaWZpYyBp
bnRlcnJ1cHQgcGVuZGluZyBiaXRzLiAqLw0KPiArI2RlZmluZSBDUFVfSU5URVJSVVBUX1JOTUkN
Cj4gQ1BVX0lOVEVSUlVQVF9UR1RfRVhUXzANCj4gKw0KPiAgLyogSlZUIENTUiBiaXRzICovDQo+
ICAjZGVmaW5lIEpWVF9NT0RFICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgzRg0KPiAgI2Rl
ZmluZSBKVlRfQkFTRSAgICAgICAgICAgICAgICAgICAgICAgICAgICh+MHgzRikNCj4gZGlmZiAt
LWdpdCBhL3RhcmdldC9yaXNjdi9jcHVfaGVscGVyLmMgYi90YXJnZXQvcmlzY3YvY3B1X2hlbHBl
ci5jIGluZGV4DQo+IDM5NWExZDkxNDAuLmYxZDQ2NGE1NTQgMTAwNjQ0DQo+IC0tLSBhL3Rhcmdl
dC9yaXNjdi9jcHVfaGVscGVyLmMNCj4gKysrIGIvdGFyZ2V0L3Jpc2N2L2NwdV9oZWxwZXIuYw0K
PiBAQCAtNDM0LDYgKzQzNCwxOCBAQCBzdGF0aWMgaW50IHJpc2N2X2NwdV9sb2NhbF9pcnFfcGVu
ZGluZyhDUFVSSVNDVlN0YXRlDQo+ICplbnYpDQo+ICAgICAgdWludDY0X3QgdnNiaXRzLCBpcnFf
ZGVsZWdhdGVkOw0KPiAgICAgIGludCB2aXJxOw0KPg0KPiArICAgIC8qIFByaW9yaXR5OiBSTk1J
ID4gT3RoZXIgaW50ZXJydXB0LiAqLw0KPiArICAgIGlmIChyaXNjdl9jcHVfY2ZnKGVudiktPmV4
dF9zbXJubWkpIHsNCj4gKyAgICAgICAgLyogSWYgbW5zdGF0dXMuTk1JRSA9PSAwLCBhbGwgaW50
ZXJydXB0cyBhcmUgZGlzYWJsZWQuICovDQo+ICsgICAgICAgIGlmICghZ2V0X2ZpZWxkKGVudi0+
bW5zdGF0dXMsIE1OU1RBVFVTX05NSUUpKSB7DQo+ICsgICAgICAgICAgICByZXR1cm4gUklTQ1Zf
RVhDUF9OT05FOw0KPiArICAgICAgICB9DQo+ICsNCj4gKyAgICAgICAgaWYgKGVudi0+cm5taXAp
IHsNCj4gKyAgICAgICAgICAgIHJldHVybiBjdHo2NChlbnYtPnJubWlwKTsgLyogc2luY2Ugbm9u
LXplcm8gKi8NCj4gKyAgICAgICAgfQ0KPiArICAgIH0NCj4gKw0KPiAgICAgIC8qIERldGVybWlu
ZSBpbnRlcnJ1cHQgZW5hYmxlIHN0YXRlIG9mIGFsbCBwcml2aWxlZ2UgbW9kZXMgKi8NCj4gICAg
ICBpZiAoZW52LT52aXJ0X2VuYWJsZWQpIHsNCj4gICAgICAgICAgbWllID0gMTsNCj4gQEAgLTQ5
Niw3ICs1MDgsOSBAQCBzdGF0aWMgaW50IHJpc2N2X2NwdV9sb2NhbF9pcnFfcGVuZGluZyhDUFVS
SVNDVlN0YXRlDQo+ICplbnYpDQo+DQo+ICBib29sIHJpc2N2X2NwdV9leGVjX2ludGVycnVwdChD
UFVTdGF0ZSAqY3MsIGludCBpbnRlcnJ1cHRfcmVxdWVzdCkgIHsNCj4gLSAgICBpZiAoaW50ZXJy
dXB0X3JlcXVlc3QgJiBDUFVfSU5URVJSVVBUX0hBUkQpIHsNCj4gKyAgICB1aW50MzJfdCBtYXNr
ID0gQ1BVX0lOVEVSUlVQVF9IQVJEIHwgQ1BVX0lOVEVSUlVQVF9STk1JOw0KPiArDQo+ICsgICAg
aWYgKGludGVycnVwdF9yZXF1ZXN0ICYgbWFzaykgew0KPiAgICAgICAgICBSSVNDVkNQVSAqY3B1
ID0gUklTQ1ZfQ1BVKGNzKTsNCj4gICAgICAgICAgQ1BVUklTQ1ZTdGF0ZSAqZW52ID0gJmNwdS0+
ZW52Ow0KPiAgICAgICAgICBpbnQgaW50ZXJydXB0bm8gPSByaXNjdl9jcHVfbG9jYWxfaXJxX3Bl
bmRpbmcoZW52KTsgQEAgLTYxOSw2DQo+ICs2MzMsMzAgQEAgdm9pZCByaXNjdl9jcHVfc2V0X2dl
aWxlbihDUFVSSVNDVlN0YXRlICplbnYsIHRhcmdldF91bG9uZw0KPiBnZWlsZW4pDQo+ICAgICAg
ZW52LT5nZWlsZW4gPSBnZWlsZW47DQo+ICB9DQo+DQo+ICt2b2lkIHJpc2N2X2NwdV9zZXRfcm5t
aShSSVNDVkNQVSAqY3B1LCB1aW50MzJfdCBpcnEsIGJvb2wgbGV2ZWwpIHsNCj4gKyAgICBDUFVS
SVNDVlN0YXRlICplbnYgPSAmY3B1LT5lbnY7DQo+ICsgICAgQ1BVU3RhdGUgKmNzID0gQ1BVKGNw
dSk7DQo+ICsgICAgYm9vbCByZWxlYXNlX2xvY2sgPSBmYWxzZTsNCj4gKw0KPiArICAgIGlmICgh
YnFsX2xvY2tlZCgpKSB7DQo+ICsgICAgICAgIHJlbGVhc2VfbG9jayA9IHRydWU7DQo+ICsgICAg
ICAgIGJxbF9sb2NrKCk7DQo+ICsgICAgfQ0KPiArDQo+ICsgICAgaWYgKGxldmVsKSB7DQo+ICsg
ICAgICAgIGVudi0+cm5taXAgfD0gMSA8PCBpcnE7DQo+ICsgICAgICAgIGNwdV9pbnRlcnJ1cHQo
Y3MsIENQVV9JTlRFUlJVUFRfUk5NSSk7DQo+ICsgICAgfSBlbHNlIHsNCj4gKyAgICAgICAgZW52
LT5ybm1pcCAmPSB+KDEgPDwgaXJxKTsNCj4gKyAgICAgICAgY3B1X3Jlc2V0X2ludGVycnVwdChj
cywgQ1BVX0lOVEVSUlVQVF9STk1JKTsNCj4gKyAgICB9DQo+ICsNCj4gKyAgICBpZiAocmVsZWFz
ZV9sb2NrKSB7DQo+ICsgICAgICAgIGJxbF91bmxvY2soKTsNCj4gKyAgICB9DQo+ICt9DQo+ICsN
Cj4gIGludCByaXNjdl9jcHVfY2xhaW1faW50ZXJydXB0cyhSSVNDVkNQVSAqY3B1LCB1aW50NjRf
dCBpbnRlcnJ1cHRzKSAgew0KPiAgICAgIENQVVJJU0NWU3RhdGUgKmVudiA9ICZjcHUtPmVudjsN
Cj4gQEAgLTE2NTQsNiArMTY5Miw3IEBAIHZvaWQgcmlzY3ZfY3B1X2RvX2ludGVycnVwdChDUFVT
dGF0ZSAqY3MpDQo+ICAgICAgYm9vbCB2aXJ0ID0gZW52LT52aXJ0X2VuYWJsZWQ7DQo+ICAgICAg
Ym9vbCB3cml0ZV9ndmEgPSBmYWxzZTsNCj4gICAgICB1aW50NjRfdCBzOw0KPiArICAgIGludCBt
b2RlOw0KPg0KPiAgICAgIC8qDQo+ICAgICAgICogY3MtPmV4Y2VwdGlvbiBpcyAzMi1iaXRzIHdp
ZGUgdW5saWtlIG1jYXVzZSB3aGljaCBpcyBYTEVOLWJpdHMgd2lkZQ0KPiBAQCAtMTY3MCw2ICsx
NzA5LDIwIEBAIHZvaWQgcmlzY3ZfY3B1X2RvX2ludGVycnVwdChDUFVTdGF0ZSAqY3MpDQo+ICAg
ICAgdGFyZ2V0X3Vsb25nIHRpbnN0ID0gMDsNCj4gICAgICB0YXJnZXRfdWxvbmcgaHR2YWwgPSAw
Ow0KPiAgICAgIHRhcmdldF91bG9uZyBtdHZhbDIgPSAwOw0KPiArICAgIGJvb2wgbm1pX2V4ZWNw
ID0gZmFsc2U7DQo+ICsNCj4gKyAgICBpZiAoY3B1LT5jZmcuZXh0X3Ntcm5taSAmJiBlbnYtPnJu
bWlwICYmIGFzeW5jKSB7DQo+ICsgICAgICAgIGVudi0+bW5zdGF0dXMgPSBzZXRfZmllbGQoZW52
LT5tbnN0YXR1cywgTU5TVEFUVVNfTk1JRSwgZmFsc2UpOw0KPiArICAgICAgICBlbnYtPm1uc3Rh
dHVzID0gc2V0X2ZpZWxkKGVudi0+bW5zdGF0dXMsIE1OU1RBVFVTX01OUFYsDQo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZW52LT52aXJ0X2VuYWJsZWQpOw0KPiArICAgICAg
ICBlbnYtPm1uc3RhdHVzID0gc2V0X2ZpZWxkKGVudi0+bW5zdGF0dXMsIE1OU1RBVFVTX01OUFAs
DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW52LT5wcml2KTsNCj4gKyAg
ICAgICAgZW52LT5tbmNhdXNlID0gY2F1c2UgfCAoKHRhcmdldF91bG9uZykxVSA8PCAoVEFSR0VU
X0xPTkdfQklUUw0KPiAtIDEpKTsNCj4gKyAgICAgICAgZW52LT5tbmVwYyA9IGVudi0+cGM7DQo+
ICsgICAgICAgIGVudi0+cGMgPSBlbnYtPnJubWlfaXJxdmVjOw0KPiArICAgICAgICByaXNjdl9j
cHVfc2V0X21vZGUoZW52LCBQUlZfTSwgdmlydCk7DQo+ICsgICAgICAgIHJldHVybjsNCj4gKyAg
ICB9DQo+DQo+ICAgICAgaWYgKCFhc3luYykgew0KPiAgICAgICAgICAvKiBzZXQgdHZhbCB0byBi
YWRhZGRyIGZvciB0cmFwcyB3aXRoIGFkZHJlc3MgaW5mb3JtYXRpb24gKi8gQEANCj4gLTE3NTUs
OCArMTgwOCwyMCBAQCB2b2lkIHJpc2N2X2NwdV9kb19pbnRlcnJ1cHQoQ1BVU3RhdGUgKmNzKQ0K
PiAgICAgICAgICAgICAgICAgICAgX19mdW5jX18sIGVudi0+bWhhcnRpZCwgYXN5bmMsIGNhdXNl
LCBlbnYtPnBjLCB0dmFsLA0KPiAgICAgICAgICAgICAgICAgICAgcmlzY3ZfY3B1X2dldF90cmFw
X25hbWUoY2F1c2UsIGFzeW5jKSk7DQo+DQo+IC0gICAgaWYgKGVudi0+cHJpdiA8PSBQUlZfUyAm
JiBjYXVzZSA8IDY0ICYmDQo+IC0gICAgICAgICgoKGRlbGVnID4+IGNhdXNlKSAmIDEpIHx8IHNf
aW5qZWN0ZWQgfHwgdnNfaW5qZWN0ZWQpKSB7DQo+ICsgICAgbW9kZSA9IGVudi0+cHJpdiA8PSBQ
UlZfUyAmJiBjYXVzZSA8IDY0ICYmDQo+ICsgICAgICAgICgoKGRlbGVnID4+IGNhdXNlKSAmIDEp
IHx8IHNfaW5qZWN0ZWQgfHwgdnNfaW5qZWN0ZWQpID8gUFJWX1MgOg0KPiArIFBSVl9NOw0KPiAr
DQo+ICsgICAgLyoNCj4gKyAgICAgKiBJZiB0aGUgaGFydCBlbmNvdW50ZXJzIGFuIGV4Y2VwdGlv
biB3aGlsZSBleGVjdXRpbmcgaW4gTS1tb2RlLA0KPiArICAgICAqIHdpdGggdGhlIG1uc3RhdHVz
Lk5NSUUgYml0IGNsZWFyLCB0aGUgcHJvZ3JhbSBjb3VudGVyIGlzIHNldCB0bw0KPiArICAgICAq
IHRoZSBSTk1JIGV4Y2VwdGlvbiB0cmFwIGhhbmRsZXIgYWRkcmVzcy4NCj4gKyAgICAgKi8NCj4g
KyAgICBubWlfZXhlY3AgPSBjcHUtPmNmZy5leHRfc21ybm1pICYmDQo+ICsgICAgICAgICAgICAg
ICAgIWdldF9maWVsZChlbnYtPm1uc3RhdHVzLCBNTlNUQVRVU19OTUlFKSAmJg0KPiArICAgICAg
ICAgICAgICAgICFhc3luYyAmJg0KPiArICAgICAgICAgICAgICAgIG1vZGUgPT0gUFJWX007DQo+
ICsNCj4gKyAgICBpZiAobW9kZSA9PSBQUlZfUykgew0KPiAgICAgICAgICAvKiBoYW5kbGUgdGhl
IHRyYXAgaW4gUy1tb2RlICovDQo+ICAgICAgICAgIGlmIChyaXNjdl9oYXNfZXh0KGVudiwgUlZI
KSkgew0KPiAgICAgICAgICAgICAgdWludDY0X3QgaGRlbGVnID0gYXN5bmMgPyBlbnYtPmhpZGVs
ZWcgOiBlbnYtPmhlZGVsZWc7IEBADQo+IC0xODM0LDYgKzE4OTksMTIgQEAgdm9pZCByaXNjdl9j
cHVfZG9faW50ZXJydXB0KENQVVN0YXRlICpjcykNCj4gICAgICAgICAgZW52LT5tdGluc3QgPSB0
aW5zdDsNCj4gICAgICAgICAgZW52LT5wYyA9IChlbnYtPm10dmVjID4+IDIgPDwgMikgKw0KPiAg
ICAgICAgICAgICAgICAgICAgKChhc3luYyAmJiAoZW52LT5tdHZlYyAmIDMpID09IDEpID8gY2F1
c2UgKiA0IDogMCk7DQpTZWVtcyBhYm92ZSB0d28gbGluZXMgY291bGQgYmUgcmVtb3ZlZCwgc2lu
Y2UgeW91IHNldCBlbnYtPnBjIGFnYWluIGluIHRoZSBmb2xsb3dpbmcgaWYtZWxzZS4NCg0KPiAr
ICAgICAgICBpZiAoY3B1LT5jZmcuZXh0X3Ntcm5taSAmJiBubWlfZXhlY3ApIHsNCj4gKyAgICAg
ICAgICAgIGVudi0+cGMgPSBlbnYtPnJubWlfZXhjcHZlYzsNCj4gKyAgICAgICAgfSBlbHNlIHsN
Cj4gKyAgICAgICAgICAgIGVudi0+cGMgPSAoZW52LT5tdHZlYyA+PiAyIDw8IDIpICsNCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAoKGFzeW5jICYmIChlbnYtPm10dmVjICYgMykgPT0gMSkgPyBj
YXVzZSAqIDQgOg0KPiAwKTsNCj4gKyAgICAgICAgfQ0KPiAgICAgICAgICByaXNjdl9jcHVfc2V0
X21vZGUoZW52LCBQUlZfTSwgdmlydCk7DQo+ICAgICAgfQ0KPg0KPiAtLQ0KPiAyLjM5LjMNCj4N
Cg0KQlJzLA0KQWx2aW4gQ2hhbmcNCg0KQ09ORklERU5USUFMSVRZIE5PVElDRToNCg0KVGhpcyBl
LW1haWwgKGFuZCBpdHMgYXR0YWNobWVudHMpIG1heSBjb250YWluIGNvbmZpZGVudGlhbCBhbmQg
bGVnYWxseSBwcml2aWxlZ2VkIGluZm9ybWF0aW9uIG9yIGluZm9ybWF0aW9uIHByb3RlY3RlZCBm
cm9tIGRpc2Nsb3N1cmUuIElmIHlvdSBhcmUgbm90IHRoZSBpbnRlbmRlZCByZWNpcGllbnQsIHlv
dSBhcmUgaGVyZWJ5IG5vdGlmaWVkIHRoYXQgYW55IGRpc2Nsb3N1cmUsIGNvcHlpbmcsIGRpc3Ry
aWJ1dGlvbiwgb3IgdXNlIG9mIHRoZSBpbmZvcm1hdGlvbiBjb250YWluZWQgaGVyZWluIGlzIHN0
cmljdGx5IHByb2hpYml0ZWQuIEluIHRoaXMgY2FzZSwgcGxlYXNlIGltbWVkaWF0ZWx5IG5vdGlm
eSB0aGUgc2VuZGVyIGJ5IHJldHVybiBlLW1haWwsIGRlbGV0ZSB0aGUgbWVzc2FnZSAoYW5kIGFu
eSBhY2NvbXBhbnlpbmcgZG9jdW1lbnRzKSBhbmQgZGVzdHJveSBhbGwgcHJpbnRlZCBoYXJkIGNv
cGllcy4gVGhhbmsgeW91IGZvciB5b3VyIGNvb3BlcmF0aW9uLg0KDQpDb3B5cmlnaHQgQU5ERVMg
VEVDSE5PTE9HWSBDT1JQT1JBVElPTiAtIEFsbCBSaWdodHMgUmVzZXJ2ZWQuDQo=

