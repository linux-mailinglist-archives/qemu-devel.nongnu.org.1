Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 8877C835B1A
	for <lists+qemu-devel@lfdr.de>; Mon, 22 Jan 2024 07:38:22 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1rRnuU-00038s-AP; Mon, 22 Jan 2024 01:35:54 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <bcain@quicinc.com>) id 1rRnuA-0002su-4e
 for qemu-devel@nongnu.org; Mon, 22 Jan 2024 01:35:34 -0500
Received: from mx0b-0031df01.pphosted.com ([205.220.180.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <bcain@quicinc.com>) id 1rRnu5-0005i4-Jc
 for qemu-devel@nongnu.org; Mon, 22 Jan 2024 01:35:33 -0500
Received: from pps.filterd (m0279871.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.17.1.24/8.17.1.24) with ESMTP id
 40M5SoeC023336; Mon, 22 Jan 2024 06:35:28 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=quicinc.com; h=
 from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-type:content-transfer-encoding; s=
 qcppdkim1; bh=BVb8ovxe2HmIYRj2K2W7SZ++nt40WO25p8LXxgRL2hY=; b=bF
 dwAVuXAobY2Aujir7w6mTmKwaALHibDNDAmTuADZlrzS8rZO15/vXw00afZyikV0
 db5rw2DWS2iJogrVVqUvW+SjIg/rphemfDsv4P+UGPpYLyipBpZ+4wUWLJu72J+S
 uucUkVDcRJmqHFPVlX0azaRdJMdjYa2B13fbLzOXWHUmg4lf7whJOyL+Oe2GqVxl
 Q38zJpHvoqyHVFeFvnEfak9dUNMNgn2MdYjvEU2kAPSFbA/pncGW5VOVuUmZStIr
 THBjvyqipTztBT65rkI40/ef18eBiuur4D8xtTKfVEdQuXlYEx65jNA/s2QH2hC4
 Hpk+hJfrgETf/58majoQ==
Received: from nalasppmta05.qualcomm.com (Global_NAT1.qualcomm.com
 [129.46.96.20])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 3vr5s4u45q-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Mon, 22 Jan 2024 06:35:27 +0000 (GMT)
Received: from nalasex01a.na.qualcomm.com (nalasex01a.na.qualcomm.com
 [10.47.209.196])
 by NALASPPMTA05.qualcomm.com (8.17.1.5/8.17.1.5) with ESMTPS id 40M6ZQsF002684
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Mon, 22 Jan 2024 06:35:26 GMT
Received: from hu-bcain-lv.qualcomm.com (10.49.16.6) by
 nalasex01a.na.qualcomm.com (10.47.209.196) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.2.1118.40; Sun, 21 Jan 2024 22:35:25 -0800
From: Brian Cain <bcain@quicinc.com>
To: <qemu-devel@nongnu.org>
CC: <bcain@quicinc.com>, <armbru@redhat.com>, <richard.henderson@linaro.org>, 
 <philmd@linaro.org>, <peter.maydell@linaro.org>,
 <quic_mathbern@quicinc.com>, <stefanha@redhat.com>, <ale@rev.ng>,
 <anjo@rev.ng>, <quic_mliebel@quicinc.com>, <ltaylorsimpson@gmail.com>
Subject: [PULL 04/15] Hexagon (target/hexagon) Make generators object oriented
 - gen_tcg_funcs
Date: Sun, 21 Jan 2024 22:34:50 -0800
Message-ID: <20240122063501.782041-5-bcain@quicinc.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20240122063501.782041-1-bcain@quicinc.com>
References: <20240122063501.782041-1-bcain@quicinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Originating-IP: [10.49.16.6]
X-ClientProxiedBy: nalasex01b.na.qualcomm.com (10.47.209.197) To
 nalasex01a.na.qualcomm.com (10.47.209.196)
X-QCInternal: smtphost
X-Proofpoint-Virus-Version: vendor=nai engine=6200 definitions=5800
 signatures=585085
X-Proofpoint-ORIG-GUID: lzTHduawbDhOJl72ciiZ8OXGC4p9j2Zh
X-Proofpoint-GUID: lzTHduawbDhOJl72ciiZ8OXGC4p9j2Zh
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.272,Aquarius:18.0.997,Hydra:6.0.619,FMLib:17.11.176.26
 definitions=2024-01-21_04,2024-01-19_02,2023-05-22_02
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 mlxscore=0 suspectscore=0
 spamscore=0 clxscore=1015 phishscore=0 lowpriorityscore=0 adultscore=0
 mlxlogscore=856 priorityscore=1501 impostorscore=0 malwarescore=0
 bulkscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.19.0-2311290000 definitions=main-2401220046
Received-SPF: pass client-ip=205.220.180.131; envelope-from=bcain@quicinc.com;
 helo=mx0b-0031df01.pphosted.com
X-Spam_score_int: -20
X-Spam_score: -2.1
X-Spam_bar: --
X-Spam_report: (-2.1 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001, T_SCC_BODY_TEXT_LINE=-0.01 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

RnJvbTogVGF5bG9yIFNpbXBzb24gPGx0YXlsb3JzaW1wc29uQGdtYWlsLmNvbT4KClRoZSBnZW5l
cmF0b3JzIGFyZSBnZW5lcmFsbHkgYSBidW5jaCBvZiBQeXRob24gaWYtdGhlbi1lbHNlCnN0YXRl
bWVudHMgYmFzZWQgb24gdGhlIHJlZ3R5cGUgYW5kIHJlZ2lkLiAgRW5jYXBzdWxhdGUgcmVndHlw
ZS9yZWdpZAppbnRvIGEgY2xhc3MgaGllcmFyY2h5LiAgQ2xpZW50cyBsb29rdXAgdGhlIHJlZ2lz
dGVyIGFuZCBpbnZva2UKbWV0aG9kcy4KClRoaXMgaGFzIHNldmVyYWwgYWR2YW50YWdlcyBmb3Ig
bWFraW5nIHRoZSBjb2RlIGVhc2llciB0byByZWFkLAp1bmRlcnN0YW5kLCBhbmQgbWFpbnRhaW4K
LSBUaGUgY2xhc3MgbmFtZSBtYWtlcyBpdCBtb3JlIGNsZWFyIHdoYXQgdGhlIG9wZXJhbmQgZG9l
cwotIEFsbCB0aGUgbWV0aG9kcyBmb3IgYSBnaXZlbiB0eXBlIG9mIG9wZXJhbmQgYXJlIHRvZ2V0
aGVyCi0gRG9uJ3QgbmVlZCBoZXhfY29tbW9uLmJhZF9yZWdpc3RlcgogIElmIGEgcmVndHlwZS9y
ZWdpZCBpcyBtaXNzaW5nLCB0aGUgbG9va3VwIGluIGhleF9jb21tb24uZ2V0X3JlZ2lzdGVyCiAg
d2lsbCBmYWlsCi0gV2UgY2FuIHJlbW92ZSB0aGUgZnVuY3Rpb25zIGluIGhleF9jb21tb24gdGhh
dCB1c2UgcmVndHlwZS9yZWdpZAogIChlLmcuLCBpc19yZWFkKQoKVGhpcyBwYXRjaCBjcmVhdGVz
IHRoZSBjbGFzcyBoaWVyYXJjaHkgaW4gaGV4X2NvbW1vbiBhbmQgY29udmVydHMKZ2VuX3RjZ19m
dW5jcy5weS4gIFRoZSBvdGhlciBzY3JpcHRzIHdpbGwgYmUgY29udmVydGVkIGluIHN1YnNlcXVl
bnQKcGF0Y2hlcyBpbiB0aGlzIHNlcmllcy4KClNpZ25lZC1vZmYtYnk6IFRheWxvciBTaW1wc29u
IDxsdGF5bG9yc2ltcHNvbkBnbWFpbC5jb20+ClJldmlld2VkLWJ5OiBCcmlhbiBDYWluIDxiY2Fp
bkBxdWljaW5jLmNvbT4KTWVzc2FnZS1JZDogPDIwMjMxMjEwMjIwNzEyLjQ5MTQ5NC0zLWx0YXls
b3JzaW1wc29uQGdtYWlsLmNvbT4KU2lnbmVkLW9mZi1ieTogQnJpYW4gQ2FpbiA8YmNhaW5AcXVp
Y2luYy5jb20+Ci0tLQogdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5weSB8IDU3MSArKy0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIHRhcmdldC9oZXhhZ29uL2hleF9jb21tb24ucHkgICAg
fCA2NTkgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIDIgZmlsZXMgY2hhbmdlZCwg
NjgzIGluc2VydGlvbnMoKyksIDU0NyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS90YXJnZXQv
aGV4YWdvbi9nZW5fdGNnX2Z1bmNzLnB5IGIvdGFyZ2V0L2hleGFnb24vZ2VuX3RjZ19mdW5jcy5w
eQppbmRleCAwMmQ5M2JjNWNlLi4zZDhlM2NiNmEyIDEwMDc1NQotLS0gYS90YXJnZXQvaGV4YWdv
bi9nZW5fdGNnX2Z1bmNzLnB5CisrKyBiL3RhcmdldC9oZXhhZ29uL2dlbl90Y2dfZnVuY3MucHkK
QEAgLTIzLDQ2NiArMjMsMTMgQEAKIGltcG9ydCBoZXhfY29tbW9uCiAKIAotIyMKLSMjIEhlbHBl
cnMgZm9yIGdlbl90Y2dfZnVuYwotIyMKLWRlZiBnZW5fZGVjbF9lYV90Y2coZiwgdGFnKToKLSAg
ICBmLndyaXRlKCIgICAgVENHdiBFQSBHX0dOVUNfVU5VU0VEID0gdGNnX3RlbXBfbmV3KCk7XG4i
KQotCi0KLWRlZiBnZW5wdHJfZGVjbF9wYWlyX3dyaXRhYmxlKGYsIHRhZywgcmVndHlwZSwgcmVn
aWQsIHJlZ25vKToKLSAgICByZWdOID0gZiJ7cmVndHlwZX17cmVnaWR9TiIKLSAgICBpZiByZWd0
eXBlID09ICJSIjoKLSAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3JlZ059ID0gaW5z
bi0+cmVnbm9be3JlZ25vfV07XG4iKQotICAgIGVsaWYgcmVndHlwZSA9PSAiQyI6Ci0gICAgICAg
IGYud3JpdGUoZiIgICAgY29uc3QgaW50IHtyZWdOfSA9IGluc24tPnJlZ25vW3tyZWdub31dICsg
SEVYX1JFR19TQTA7XG4iKQotICAgIGVsc2U6Ci0gICAgICAgIGhleF9jb21tb24uYmFkX3JlZ2lz
dGVyKHJlZ3R5cGUsIHJlZ2lkKQotICAgIGYud3JpdGUoZiIgICAgVENHdl9pNjQge3JlZ3R5cGV9
e3JlZ2lkfVYgPSAiIGYiZ2V0X3Jlc3VsdF9ncHJfcGFpcihjdHgsIHtyZWdOfSk7XG4iKQotCi0K
LWRlZiBnZW5wdHJfZGVjbF93cml0YWJsZShmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCByZWdubyk6
Ci0gICAgcmVnTiA9IGYie3JlZ3R5cGV9e3JlZ2lkfU4iCi0gICAgaWYgcmVndHlwZSA9PSAiUiI6
Ci0gICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50IHtyZWdOfSA9IGluc24tPnJlZ25vW3ty
ZWdub31dO1xuIikKLSAgICAgICAgZi53cml0ZShmIiAgICBUQ0d2IHtyZWd0eXBlfXtyZWdpZH1W
ID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCB7cmVnTn0pO1xuIikKLSAgICBlbGlmIHJlZ3R5cGUgPT0g
IkMiOgotICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdu
b1t7cmVnbm99XSArIEhFWF9SRUdfU0EwO1xuIikKLSAgICAgICAgZi53cml0ZShmIiAgICBUQ0d2
IHtyZWd0eXBlfXtyZWdpZH1WID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCB7cmVnTn0pO1xuIikKLSAg
ICBlbGlmIHJlZ3R5cGUgPT0gIlAiOgotICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludCB7
cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCi0gICAgICAgIGYud3JpdGUoZiIgICAg
VENHdiB7cmVndHlwZX17cmVnaWR9ViA9IHRjZ190ZW1wX25ldygpO1xuIikKLSAgICBlbHNlOgot
ICAgICAgICBoZXhfY29tbW9uLmJhZF9yZWdpc3RlcihyZWd0eXBlLCByZWdpZCkKLQotCi1kZWYg
Z2VucHRyX2RlY2woZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8pOgotICAgIHJlZ04gPSBm
IntyZWd0eXBlfXtyZWdpZH1OIgotICAgIGlmIHJlZ3R5cGUgPT0gIlIiOgotICAgICAgICBpZiBy
ZWdpZCBpbiB7InNzIiwgInR0In06Ci0gICAgICAgICAgICBmLndyaXRlKGYiICAgIFRDR3ZfaTY0
IHtyZWd0eXBlfXtyZWdpZH1WID0gdGNnX3RlbXBfbmV3X2k2NCgpO1xuIikKLSAgICAgICAgICAg
IGYud3JpdGUoZiIgICAgY29uc3QgaW50IHtyZWdOfSA9IGluc24tPnJlZ25vW3tyZWdub31dO1xu
IikKLSAgICAgICAgZWxpZiByZWdpZCBpbiB7ImRkIiwgImVlIiwgInh4IiwgInl5In06Ci0gICAg
ICAgICAgICBnZW5wdHJfZGVjbF9wYWlyX3dyaXRhYmxlKGYsIHRhZywgcmVndHlwZSwgcmVnaWQs
IHJlZ25vKQotICAgICAgICBlbGlmIHJlZ2lkIGluIHsicyIsICJ0IiwgInUiLCAidiJ9OgotICAg
ICAgICAgICAgZi53cml0ZSgKLSAgICAgICAgICAgICAgICBmIiAgICBUQ0d2IHtyZWd0eXBlfXty
ZWdpZH1WID0gIiBmImhleF9ncHJbaW5zbi0+cmVnbm9be3JlZ25vfV1dO1xuIgotICAgICAgICAg
ICAgKQotICAgICAgICBlbGlmIHJlZ2lkIGluIHsiZCIsICJlIiwgIngiLCAieSJ9OgotICAgICAg
ICAgICAgZ2VucHRyX2RlY2xfd3JpdGFibGUoZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgcmVnbm8p
Ci0gICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBoZXhfY29tbW9uLmJhZF9yZWdpc3RlcihyZWd0
eXBlLCByZWdpZCkKLSAgICBlbGlmIHJlZ3R5cGUgPT0gIlAiOgotICAgICAgICBpZiByZWdpZCBp
biB7InMiLCAidCIsICJ1IiwgInYifToKLSAgICAgICAgICAgIGYud3JpdGUoCi0gICAgICAgICAg
ICAgICAgZiIgICAgVENHdiB7cmVndHlwZX17cmVnaWR9ViA9ICIgZiJoZXhfcHJlZFtpbnNuLT5y
ZWdub1t7cmVnbm99XV07XG4iCi0gICAgICAgICAgICApCi0gICAgICAgIGVsaWYgcmVnaWQgaW4g
eyJkIiwgImUiLCAieCJ9OgotICAgICAgICAgICAgZ2VucHRyX2RlY2xfd3JpdGFibGUoZiwgdGFn
LCByZWd0eXBlLCByZWdpZCwgcmVnbm8pCi0gICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBoZXhf
Y29tbW9uLmJhZF9yZWdpc3RlcihyZWd0eXBlLCByZWdpZCkKLSAgICBlbGlmIHJlZ3R5cGUgPT0g
IkMiOgotICAgICAgICBpZiByZWdpZCA9PSAic3MiOgotICAgICAgICAgICAgZi53cml0ZShmIiAg
ICBUQ0d2X2k2NCB7cmVndHlwZX17cmVnaWR9ViA9ICIgZiJ0Y2dfdGVtcF9uZXdfaTY0KCk7XG4i
KQotICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3JlZ059ID0gaW5zbi0+cmVn
bm9be3JlZ25vfV0gKyAiICJIRVhfUkVHX1NBMDtcbiIpCi0gICAgICAgIGVsaWYgcmVnaWQgPT0g
ImRkIjoKLSAgICAgICAgICAgIGdlbnB0cl9kZWNsX3BhaXJfd3JpdGFibGUoZiwgdGFnLCByZWd0
eXBlLCByZWdpZCwgcmVnbm8pCi0gICAgICAgIGVsaWYgcmVnaWQgPT0gInMiOgotICAgICAgICAg
ICAgZi53cml0ZShmIiAgICBUQ0d2IHtyZWd0eXBlfXtyZWdpZH1WID0gdGNnX3RlbXBfbmV3KCk7
XG4iKQotICAgICAgICAgICAgZi53cml0ZSgKLSAgICAgICAgICAgICAgICBmIiAgICBjb25zdCBp
bnQge3JlZ3R5cGV9e3JlZ2lkfU4gPSBpbnNuLT5yZWdub1t7cmVnbm99XSArICIKLSAgICAgICAg
ICAgICAgICAiSEVYX1JFR19TQTA7XG4iCi0gICAgICAgICAgICApCi0gICAgICAgIGVsaWYgcmVn
aWQgPT0gImQiOgotICAgICAgICAgICAgZ2VucHRyX2RlY2xfd3JpdGFibGUoZiwgdGFnLCByZWd0
eXBlLCByZWdpZCwgcmVnbm8pCi0gICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBoZXhfY29tbW9u
LmJhZF9yZWdpc3RlcihyZWd0eXBlLCByZWdpZCkKLSAgICBlbGlmIHJlZ3R5cGUgPT0gIk0iOgot
ICAgICAgICBpZiByZWdpZCA9PSAidSI6Ci0gICAgICAgICAgICBmLndyaXRlKAotICAgICAgICAg
ICAgICAgIGYiICAgIGNvbnN0IGludCB7cmVnTn0gPSBpbnNuLT5yZWdub1t7cmVnbm99XSArIEhF
WF9SRUdfTTA7XG4iCi0gICAgICAgICAgICApCi0gICAgICAgICAgICBmLndyaXRlKAotICAgICAg
ICAgICAgICAgIGYiICAgIFRDR3Yge3JlZ3R5cGV9e3JlZ2lkfVYgPSBoZXhfZ3ByW3tyZWdOfV07
XG4iCi0gICAgICAgICAgICApCi0gICAgICAgICAgICBmLndyaXRlKAotICAgICAgICAgICAgICAg
IGYiICAgIFRDR3YgQ1MgR19HTlVDX1VOVVNFRCA9ICIKLSAgICAgICAgICAgICAgICBmImhleF9n
cHJbe3JlZ059IC0gSEVYX1JFR19NMCArIEhFWF9SRUdfQ1MwXTtcbiIKLSAgICAgICAgICAgICkK
LSAgICAgICAgZWxzZToKLSAgICAgICAgICAgIGhleF9jb21tb24uYmFkX3JlZ2lzdGVyKHJlZ3R5
cGUsIHJlZ2lkKQotICAgIGVsaWYgcmVndHlwZSA9PSAiViI6Ci0gICAgICAgIGlmIHJlZ2lkIGlu
IHsiZGQifToKLSAgICAgICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50IHtyZWd0eXBlfXty
ZWdpZH1OID0gIiBmImluc24tPnJlZ25vW3tyZWdub31dO1xuIikKLSAgICAgICAgICAgIGYud3Jp
dGUoZiIgICAgY29uc3QgaW50cHRyX3Qge3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmID1cbiIpCi0gICAg
ICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3RtcF9yZXN1bHQodGFnKToKLSAgICAgICAgICAgICAg
ICBmLndyaXRlKAotICAgICAgICAgICAgICAgICAgICBmIiAgICAgICAgY3R4X3RtcF92cmVnX29m
ZihjdHgsIHtyZWd0eXBlfXtyZWdpZH1OLCAyLCAiICJ0cnVlKTtcbiIKLSAgICAgICAgICAgICAg
ICApCi0gICAgICAgICAgICBlbHNlOgotICAgICAgICAgICAgICAgIGYud3JpdGUoZiIgICAgICAg
IGN0eF9mdXR1cmVfdnJlZ19vZmYoY3R4LCB7cmVndHlwZX17cmVnaWR9TiwiKQotICAgICAgICAg
ICAgICAgIGYud3JpdGUoIiAyLCB0cnVlKTtcbiIpCi0gICAgICAgICAgICBpZiBub3QgaGV4X2Nv
bW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZyk6Ci0gICAgICAgICAgICAgICAgZi53cml0ZShmIiAg
ICBUQ0d2X3B0ciB7cmVndHlwZX17cmVnaWR9ViA9ICIgInRjZ190ZW1wX25ld19wdHIoKTtcbiIp
Ci0gICAgICAgICAgICAgICAgZi53cml0ZSgKLSAgICAgICAgICAgICAgICAgICAgZiIgICAgdGNn
X2dlbl9hZGRpX3B0cih7cmVndHlwZX17cmVnaWR9ViwgdGNnX2VudiwgIgotICAgICAgICAgICAg
ICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1WX29mZik7XG4iCi0gICAgICAgICAgICAgICAgKQot
ICAgICAgICBlbGlmIHJlZ2lkIGluIHsidXUiLCAidnYiLCAieHgifToKLSAgICAgICAgICAgIGYu
d3JpdGUoZiIgICAgY29uc3QgaW50IHtyZWd0eXBlfXtyZWdpZH1OID0gIiBmImluc24tPnJlZ25v
W3tyZWdub31dO1xuIikKLSAgICAgICAgICAgIGYud3JpdGUoZiIgICAgY29uc3QgaW50cHRyX3Qg
e3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmID1cbiIpCi0gICAgICAgICAgICBmLndyaXRlKGYiICAgICAg
ICBvZmZzZXRvZihDUFVIZXhhZ29uU3RhdGUsIHtyZWd0eXBlfXtyZWdpZH1WKTtcbiIpCi0gICAg
ICAgICAgICBpZiBub3QgaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZyk6Ci0gICAgICAg
ICAgICAgICAgZi53cml0ZShmIiAgICBUQ0d2X3B0ciB7cmVndHlwZX17cmVnaWR9ViA9ICIgInRj
Z190ZW1wX25ld19wdHIoKTtcbiIpCi0gICAgICAgICAgICAgICAgZi53cml0ZSgKLSAgICAgICAg
ICAgICAgICAgICAgZiIgICAgdGNnX2dlbl9hZGRpX3B0cih7cmVndHlwZX17cmVnaWR9ViwgdGNn
X2VudiwgIgotICAgICAgICAgICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1WX29mZik7XG4i
Ci0gICAgICAgICAgICAgICAgKQotICAgICAgICBlbGlmIHJlZ2lkIGluIHsicyIsICJ1IiwgInYi
LCAidyJ9OgotICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQge3JlZ3R5cGV9e3Jl
Z2lkfU4gPSAiIGYiaW5zbi0+cmVnbm9be3JlZ25vfV07XG4iKQotICAgICAgICAgICAgZi53cml0
ZShmIiAgICBjb25zdCBpbnRwdHJfdCB7cmVndHlwZX17cmVnaWR9Vl9vZmYgPVxuIikKLSAgICAg
ICAgICAgIGYud3JpdGUoZiIgICAgICAgIHZyZWdfc3JjX29mZihjdHgsIHtyZWd0eXBlfXtyZWdp
ZH1OKTtcbiIpCi0gICAgICAgICAgICBpZiBub3QgaGV4X2NvbW1vbi5za2lwX3FlbXVfaGVscGVy
KHRhZyk6Ci0gICAgICAgICAgICAgICAgZi53cml0ZShmIiAgICBUQ0d2X3B0ciB7cmVndHlwZX17
cmVnaWR9ViA9ICIgInRjZ190ZW1wX25ld19wdHIoKTtcbiIpCi0gICAgICAgIGVsaWYgcmVnaWQg
aW4geyJkIiwgIngiLCAieSJ9OgotICAgICAgICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnQg
e3JlZ3R5cGV9e3JlZ2lkfU4gPSAiIGYiaW5zbi0+cmVnbm9be3JlZ25vfV07XG4iKQotICAgICAg
ICAgICAgZi53cml0ZShmIiAgICBjb25zdCBpbnRwdHJfdCB7cmVndHlwZX17cmVnaWR9Vl9vZmYg
PVxuIikKLSAgICAgICAgICAgIGlmIHJlZ2lkID09ICJ5IjoKLSAgICAgICAgICAgICAgICBmLndy
aXRlKCIgICAgICAgIG9mZnNldG9mKENQVUhleGFnb25TdGF0ZSwgdnRtcCk7XG4iKQotICAgICAg
ICAgICAgZWxpZiBoZXhfY29tbW9uLmlzX3RtcF9yZXN1bHQodGFnKToKLSAgICAgICAgICAgICAg
ICBmLndyaXRlKAotICAgICAgICAgICAgICAgICAgICBmIiAgICAgICAgY3R4X3RtcF92cmVnX29m
ZihjdHgsIHtyZWd0eXBlfXtyZWdpZH1OLCAxLCAiICJ0cnVlKTtcbiIKLSAgICAgICAgICAgICAg
ICApCi0gICAgICAgICAgICBlbHNlOgotICAgICAgICAgICAgICAgIGYud3JpdGUoZiIgICAgICAg
IGN0eF9mdXR1cmVfdnJlZ19vZmYoY3R4LCB7cmVndHlwZX17cmVnaWR9TiwiKQotICAgICAgICAg
ICAgICAgIGYud3JpdGUoIiAxLCB0cnVlKTtcbiIpCi0KLSAgICAgICAgICAgIGlmIG5vdCBoZXhf
Y29tbW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKToKLSAgICAgICAgICAgICAgICBmLndyaXRlKGYi
ICAgIFRDR3ZfcHRyIHtyZWd0eXBlfXtyZWdpZH1WID0gIiAidGNnX3RlbXBfbmV3X3B0cigpO1xu
IikKLSAgICAgICAgICAgICAgICBmLndyaXRlKAotICAgICAgICAgICAgICAgICAgICBmIiAgICB0
Y2dfZ2VuX2FkZGlfcHRyKHtyZWd0eXBlfXtyZWdpZH1WLCB0Y2dfZW52LCAiCi0gICAgICAgICAg
ICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmKTtcbiIKLSAgICAgICAgICAgICAgICAp
Ci0gICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBoZXhfY29tbW9uLmJhZF9yZWdpc3RlcihyZWd0
eXBlLCByZWdpZCkKLSAgICBlbGlmIHJlZ3R5cGUgPT0gIlEiOgotICAgICAgICBpZiByZWdpZCBp
biB7ImQiLCAiZSIsICJ4In06Ci0gICAgICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludCB7
cmVndHlwZX17cmVnaWR9TiA9ICIgZiJpbnNuLT5yZWdub1t7cmVnbm99XTtcbiIpCi0gICAgICAg
ICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludHB0cl90IHtyZWd0eXBlfXtyZWdpZH1WX29mZiA9
XG4iKQotICAgICAgICAgICAgZi53cml0ZShmIiAgICAgICAgZ2V0X3Jlc3VsdF9xcmVnKGN0eCwg
e3JlZ3R5cGV9e3JlZ2lkfU4pO1xuIikKLSAgICAgICAgICAgIGlmIG5vdCBoZXhfY29tbW9uLnNr
aXBfcWVtdV9oZWxwZXIodGFnKToKLSAgICAgICAgICAgICAgICBmLndyaXRlKGYiICAgIFRDR3Zf
cHRyIHtyZWd0eXBlfXtyZWdpZH1WID0gIiAidGNnX3RlbXBfbmV3X3B0cigpO1xuIikKLSAgICAg
ICAgICAgICAgICBmLndyaXRlKAotICAgICAgICAgICAgICAgICAgICBmIiAgICB0Y2dfZ2VuX2Fk
ZGlfcHRyKHtyZWd0eXBlfXtyZWdpZH1WLCB0Y2dfZW52LCAiCi0gICAgICAgICAgICAgICAgICAg
IGYie3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmKTtcbiIKLSAgICAgICAgICAgICAgICApCi0gICAgICAg
IGVsaWYgcmVnaWQgaW4geyJzIiwgInQiLCAidSIsICJ2In06Ci0gICAgICAgICAgICBmLndyaXRl
KGYiICAgIGNvbnN0IGludCB7cmVndHlwZX17cmVnaWR9TiA9ICIgZiJpbnNuLT5yZWdub1t7cmVn
bm99XTtcbiIpCi0gICAgICAgICAgICBmLndyaXRlKGYiICAgIGNvbnN0IGludHB0cl90IHtyZWd0
eXBlfXtyZWdpZH1WX29mZiA9XG4iKQotICAgICAgICAgICAgZi53cml0ZSgKLSAgICAgICAgICAg
ICAgICBmIiAgICAgICAgb2Zmc2V0b2YoQ1BVSGV4YWdvblN0YXRlLCAiIGYiUVJlZ3Nbe3JlZ3R5
cGV9e3JlZ2lkfU5dKTtcbiIKLSAgICAgICAgICAgICkKLSAgICAgICAgICAgIGlmIG5vdCBoZXhf
Y29tbW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKToKLSAgICAgICAgICAgICAgICBmLndyaXRlKGYi
ICAgIFRDR3ZfcHRyIHtyZWd0eXBlfXtyZWdpZH1WID0gIiAidGNnX3RlbXBfbmV3X3B0cigpO1xu
IikKLSAgICAgICAgZWxzZToKLSAgICAgICAgICAgIGhleF9jb21tb24uYmFkX3JlZ2lzdGVyKHJl
Z3R5cGUsIHJlZ2lkKQotICAgIGVsc2U6Ci0gICAgICAgIGhleF9jb21tb24uYmFkX3JlZ2lzdGVy
KHJlZ3R5cGUsIHJlZ2lkKQotCi0KLWRlZiBnZW5wdHJfZGVjbF9uZXcoZiwgdGFnLCByZWd0eXBl
LCByZWdpZCwgcmVnbm8pOgotICAgIGlmIHJlZ3R5cGUgPT0gIk4iOgotICAgICAgICBpZiByZWdp
ZCBpbiB7InMiLCAidCJ9OgotICAgICAgICAgICAgZi53cml0ZSgKLSAgICAgICAgICAgICAgICBm
IiAgICBUQ0d2IHtyZWd0eXBlfXtyZWdpZH1OID0gIgotICAgICAgICAgICAgICAgIGYiZ2V0X3Jl
c3VsdF9ncHIoY3R4LCBpbnNuLT5yZWdub1t7cmVnbm99XSk7XG4iCi0gICAgICAgICAgICApCi0g
ICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBoZXhfY29tbW9uLmJhZF9yZWdpc3RlcihyZWd0eXBl
LCByZWdpZCkKLSAgICBlbGlmIHJlZ3R5cGUgPT0gIlAiOgotICAgICAgICBpZiByZWdpZCBpbiB7
InQiLCAidSIsICJ2In06Ci0gICAgICAgICAgICBmLndyaXRlKAotICAgICAgICAgICAgICAgIGYi
ICAgIFRDR3Yge3JlZ3R5cGV9e3JlZ2lkfU4gPSAiCi0gICAgICAgICAgICAgICAgZiJjdHgtPm5l
d19wcmVkX3ZhbHVlW2luc24tPnJlZ25vW3tyZWdub31dXTtcbiIKLSAgICAgICAgICAgICkKLSAg
ICAgICAgZWxzZToKLSAgICAgICAgICAgIGhleF9jb21tb24uYmFkX3JlZ2lzdGVyKHJlZ3R5cGUs
IHJlZ2lkKQotICAgIGVsaWYgcmVndHlwZSA9PSAiTyI6Ci0gICAgICAgIGlmIHJlZ2lkID09ICJz
IjoKLSAgICAgICAgICAgIGYud3JpdGUoCi0gICAgICAgICAgICAgICAgZiIgICAgY29uc3QgaW50
cHRyX3Qge3JlZ3R5cGV9e3JlZ2lkfU5fbnVtID0gIgotICAgICAgICAgICAgICAgIGYiaW5zbi0+
cmVnbm9be3JlZ25vfV07XG4iCi0gICAgICAgICAgICApCi0gICAgICAgICAgICBpZiBoZXhfY29t
bW9uLnNraXBfcWVtdV9oZWxwZXIodGFnKToKLSAgICAgICAgICAgICAgICBmLndyaXRlKGYiICAg
IGNvbnN0IGludHB0cl90IHtyZWd0eXBlfXtyZWdpZH1OX29mZiA9XG4iKQotICAgICAgICAgICAg
ICAgIGYud3JpdGUoIiAgICAgICAgIGN0eF9mdXR1cmVfdnJlZ19vZmYoY3R4LCAiIGYie3JlZ3R5
cGV9e3JlZ2lkfU5fbnVtLCIpCi0gICAgICAgICAgICAgICAgZi53cml0ZSgiIDEsIHRydWUpO1xu
IikKLSAgICAgICAgICAgIGVsc2U6Ci0gICAgICAgICAgICAgICAgZi53cml0ZSgKLSAgICAgICAg
ICAgICAgICAgICAgZiIgICAgVENHdiB7cmVndHlwZX17cmVnaWR9TiA9ICIKLSAgICAgICAgICAg
ICAgICAgICAgZiJ0Y2dfY29uc3RhbnRfdGwoe3JlZ3R5cGV9e3JlZ2lkfU5fbnVtKTtcbiIKLSAg
ICAgICAgICAgICAgICApCi0gICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBoZXhfY29tbW9uLmJh
ZF9yZWdpc3RlcihyZWd0eXBlLCByZWdpZCkKLSAgICBlbHNlOgotICAgICAgICBoZXhfY29tbW9u
LmJhZF9yZWdpc3RlcihyZWd0eXBlLCByZWdpZCkKLQotCi1kZWYgZ2VucHRyX2RlY2xfb3BuKGYs
IHRhZywgcmVndHlwZSwgcmVnaWQsIGkpOgotICAgIGlmIGhleF9jb21tb24uaXNfcGFpcihyZWdp
ZCk6Ci0gICAgICAgIGdlbnB0cl9kZWNsKGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIGkpCi0gICAg
ZWxpZiBoZXhfY29tbW9uLmlzX3NpbmdsZShyZWdpZCk6Ci0gICAgICAgIGlmIGhleF9jb21tb24u
aXNfb2xkX3ZhbChyZWd0eXBlLCByZWdpZCwgdGFnKToKLSAgICAgICAgICAgIGdlbnB0cl9kZWNs
KGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIGkpCi0gICAgICAgIGVsaWYgaGV4X2NvbW1vbi5pc19u
ZXdfdmFsKHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgotICAgICAgICAgICAgZ2VucHRyX2RlY2xfbmV3
KGYsIHRhZywgcmVndHlwZSwgcmVnaWQsIGkpCi0gICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBo
ZXhfY29tbW9uLmJhZF9yZWdpc3RlcihyZWd0eXBlLCByZWdpZCkKLSAgICBlbHNlOgotICAgICAg
ICBoZXhfY29tbW9uLmJhZF9yZWdpc3RlcihyZWd0eXBlLCByZWdpZCkKLQotCi1kZWYgZ2VucHRy
X2RlY2xfaW1tKGYsIGltbWxldHQpOgotICAgIGlmIGltbWxldHQuaXN1cHBlcigpOgotICAgICAg
ICBpID0gMQotICAgIGVsc2U6Ci0gICAgICAgIGkgPSAwCi0gICAgZi53cml0ZShmIiAgICBpbnQg
e2hleF9jb21tb24uaW1tX25hbWUoaW1tbGV0dCl9ID0gaW5zbi0+aW1tZWRbe2l9XTtcbiIpCi0K
LQotZGVmIGdlbnB0cl9zcmNfcmVhZChmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkKToKLSAgICBpZiBy
ZWd0eXBlID09ICJSIjoKLSAgICAgICAgaWYgcmVnaWQgaW4geyJzcyIsICJ0dCIsICJ4eCIsICJ5
eSJ9OgotICAgICAgICAgICAgZi53cml0ZSgKLSAgICAgICAgICAgICAgICBmIiAgICB0Y2dfZ2Vu
X2NvbmNhdF9pMzJfaTY0KHtyZWd0eXBlfXtyZWdpZH1WLCAiCi0gICAgICAgICAgICAgICAgZiJo
ZXhfZ3ByW3tyZWd0eXBlfXtyZWdpZH1OXSxcbiIKLSAgICAgICAgICAgICkKLSAgICAgICAgICAg
IGYud3JpdGUoCi0gICAgICAgICAgICAgICAgZiIgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBoZXhfZ3ByW3tyZWd0eXBlfSIKLSAgICAgICAgICAgICAgICBmIntyZWdpZH1OICsgMV0p
O1xuIgotICAgICAgICAgICAgKQotICAgICAgICBlbGlmIHJlZ2lkIGluIHsieCIsICJ5In06Ci0g
ICAgICAgICAgICAjIyBGb3IgcmVhZC93cml0ZSByZWdpc3RlcnMsIHdlIG5lZWQgdG8gZ2V0IHRo
ZSBvcmlnaW5hbCB2YWx1ZSBpbnRvCi0gICAgICAgICAgICAjIyB0aGUgcmVzdWx0IFRDR3YuICBG
b3IgY29uZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zLCB0aGlzIGlzIGRvbmUgaW4KLSAgICAgICAgICAg
ICMjIGdlbl9zdGFydF9wYWNrZXQuICBGb3IgdW5jb25kaXRpb25hbCBpbnN0cnVjdGlvbnMsIHdl
IGRvIGl0IGhlcmUuCi0gICAgICAgICAgICBpZiAiQV9DT05ERVhFQyIgbm90IGluIGhleF9jb21t
b24uYXR0cmliZGljdFt0YWddOgotICAgICAgICAgICAgICAgIGYud3JpdGUoCi0gICAgICAgICAg
ICAgICAgICAgIGYiICAgIHRjZ19nZW5fbW92X3RsKHtyZWd0eXBlfXtyZWdpZH1WLCAiCi0gICAg
ICAgICAgICAgICAgICAgIGYiaGV4X2dwclt7cmVndHlwZX17cmVnaWR9Tl0pO1xuIgotICAgICAg
ICAgICAgICAgICkKLSAgICAgICAgZWxpZiByZWdpZCBub3QgaW4geyJzIiwgInQiLCAidSIsICJ2
In06Ci0gICAgICAgICAgICBoZXhfY29tbW9uLmJhZF9yZWdpc3RlcihyZWd0eXBlLCByZWdpZCkK
LSAgICBlbGlmIHJlZ3R5cGUgPT0gIlAiOgotICAgICAgICBpZiByZWdpZCA9PSAieCI6Ci0gICAg
ICAgICAgICBmLndyaXRlKAotICAgICAgICAgICAgICAgIGYiICAgIHRjZ19nZW5fbW92X3RsKHty
ZWd0eXBlfXtyZWdpZH1WLCAiCi0gICAgICAgICAgICAgICAgZiJoZXhfcHJlZFt7cmVndHlwZX17
cmVnaWR9Tl0pO1xuIgotICAgICAgICAgICAgKQotICAgICAgICBlbGlmIHJlZ2lkIG5vdCBpbiB7
InMiLCAidCIsICJ1IiwgInYifToKLSAgICAgICAgICAgIGhleF9jb21tb24uYmFkX3JlZ2lzdGVy
KHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVsaWYgcmVndHlwZSA9PSAiQyI6Ci0gICAgICAgIGlmIHJl
Z2lkID09ICJzcyI6Ci0gICAgICAgICAgICBmLndyaXRlKAotICAgICAgICAgICAgICAgIGYiICAg
IGdlbl9yZWFkX2N0cmxfcmVnX3BhaXIoY3R4LCB7cmVndHlwZX17cmVnaWR9TiwgIgotICAgICAg
ICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfVYpO1xuIgotICAgICAgICAgICAgKQotICAgICAg
ICBlbGlmIHJlZ2lkID09ICJzIjoKLSAgICAgICAgICAgIGYud3JpdGUoCi0gICAgICAgICAgICAg
ICAgZiIgICAgZ2VuX3JlYWRfY3RybF9yZWcoY3R4LCB7cmVndHlwZX17cmVnaWR9TiwgIgotICAg
ICAgICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfVYpO1xuIgotICAgICAgICAgICAgKQotICAg
ICAgICBlbHNlOgotICAgICAgICAgICAgaGV4X2NvbW1vbi5iYWRfcmVnaXN0ZXIocmVndHlwZSwg
cmVnaWQpCi0gICAgZWxpZiByZWd0eXBlID09ICJNIjoKLSAgICAgICAgaWYgcmVnaWQgIT0gInUi
OgotICAgICAgICAgICAgaGV4X2NvbW1vbi5iYWRfcmVnaXN0ZXIocmVndHlwZSwgcmVnaWQpCi0g
ICAgZWxpZiByZWd0eXBlID09ICJWIjoKLSAgICAgICAgaWYgcmVnaWQgaW4geyJ1dSIsICJ2diIs
ICJ4eCJ9OgotICAgICAgICAgICAgZi53cml0ZShmIiAgICB0Y2dfZ2VuX2d2ZWNfbW92KE1PXzY0
LCB7cmVndHlwZX17cmVnaWR9Vl9vZmYsXG4iKQotICAgICAgICAgICAgZi53cml0ZShmIiAgICAg
ICAgdnJlZ19zcmNfb2ZmKGN0eCwge3JlZ3R5cGV9e3JlZ2lkfU4pLFxuIikKLSAgICAgICAgICAg
IGYud3JpdGUoIiAgICAgICAgc2l6ZW9mKE1NVmVjdG9yKSwgc2l6ZW9mKE1NVmVjdG9yKSk7XG4i
KQotICAgICAgICAgICAgZi53cml0ZSgiICAgIHRjZ19nZW5fZ3ZlY19tb3YoTU9fNjQsXG4iKQot
ICAgICAgICAgICAgZi53cml0ZShmIiAgICAgICAge3JlZ3R5cGV9e3JlZ2lkfVZfb2ZmICsgc2l6
ZW9mKE1NVmVjdG9yKSxcbiIpCi0gICAgICAgICAgICBmLndyaXRlKGYiICAgICAgICB2cmVnX3Ny
Y19vZmYoY3R4LCB7cmVndHlwZX17cmVnaWR9TiBeIDEpLFxuIikKLSAgICAgICAgICAgIGYud3Jp
dGUoIiAgICAgICAgc2l6ZW9mKE1NVmVjdG9yKSwgc2l6ZW9mKE1NVmVjdG9yKSk7XG4iKQotICAg
ICAgICBlbGlmIHJlZ2lkIGluIHsicyIsICJ1IiwgInYiLCAidyJ9OgotICAgICAgICAgICAgaWYg
bm90IGhleF9jb21tb24uc2tpcF9xZW11X2hlbHBlcih0YWcpOgotICAgICAgICAgICAgICAgIGYu
d3JpdGUoCi0gICAgICAgICAgICAgICAgICAgIGYiICAgIHRjZ19nZW5fYWRkaV9wdHIoe3JlZ3R5
cGV9e3JlZ2lkfVYsIHRjZ19lbnYsICIKLSAgICAgICAgICAgICAgICAgICAgZiJ7cmVndHlwZX17
cmVnaWR9Vl9vZmYpO1xuIgotICAgICAgICAgICAgICAgICkKLSAgICAgICAgZWxpZiByZWdpZCBp
biB7IngiLCAieSJ9OgotICAgICAgICAgICAgZi53cml0ZShmIiAgICB0Y2dfZ2VuX2d2ZWNfbW92
KE1PXzY0LCB7cmVndHlwZX17cmVnaWR9Vl9vZmYsXG4iKQotICAgICAgICAgICAgZi53cml0ZShm
IiAgICAgICAgdnJlZ19zcmNfb2ZmKGN0eCwge3JlZ3R5cGV9e3JlZ2lkfU4pLFxuIikKLSAgICAg
ICAgICAgIGYud3JpdGUoIiAgICAgICAgc2l6ZW9mKE1NVmVjdG9yKSwgc2l6ZW9mKE1NVmVjdG9y
KSk7XG4iKQotICAgICAgICBlbHNlOgotICAgICAgICAgICAgaGV4X2NvbW1vbi5iYWRfcmVnaXN0
ZXIocmVndHlwZSwgcmVnaWQpCi0gICAgZWxpZiByZWd0eXBlID09ICJRIjoKLSAgICAgICAgaWYg
cmVnaWQgaW4geyJzIiwgInQiLCAidSIsICJ2In06Ci0gICAgICAgICAgICBpZiBub3QgaGV4X2Nv
bW1vbi5za2lwX3FlbXVfaGVscGVyKHRhZyk6Ci0gICAgICAgICAgICAgICAgZi53cml0ZSgKLSAg
ICAgICAgICAgICAgICAgICAgZiIgICAgdGNnX2dlbl9hZGRpX3B0cih7cmVndHlwZX17cmVnaWR9
ViwgdGNnX2VudiwgIgotICAgICAgICAgICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1WX29m
Zik7XG4iCi0gICAgICAgICAgICAgICAgKQotICAgICAgICBlbGlmIHJlZ2lkIGluIHsieCJ9Ogot
ICAgICAgICAgICAgZi53cml0ZShmIiAgICB0Y2dfZ2VuX2d2ZWNfbW92KE1PXzY0LCB7cmVndHlw
ZX17cmVnaWR9Vl9vZmYsXG4iKQotICAgICAgICAgICAgZi53cml0ZSgKLSAgICAgICAgICAgICAg
ICBmIiAgICAgICAgb2Zmc2V0b2YoQ1BVSGV4YWdvblN0YXRlLCAiIGYiUVJlZ3Nbe3JlZ3R5cGV9
e3JlZ2lkfU5dKSxcbiIKLSAgICAgICAgICAgICkKLSAgICAgICAgICAgIGYud3JpdGUoIiAgICAg
ICAgc2l6ZW9mKE1NUVJlZyksIHNpemVvZihNTVFSZWcpKTtcbiIpCi0gICAgICAgIGVsc2U6Ci0g
ICAgICAgICAgICBoZXhfY29tbW9uLmJhZF9yZWdpc3RlcihyZWd0eXBlLCByZWdpZCkKLSAgICBl
bHNlOgotICAgICAgICBoZXhfY29tbW9uLmJhZF9yZWdpc3RlcihyZWd0eXBlLCByZWdpZCkKLQot
Ci1kZWYgZ2VucHRyX3NyY19yZWFkX25ldyhmLCByZWd0eXBlLCByZWdpZCk6Ci0gICAgaWYgcmVn
dHlwZSA9PSAiTiI6Ci0gICAgICAgIGlmIHJlZ2lkIG5vdCBpbiB7InMiLCAidCJ9OgotICAgICAg
ICAgICAgaGV4X2NvbW1vbi5iYWRfcmVnaXN0ZXIocmVndHlwZSwgcmVnaWQpCi0gICAgZWxpZiBy
ZWd0eXBlID09ICJQIjoKLSAgICAgICAgaWYgcmVnaWQgbm90IGluIHsidCIsICJ1IiwgInYifToK
LSAgICAgICAgICAgIGhleF9jb21tb24uYmFkX3JlZ2lzdGVyKHJlZ3R5cGUsIHJlZ2lkKQotICAg
IGVsaWYgcmVndHlwZSA9PSAiTyI6Ci0gICAgICAgIGlmIHJlZ2lkICE9ICJzIjoKLSAgICAgICAg
ICAgIGhleF9jb21tb24uYmFkX3JlZ2lzdGVyKHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVsc2U6Ci0g
ICAgICAgIGhleF9jb21tb24uYmFkX3JlZ2lzdGVyKHJlZ3R5cGUsIHJlZ2lkKQotCi0KLWRlZiBn
ZW5wdHJfc3JjX3JlYWRfb3BuKGYsIHJlZ3R5cGUsIHJlZ2lkLCB0YWcpOgotICAgIGlmIGhleF9j
b21tb24uaXNfcGFpcihyZWdpZCk6Ci0gICAgICAgIGdlbnB0cl9zcmNfcmVhZChmLCB0YWcsIHJl
Z3R5cGUsIHJlZ2lkKQotICAgIGVsaWYgaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpOgotICAg
ICAgICBpZiBoZXhfY29tbW9uLmlzX29sZF92YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6Ci0gICAg
ICAgICAgICBnZW5wdHJfc3JjX3JlYWQoZiwgdGFnLCByZWd0eXBlLCByZWdpZCkKLSAgICAgICAg
ZWxpZiBoZXhfY29tbW9uLmlzX25ld192YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6Ci0gICAgICAg
ICAgICBnZW5wdHJfc3JjX3JlYWRfbmV3KGYsIHJlZ3R5cGUsIHJlZ2lkKQotICAgICAgICBlbHNl
OgotICAgICAgICAgICAgaGV4X2NvbW1vbi5iYWRfcmVnaXN0ZXIocmVndHlwZSwgcmVnaWQpCi0g
ICAgZWxzZToKLSAgICAgICAgaGV4X2NvbW1vbi5iYWRfcmVnaXN0ZXIocmVndHlwZSwgcmVnaWQp
Ci0KLQotZGVmIGdlbl9oZWxwZXJfY2FsbF9vcG4oZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgaSk6
Ci0gICAgaWYgaSA+IDA6Ci0gICAgICAgIGYud3JpdGUoIiwgIikKLSAgICBpZiBoZXhfY29tbW9u
LmlzX3BhaXIocmVnaWQpOgotICAgICAgICBmLndyaXRlKGYie3JlZ3R5cGV9e3JlZ2lkfVYiKQot
ICAgIGVsaWYgaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpOgotICAgICAgICBpZiBoZXhfY29t
bW9uLmlzX29sZF92YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6Ci0gICAgICAgICAgICBmLndyaXRl
KGYie3JlZ3R5cGV9e3JlZ2lkfVYiKQotICAgICAgICBlbGlmIGhleF9jb21tb24uaXNfbmV3X3Zh
bChyZWd0eXBlLCByZWdpZCwgdGFnKToKLSAgICAgICAgICAgIGYud3JpdGUoZiJ7cmVndHlwZX17
cmVnaWR9TiIpCi0gICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBoZXhfY29tbW9uLmJhZF9yZWdp
c3RlcihyZWd0eXBlLCByZWdpZCkKLSAgICBlbHNlOgotICAgICAgICBoZXhfY29tbW9uLmJhZF9y
ZWdpc3RlcihyZWd0eXBlLCByZWdpZCkKLQotCi1kZWYgZ2VuX2hlbHBlcl9kZWNsX2ltbShmLCBp
bW1sZXR0KToKLSAgICBmLndyaXRlKAotICAgICAgICBmIiAgICBUQ0d2IHRjZ3Zfe2hleF9jb21t
b24uaW1tX25hbWUoaW1tbGV0dCl9ID0gIgotICAgICAgICBmInRjZ19jb25zdGFudF90bCh7aGV4
X2NvbW1vbi5pbW1fbmFtZShpbW1sZXR0KX0pO1xuIgotICAgICkKLQotCi1kZWYgZ2VuX2hlbHBl
cl9jYWxsX2ltbShmLCBpbW1sZXR0KToKLSAgICBmLndyaXRlKGYiLCB0Y2d2X3toZXhfY29tbW9u
LmltbV9uYW1lKGltbWxldHQpfSIpCi0KLQotZGVmIGdlbnB0cl9kc3Rfd3JpdGVfcGFpcihmLCB0
YWcsIHJlZ3R5cGUsIHJlZ2lkKToKLSAgICBmLndyaXRlKGYiICAgIGdlbl9sb2dfcmVnX3dyaXRl
X3BhaXIoY3R4LCB7cmVndHlwZX17cmVnaWR9TiwgIgotICAgICAgICAgICAgZiJ7cmVndHlwZX17
cmVnaWR9Vik7XG4iKQotCi0KLWRlZiBnZW5wdHJfZHN0X3dyaXRlKGYsIHRhZywgcmVndHlwZSwg
cmVnaWQpOgotICAgIGlmIHJlZ3R5cGUgPT0gIlIiOgotICAgICAgICBpZiByZWdpZCBpbiB7ImRk
IiwgInh4IiwgInl5In06Ci0gICAgICAgICAgICBnZW5wdHJfZHN0X3dyaXRlX3BhaXIoZiwgdGFn
LCByZWd0eXBlLCByZWdpZCkKLSAgICAgICAgZWxpZiByZWdpZCBpbiB7ImQiLCAiZSIsICJ4Iiwg
InkifToKLSAgICAgICAgICAgIGYud3JpdGUoCi0gICAgICAgICAgICAgICAgZiIgICAgZ2VuX2xv
Z19yZWdfd3JpdGUoY3R4LCB7cmVndHlwZX17cmVnaWR9TiwgIgotICAgICAgICAgICAgICAgIGYi
e3JlZ3R5cGV9e3JlZ2lkfVYpO1xuIgotICAgICAgICAgICAgKQotICAgICAgICBlbHNlOgotICAg
ICAgICAgICAgaGV4X2NvbW1vbi5iYWRfcmVnaXN0ZXIocmVndHlwZSwgcmVnaWQpCi0gICAgZWxp
ZiByZWd0eXBlID09ICJQIjoKLSAgICAgICAgaWYgcmVnaWQgaW4geyJkIiwgImUiLCAieCJ9Ogot
ICAgICAgICAgICAgZi53cml0ZSgKLSAgICAgICAgICAgICAgICBmIiAgICBnZW5fbG9nX3ByZWRf
d3JpdGUoY3R4LCB7cmVndHlwZX17cmVnaWR9TiwgIgotICAgICAgICAgICAgICAgIGYie3JlZ3R5
cGV9e3JlZ2lkfVYpO1xuIgotICAgICAgICAgICAgKQotICAgICAgICBlbHNlOgotICAgICAgICAg
ICAgaGV4X2NvbW1vbi5iYWRfcmVnaXN0ZXIocmVndHlwZSwgcmVnaWQpCi0gICAgZWxpZiByZWd0
eXBlID09ICJDIjoKLSAgICAgICAgaWYgcmVnaWQgPT0gImRkIjoKLSAgICAgICAgICAgIGYud3Jp
dGUoCi0gICAgICAgICAgICAgICAgZiIgICAgZ2VuX3dyaXRlX2N0cmxfcmVnX3BhaXIoY3R4LCB7
cmVndHlwZX17cmVnaWR9TiwgIgotICAgICAgICAgICAgICAgIGYie3JlZ3R5cGV9e3JlZ2lkfVYp
O1xuIgotICAgICAgICAgICAgKQotICAgICAgICBlbGlmIHJlZ2lkID09ICJkIjoKLSAgICAgICAg
ICAgIGYud3JpdGUoCi0gICAgICAgICAgICAgICAgZiIgICAgZ2VuX3dyaXRlX2N0cmxfcmVnKGN0
eCwge3JlZ3R5cGV9e3JlZ2lkfU4sICIKLSAgICAgICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdp
ZH1WKTtcbiIKLSAgICAgICAgICAgICkKLSAgICAgICAgZWxzZToKLSAgICAgICAgICAgIGhleF9j
b21tb24uYmFkX3JlZ2lzdGVyKHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVsc2U6Ci0gICAgICAgIGhl
eF9jb21tb24uYmFkX3JlZ2lzdGVyKHJlZ3R5cGUsIHJlZ2lkKQotCi0KLWRlZiBnZW5wdHJfZHN0
X3dyaXRlX2V4dChmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lkLCBuZXd2PSJFWFRfREZMIik6Ci0gICAg
aWYgcmVndHlwZSA9PSAiViI6Ci0gICAgICAgIGlmIHJlZ2lkIGluIHsieHgifToKLSAgICAgICAg
ICAgIGYud3JpdGUoCi0gICAgICAgICAgICAgICAgZiIgICAgZ2VuX2xvZ192cmVnX3dyaXRlX3Bh
aXIoY3R4LCB7cmVndHlwZX17cmVnaWR9Vl9vZmYsICIKLSAgICAgICAgICAgICAgICBmIntyZWd0
eXBlfXtyZWdpZH1OLCB7bmV3dn0pO1xuIgotICAgICAgICAgICAgKQotICAgICAgICBlbGlmIHJl
Z2lkIGluIHsieSJ9OgotICAgICAgICAgICAgZi53cml0ZSgKLSAgICAgICAgICAgICAgICBmIiAg
ICBnZW5fbG9nX3ZyZWdfd3JpdGUoY3R4LCB7cmVndHlwZX17cmVnaWR9Vl9vZmYsICIKLSAgICAg
ICAgICAgICAgICBmIntyZWd0eXBlfXtyZWdpZH1OLCB7bmV3dn0pO1xuIgotICAgICAgICAgICAg
KQotICAgICAgICBlbGlmIHJlZ2lkIG5vdCBpbiB7ImRkIiwgImQiLCAieCJ9OgotICAgICAgICAg
ICAgaGV4X2NvbW1vbi5iYWRfcmVnaXN0ZXIocmVndHlwZSwgcmVnaWQpCi0gICAgZWxpZiByZWd0
eXBlID09ICJRIjoKLSAgICAgICAgaWYgcmVnaWQgbm90IGluIHsiZCIsICJlIiwgIngifToKLSAg
ICAgICAgICAgIGhleF9jb21tb24uYmFkX3JlZ2lzdGVyKHJlZ3R5cGUsIHJlZ2lkKQotICAgIGVs
c2U6Ci0gICAgICAgIGhleF9jb21tb24uYmFkX3JlZ2lzdGVyKHJlZ3R5cGUsIHJlZ2lkKQotCi0K
LWRlZiBnZW5wdHJfZHN0X3dyaXRlX29wbihmLCByZWd0eXBlLCByZWdpZCwgdGFnKToKLSAgICBp
ZiBoZXhfY29tbW9uLmlzX3BhaXIocmVnaWQpOgotICAgICAgICBpZiBoZXhfY29tbW9uLmlzX2h2
eF9yZWcocmVndHlwZSk6Ci0gICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3RtcF9yZXN1bHQo
dGFnKToKLSAgICAgICAgICAgICAgICBnZW5wdHJfZHN0X3dyaXRlX2V4dChmLCB0YWcsIHJlZ3R5
cGUsIHJlZ2lkLCAiRVhUX1RNUCIpCi0gICAgICAgICAgICBlbHNlOgotICAgICAgICAgICAgICAg
IGdlbnB0cl9kc3Rfd3JpdGVfZXh0KGYsIHRhZywgcmVndHlwZSwgcmVnaWQpCi0gICAgICAgIGVs
c2U6Ci0gICAgICAgICAgICBnZW5wdHJfZHN0X3dyaXRlKGYsIHRhZywgcmVndHlwZSwgcmVnaWQp
Ci0gICAgZWxpZiBoZXhfY29tbW9uLmlzX3NpbmdsZShyZWdpZCk6Ci0gICAgICAgIGlmIGhleF9j
b21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKToKLSAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNf
bmV3X3Jlc3VsdCh0YWcpOgotICAgICAgICAgICAgICAgIGdlbnB0cl9kc3Rfd3JpdGVfZXh0KGYs
IHRhZywgcmVndHlwZSwgcmVnaWQsICJFWFRfTkVXIikKLSAgICAgICAgICAgIGVsaWYgaGV4X2Nv
bW1vbi5pc190bXBfcmVzdWx0KHRhZyk6Ci0gICAgICAgICAgICAgICAgZ2VucHRyX2RzdF93cml0
ZV9leHQoZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgIkVYVF9UTVAiKQotICAgICAgICAgICAgZWxz
ZToKLSAgICAgICAgICAgICAgICBnZW5wdHJfZHN0X3dyaXRlX2V4dChmLCB0YWcsIHJlZ3R5cGUs
IHJlZ2lkLCAiRVhUX0RGTCIpCi0gICAgICAgIGVsc2U6Ci0gICAgICAgICAgICBnZW5wdHJfZHN0
X3dyaXRlKGYsIHRhZywgcmVndHlwZSwgcmVnaWQpCi0gICAgZWxzZToKLSAgICAgICAgaGV4X2Nv
bW1vbi5iYWRfcmVnaXN0ZXIocmVndHlwZSwgcmVnaWQpCi0KLQogIyMKICMjIEdlbmVyYXRlIHRo
ZSBUQ0cgY29kZSB0byBjYWxsIHRoZSBoZWxwZXIKICMjICAgICBGb3IgQTJfYWRkOiBSZDMyPWFk
ZChSczMyLFJ0MzIpLCB7IFJkVj1Sc1YrUnRWO30KICMjICAgICBXZSBwcm9kdWNlOgogIyMgICAg
c3RhdGljIHZvaWQgZ2VuZXJhdGVfQTJfYWRkKERpc2FzQ29udGV4dCAqY3R4KQogIyMgICAgewot
IyMgICAgICAgIEluc24gKmluc24gX19hdHRyaWJ1dGVfXygodW51c2VkKSkgPSBjdHgtPmluc247
CisjIyAgICAgICAgSW5zbiAqaW5zbiBHX0dOVUNfVU5VU0VEID0gY3R4LT5pbnNuOwogIyMgICAg
ICAgIGNvbnN0IGludCBSZE4gPSBpbnNuLT5yZWdub1swXTsKICMjICAgICAgICBUQ0d2IFJkViA9
IGdldF9yZXN1bHRfZ3ByKGN0eCwgUmROKTsKICMjICAgICAgICBUQ0d2IFJzViA9IGhleF9ncHJb
aW5zbi0+cmVnbm9bMV1dOwpAQCAtNTAxLDQ0ICs0OCwyNyBAQCBkZWYgZ2VuX3RjZ19mdW5jKGYs
IHRhZywgcmVncywgaW1tcyk6CiAgICAgZi53cml0ZShmInN0YXRpYyB2b2lkIGdlbmVyYXRlX3t0
YWd9KERpc2FzQ29udGV4dCAqY3R4KVxuIikKICAgICBmLndyaXRlKCJ7XG4iKQogCi0gICAgZi53
cml0ZSgiICAgIEluc24gKmluc24gX19hdHRyaWJ1dGVfXygodW51c2VkKSkgPSBjdHgtPmluc247
XG4iKQorICAgIGYud3JpdGUoIiAgICBJbnNuICppbnNuIEdfR05VQ19VTlVTRUQgPSBjdHgtPmlu
c247XG4iKQogCiAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX2VhKHRhZyk6Ci0gICAgICAgIGdlbl9k
ZWNsX2VhX3RjZyhmLCB0YWcpCi0gICAgaSA9IDAKKyAgICAgICAgZi53cml0ZSgiICAgIFRDR3Yg
RUEgR19HTlVDX1VOVVNFRCA9IHRjZ190ZW1wX25ldygpO1xuIikKKwogICAgICMjIERlY2xhcmUg
YWxsIHRoZSBvcGVyYW5kcyAocmVncyBhbmQgaW1tZWRpYXRlcykKKyAgICBpID0gMAogICAgIGZv
ciByZWd0eXBlLCByZWdpZCBpbiByZWdzOgotICAgICAgICBnZW5wdHJfZGVjbF9vcG4oZiwgdGFn
LCByZWd0eXBlLCByZWdpZCwgaSkKKyAgICAgICAgcmVnID0gaGV4X2NvbW1vbi5nZXRfcmVnaXN0
ZXIodGFnLCByZWd0eXBlLCByZWdpZCkKKyAgICAgICAgcmVnLmRlY2xfdGNnKGYsIHRhZywgaSkK
ICAgICAgICAgaSArPSAxCiAgICAgZm9yIGltbWxldHQsIGJpdHMsIGltbXNoaWZ0IGluIGltbXM6
Ci0gICAgICAgIGdlbnB0cl9kZWNsX2ltbShmLCBpbW1sZXR0KQotCi0gICAgaWYgIkFfUFJJViIg
aW4gaGV4X2NvbW1vbi5hdHRyaWJkaWN0W3RhZ106Ci0gICAgICAgIGYud3JpdGUoIiAgICBmQ0hF
Q0tGT1JQUklWKCk7XG4iKQotICAgIGlmICJBX0dVRVNUIiBpbiBoZXhfY29tbW9uLmF0dHJpYmRp
Y3RbdGFnXToKLSAgICAgICAgZi53cml0ZSgiICAgIGZDSEVDS0ZPUkdVRVNUKCk7XG4iKQotCi0g
ICAgIyMgUmVhZCBhbGwgdGhlIGlucHV0cwotICAgIGZvciByZWd0eXBlLCByZWdpZCBpbiByZWdz
OgotICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3JlYWQocmVnaWQpOgotICAgICAgICAgICAgZ2Vu
cHRyX3NyY19yZWFkX29wbihmLCByZWd0eXBlLCByZWdpZCwgdGFnKQorICAgICAgICBpID0gMSBp
ZiBpbW1sZXR0LmlzdXBwZXIoKSBlbHNlIDAKKyAgICAgICAgZi53cml0ZShmIiAgICBpbnQge2hl
eF9jb21tb24uaW1tX25hbWUoaW1tbGV0dCl9ID0gaW5zbi0+aW1tZWRbe2l9XTtcbiIpCiAKICAg
ICBpZiBoZXhfY29tbW9uLmlzX2lkZWZfcGFyc2VyX2VuYWJsZWQodGFnKToKICAgICAgICAgZGVj
bGFyZWQgPSBbXQogICAgICAgICAjIyBIYW5kbGUgcmVnaXN0ZXJzCiAgICAgICAgIGZvciByZWd0
eXBlLCByZWdpZCBpbiByZWdzOgotICAgICAgICAgICAgaWYgaGV4X2NvbW1vbi5pc19wYWlyKHJl
Z2lkKSBvciAoCi0gICAgICAgICAgICAgICAgaGV4X2NvbW1vbi5pc19zaW5nbGUocmVnaWQpCi0g
ICAgICAgICAgICAgICAgYW5kIGhleF9jb21tb24uaXNfb2xkX3ZhbChyZWd0eXBlLCByZWdpZCwg
dGFnKQotICAgICAgICAgICAgKToKLSAgICAgICAgICAgICAgICBkZWNsYXJlZC5hcHBlbmQoZiJ7
cmVndHlwZX17cmVnaWR9ViIpCi0gICAgICAgICAgICAgICAgaWYgcmVndHlwZSA9PSAiTSI6Ci0g
ICAgICAgICAgICAgICAgICAgIGRlY2xhcmVkLmFwcGVuZCgiQ1MiKQotICAgICAgICAgICAgZWxp
ZiBoZXhfY29tbW9uLmlzX25ld192YWwocmVndHlwZSwgcmVnaWQsIHRhZyk6Ci0gICAgICAgICAg
ICAgICAgZGVjbGFyZWQuYXBwZW5kKGYie3JlZ3R5cGV9e3JlZ2lkfU4iKQotICAgICAgICAgICAg
ZWxzZToKLSAgICAgICAgICAgICAgICBoZXhfY29tbW9uLmJhZF9yZWdpc3RlcihyZWd0eXBlLCBy
ZWdpZCkKLQorICAgICAgICAgICAgcmVnID0gaGV4X2NvbW1vbi5nZXRfcmVnaXN0ZXIodGFnLCBy
ZWd0eXBlLCByZWdpZCkKKyAgICAgICAgICAgIHJlZy5pZGVmX2FyZyhkZWNsYXJlZCkKICAgICAg
ICAgIyMgSGFuZGxlIGltbWVkaWF0ZXMKICAgICAgICAgZm9yIGltbWxldHQsIGJpdHMsIGltbXNo
aWZ0IGluIGltbXM6CiAgICAgICAgICAgICBkZWNsYXJlZC5hcHBlbmQoaGV4X2NvbW1vbi5pbW1f
bmFtZShpbW1sZXR0KSkKQEAgLTU1MCw3NiArODAsMjIgQEAgZGVmIGdlbl90Y2dfZnVuYyhmLCB0
YWcsIHJlZ3MsIGltbXMpOgogICAgICAgICBmLndyaXRlKGYiICAgIGZHRU5fVENHX3t0YWd9KHto
ZXhfY29tbW9uLnNlbWRpY3RbdGFnXX0pO1xuIikKICAgICBlbHNlOgogICAgICAgICAjIyBHZW5l
cmF0ZSB0aGUgY2FsbCB0byB0aGUgaGVscGVyCi0gICAgICAgIGZvciBpbW1sZXR0LCBiaXRzLCBp
bW1zaGlmdCBpbiBpbW1zOgotICAgICAgICAgICAgZ2VuX2hlbHBlcl9kZWNsX2ltbShmLCBpbW1s
ZXR0KQotICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFnKToK
LSAgICAgICAgICAgIGYud3JpdGUoIiAgICBUQ0d2IHBrdF9oYXNfbXVsdGlfY29mID0gIikKLSAg
ICAgICAgICAgIGYud3JpdGUoInRjZ19jb25zdGFudF90bChjdHgtPnBrdC0+cGt0X2hhc19tdWx0
aV9jb2YpO1xuIikKLSAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3BrdF9uZWVkX2NvbW1pdCh0
YWcpOgotICAgICAgICAgICAgZi53cml0ZSgiICAgIFRDR3YgcGt0X25lZWRfY29tbWl0ID0gIikK
LSAgICAgICAgICAgIGYud3JpdGUoInRjZ19jb25zdGFudF90bChjdHgtPm5lZWRfY29tbWl0KTtc
biIpCi0gICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9wYXJ0MSh0YWcpOgotICAgICAgICAgICAg
Zi53cml0ZSgiICAgIFRDR3YgcGFydDEgPSB0Y2dfY29uc3RhbnRfdGwoaW5zbi0+cGFydDEpO1xu
IikKLSAgICAgICAgaWYgaGV4X2NvbW1vbi5uZWVkX3Nsb3QodGFnKToKLSAgICAgICAgICAgIGYu
d3JpdGUoIiAgICBUQ0d2IHNsb3R2YWwgPSBnZW5fc2xvdHZhbChjdHgpO1xuIikKLSAgICAgICAg
aWYgaGV4X2NvbW1vbi5uZWVkX1BDKHRhZyk6Ci0gICAgICAgICAgICBmLndyaXRlKCIgICAgVENH
diBQQyA9IHRjZ19jb25zdGFudF90bChjdHgtPnBrdC0+cGMpO1xuIikKLSAgICAgICAgaWYgaGV4
X2NvbW1vbi5oZWxwZXJfbmVlZHNfbmV4dF9QQyh0YWcpOgotICAgICAgICAgICAgZi53cml0ZSgi
ICAgIFRDR3YgbmV4dF9QQyA9IHRjZ19jb25zdGFudF90bChjdHgtPm5leHRfUEMpO1xuIikKLSAg
ICAgICAgZi53cml0ZShmIiAgICBnZW5faGVscGVyX3t0YWd9KCIpCi0gICAgICAgIGkgPSAwCi0g
ICAgICAgICMjIElmIHRoZXJlIGlzIGEgc2NhbGFyIHJlc3VsdCwgaXQgaXMgdGhlIHJldHVybiB0
eXBlCi0gICAgICAgIGZvciByZWd0eXBlLCByZWdpZCBpbiByZWdzOgotICAgICAgICAgICAgaWYg
aGV4X2NvbW1vbi5pc193cml0dGVuKHJlZ2lkKToKLSAgICAgICAgICAgICAgICBpZiBoZXhfY29t
bW9uLmlzX2h2eF9yZWcocmVndHlwZSk6Ci0gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCi0g
ICAgICAgICAgICAgICAgZ2VuX2hlbHBlcl9jYWxsX29wbihmLCB0YWcsIHJlZ3R5cGUsIHJlZ2lk
LCBpKQotICAgICAgICAgICAgICAgIGkgKz0gMQotICAgICAgICBpZiBpID4gMDoKLSAgICAgICAg
ICAgIGYud3JpdGUoIiwgIikKLSAgICAgICAgZi53cml0ZSgidGNnX2VudiIpCi0gICAgICAgIGkg
PSAxCi0gICAgICAgICMjIEZvciBjb25kaXRpb25hbCBpbnN0cnVjdGlvbnMsIHdlIHBhc3MgaW4g
dGhlIGRlc3RpbmF0aW9uIHJlZ2lzdGVyCi0gICAgICAgIGlmICJBX0NPTkRFWEVDIiBpbiBoZXhf
Y29tbW9uLmF0dHJpYmRpY3RbdGFnXToKLSAgICAgICAgICAgIGZvciByZWd0eXBlLCByZWdpZCBp
biByZWdzOgotICAgICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfd3JpdGVvbmx5KHJlZ2lk
KSBhbmQgbm90IGhleF9jb21tb24uaXNfaHZ4X3JlZygKLSAgICAgICAgICAgICAgICAgICAgcmVn
dHlwZQotICAgICAgICAgICAgICAgICk6Ci0gICAgICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJf
Y2FsbF9vcG4oZiwgdGFnLCByZWd0eXBlLCByZWdpZCwgaSkKLSAgICAgICAgICAgICAgICAgICAg
aSArPSAxCi0gICAgICAgIGZvciByZWd0eXBlLCByZWdpZCBpbiByZWdzOgotICAgICAgICAgICAg
aWYgaGV4X2NvbW1vbi5pc193cml0dGVuKHJlZ2lkKToKLSAgICAgICAgICAgICAgICBpZiBub3Qg
aGV4X2NvbW1vbi5pc19odnhfcmVnKHJlZ3R5cGUpOgotICAgICAgICAgICAgICAgICAgICBjb250
aW51ZQotICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfY2FsbF9vcG4oZiwgdGFnLCByZWd0eXBl
LCByZWdpZCwgaSkKLSAgICAgICAgICAgICAgICBpICs9IDEKLSAgICAgICAgZm9yIHJlZ3R5cGUs
IHJlZ2lkIGluIHJlZ3M6Ci0gICAgICAgICAgICBpZiBoZXhfY29tbW9uLmlzX3JlYWQocmVnaWQp
OgotICAgICAgICAgICAgICAgIGlmIGhleF9jb21tb24uaXNfaHZ4X3JlZyhyZWd0eXBlKSBhbmQg
aGV4X2NvbW1vbi5pc19yZWFkd3JpdGUocmVnaWQpOgotICAgICAgICAgICAgICAgICAgICBjb250
aW51ZQotICAgICAgICAgICAgICAgIGdlbl9oZWxwZXJfY2FsbF9vcG4oZiwgdGFnLCByZWd0eXBl
LCByZWdpZCwgaSkKLSAgICAgICAgICAgICAgICBpICs9IDEKLSAgICAgICAgZm9yIGltbWxldHQs
IGJpdHMsIGltbXNoaWZ0IGluIGltbXM6Ci0gICAgICAgICAgICBnZW5faGVscGVyX2NhbGxfaW1t
KGYsIGltbWxldHQpCisgICAgICAgIGRlY2xhcmVkID0gW10KKyAgICAgICAgcmV0X3R5cGUgPSBo
ZXhfY29tbW9uLmhlbHBlcl9yZXRfdHlwZSh0YWcsIHJlZ3MpLmNhbGxfYXJnCisgICAgICAgIGlm
IHJldF90eXBlICE9ICJ2b2lkIjoKKyAgICAgICAgICAgIGRlY2xhcmVkLmFwcGVuZChyZXRfdHlw
ZSkKIAotICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFnKToK
LSAgICAgICAgICAgIGYud3JpdGUoIiwgcGt0X2hhc19tdWx0aV9jb2YiKQotICAgICAgICBpZiBo
ZXhfY29tbW9uLm5lZWRfcGt0X25lZWRfY29tbWl0KHRhZyk6Ci0gICAgICAgICAgICBmLndyaXRl
KCIsIHBrdF9uZWVkX2NvbW1pdCIpCi0gICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9QQyh0YWcp
OgotICAgICAgICAgICAgZi53cml0ZSgiLCBQQyIpCi0gICAgICAgIGlmIGhleF9jb21tb24uaGVs
cGVyX25lZWRzX25leHRfUEModGFnKToKLSAgICAgICAgICAgIGYud3JpdGUoIiwgbmV4dF9QQyIp
Ci0gICAgICAgIGlmIGhleF9jb21tb24ubmVlZF9zbG90KHRhZyk6Ci0gICAgICAgICAgICBmLndy
aXRlKCIsIHNsb3R2YWwiKQotICAgICAgICBpZiBoZXhfY29tbW9uLm5lZWRfcGFydDEodGFnKToK
LSAgICAgICAgICAgIGYud3JpdGUoIiwgcGFydDEiKQotICAgICAgICBmLndyaXRlKCIpO1xuIikK
KyAgICAgICAgZm9yIGFyZyBpbiBoZXhfY29tbW9uLmhlbHBlcl9hcmdzKHRhZywgcmVncywgaW1t
cyk6CisgICAgICAgICAgICBkZWNsYXJlZC5hcHBlbmQoYXJnLmNhbGxfYXJnKQorCisgICAgICAg
IGFyZ3VtZW50cyA9ICIsICIuam9pbihkZWNsYXJlZCkKKyAgICAgICAgZi53cml0ZShmIiAgICBn
ZW5faGVscGVyX3t0YWd9KHthcmd1bWVudHN9KTtcbiIpCiAKICAgICAjIyBXcml0ZSBhbGwgdGhl
IG91dHB1dHMKICAgICBmb3IgcmVndHlwZSwgcmVnaWQgaW4gcmVnczoKLSAgICAgICAgaWYgaGV4
X2NvbW1vbi5pc193cml0dGVuKHJlZ2lkKToKLSAgICAgICAgICAgIGdlbnB0cl9kc3Rfd3JpdGVf
b3BuKGYsIHJlZ3R5cGUsIHJlZ2lkLCB0YWcpCisgICAgICAgIHJlZyA9IGhleF9jb21tb24uZ2V0
X3JlZ2lzdGVyKHRhZywgcmVndHlwZSwgcmVnaWQpCisgICAgICAgIGlmIHJlZy5pc193cml0dGVu
KCk6CisgICAgICAgICAgICByZWcubG9nX3dyaXRlKGYsIHRhZykKIAogICAgIGYud3JpdGUoIn1c
blxuIikKIApAQCAtNjM3LDYgKzExMyw3IEBAIGRlZiBtYWluKCk6CiAgICAgaGV4X2NvbW1vbi5y
ZWFkX292ZXJyaWRlc19maWxlKHN5cy5hcmd2WzNdKQogICAgIGhleF9jb21tb24ucmVhZF9vdmVy
cmlkZXNfZmlsZShzeXMuYXJndls0XSkKICAgICBoZXhfY29tbW9uLmNhbGN1bGF0ZV9hdHRyaWJz
KCkKKyAgICBoZXhfY29tbW9uLmluaXRfcmVnaXN0ZXJzKCkKICAgICAjIyBXaGV0aGVyIG9yIG5v
dCBpZGVmLXBhcnNlciBpcyBlbmFibGVkIGlzCiAgICAgIyMgZGV0ZXJtaW5lZCBieSB0aGUgbnVt
YmVyIG9mIGFyZ3VtZW50cyB0bwogICAgICMjIHRoaXMgc2NyaXB0OgpkaWZmIC0tZ2l0IGEvdGFy
Z2V0L2hleGFnb24vaGV4X2NvbW1vbi5weSBiL3RhcmdldC9oZXhhZ29uL2hleF9jb21tb24ucHkK
aW5kZXggMGRhNjVkNmRkNi4uOTc5ZjE5OGEzMCAxMDA3NTUKLS0tIGEvdGFyZ2V0L2hleGFnb24v
aGV4X2NvbW1vbi5weQorKysgYi90YXJnZXQvaGV4YWdvbi9oZXhfY29tbW9uLnB5CkBAIC0yMCwx
MiArMjAsMTUgQEAKIGltcG9ydCBzeXMKIGltcG9ydCByZQogaW1wb3J0IHN0cmluZworaW1wb3J0
IHRleHR3cmFwCiAKIGJlaGRpY3QgPSB7fSAgIyB0YWcgLT5iZWhhdmlvcgogc2VtZGljdCA9IHt9
ICAjIHRhZyAtPiBzZW1hbnRpY3MKIGF0dHJpYmRpY3QgPSB7fSAgIyB0YWcgLT4gYXR0cmlidXRl
cwogbWFjcm9zID0ge30gICMgbWFjcm8gLT4gbWFjcm8gaW5mb3JtYXRpb24uLi4KIGF0dHJpYmlu
Zm8gPSB7fSAgIyBSZWdpc3RlciBpbmZvcm1hdGlvbiBhbmQgbWlzYworcmVnaXN0ZXJzID0ge30g
ICMgcmVnaXN0ZXIgLT4gcmVnaXN0ZXIgZnVuY3Rpb25zCituZXdfcmVnaXN0ZXJzID0ge30KIHRh
Z3MgPSBbXSAgIyBsaXN0IG9mIGFsbCB0YWdzCiBvdmVycmlkZXMgPSB7fSAgIyB0YWdzIHdpdGgg
aGVscGVyIG92ZXJyaWRlcwogaWRlZl9wYXJzZXJfZW5hYmxlZCA9IHt9ICAjIHRhZ3MgZW5hYmxl
ZCBmb3IgaWRlZi1wYXJzZXIKQEAgLTI3Niw2ICsyNzksMTAgQEAgZGVmIGhlbHBlcl9uZWVkc19u
ZXh0X1BDKHRhZyk6CiAgICAgcmV0dXJuICJBX0NBTEwiIGluIGF0dHJpYmRpY3RbdGFnXQogCiAK
K2RlZiBuZWVkX25leHRfUEModGFnKToKKyAgICByZXR1cm4gIkFfQ0FMTCIgaW4gYXR0cmliZGlj
dFt0YWddCisKKwogZGVmIG5lZWRfcGt0X2hhc19tdWx0aV9jb2YodGFnKToKICAgICByZXR1cm4g
IkFfQ09GIiBpbiBhdHRyaWJkaWN0W3RhZ10KIApAQCAtMzUwLDMgKzM1Nyw2NTUgQEAgZGVmIHJl
YWRfaWRlZl9wYXJzZXJfZW5hYmxlZF9maWxlKG5hbWUpOgogICAgIHdpdGggb3BlbihuYW1lLCAi
ciIpIGFzIGlkZWZfcGFyc2VyX2VuYWJsZWRfZmlsZToKICAgICAgICAgbGluZXMgPSBpZGVmX3Bh
cnNlcl9lbmFibGVkX2ZpbGUucmVhZCgpLnN0cmlwKCkuc3BsaXQoIlxuIikKICAgICAgICAgaWRl
Zl9wYXJzZXJfZW5hYmxlZCA9IHNldChsaW5lcykKKworCitkZWYgaXNfcHJlZGljYXRlZCh0YWcp
OgorICAgIHJldHVybiAiQV9DT05ERVhFQyIgaW4gYXR0cmliZGljdFt0YWddCisKKworZGVmIGNv
ZGVfZm10KHR4dCk6CisgICAgcmV0dXJuIHRleHR3cmFwLmluZGVudCh0ZXh0d3JhcC5kZWRlbnQo
dHh0KSwgIiAgICAiKQorCisKK2RlZiBodnhfbmV3dih0YWcpOgorICAgIGlmICJBX0NWSV9ORVci
IGluIGF0dHJpYmRpY3RbdGFnXToKKyAgICAgICAgcmV0dXJuICJFWFRfTkVXIgorICAgIGVsaWYg
IkFfQ1ZJX1RNUCIgaW4gYXR0cmliZGljdFt0YWddIG9yICJBX0NWSV9UTVBfRFNUIiBpbiBhdHRy
aWJkaWN0W3RhZ106CisgICAgICAgIHJldHVybiAiRVhUX1RNUCIKKyAgICBlbHNlOgorICAgICAg
ICByZXR1cm4gIkVYVF9ERkwiCisKK2RlZiB2cmVnX29mZnNldF9mdW5jKHRhZyk6CisgICAgaWYg
IkFfQ1ZJX1RNUCIgaW4gYXR0cmliZGljdFt0YWddIG9yICJBX0NWSV9UTVBfRFNUIiBpbiBhdHRy
aWJkaWN0W3RhZ106CisgICAgICAgIHJldHVybiAiY3R4X3RtcF92cmVnX29mZiIKKyAgICBlbHNl
OgorICAgICAgICByZXR1cm4gImN0eF9mdXR1cmVfdnJlZ19vZmYiCisKK2NsYXNzIEhlbHBlckFy
ZzoKKyAgICBkZWYgX19pbml0X18oc2VsZiwgcHJvdG9fYXJnLCBjYWxsX2FyZywgZnVuY19hcmcp
OgorICAgICAgICBzZWxmLnByb3RvX2FyZyA9IHByb3RvX2FyZworICAgICAgICBzZWxmLmNhbGxf
YXJnID0gY2FsbF9hcmcKKyAgICAgICAgc2VsZi5mdW5jX2FyZyA9IGZ1bmNfYXJnCisKK2NsYXNz
IFJlZ2lzdGVyOgorICAgIGRlZiBfX2luaXRfXyhzZWxmLCByZWd0eXBlLCByZWdpZCk6CisgICAg
ICAgIHNlbGYucmVndHlwZSA9IHJlZ3R5cGUKKyAgICAgICAgc2VsZi5yZWdpZCA9IHJlZ2lkCisg
ICAgICAgIHNlbGYucmVnX251bSA9IGYie3JlZ3R5cGV9e3JlZ2lkfU4iCisgICAgZGVmIGRlY2xf
cmVnX251bShzZWxmLCBmLCByZWdubyk6CisgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwK
KyAgICAgICAgICAgIGNvbnN0IGludCB7c2VsZi5yZWdfbnVtfSA9IGluc24tPnJlZ25vW3tyZWdu
b31dOworICAgICAgICAiIiIpKQorICAgIGRlZiBpZGVmX2FyZyhzZWxmLCBkZWNsYXJlZCk6Cisg
ICAgICAgIGRlY2xhcmVkLmFwcGVuZChzZWxmLnJlZ190Y2coKSkKKyAgICBkZWYgaGVscGVyX2Fy
ZyhzZWxmKToKKyAgICAgICAgcmV0dXJuIEhlbHBlckFyZygKKyAgICAgICAgICAgIHNlbGYuaGVs
cGVyX3Byb3RvX3R5cGUoKSwKKyAgICAgICAgICAgIHNlbGYucmVnX3RjZygpLAorICAgICAgICAg
ICAgZiJ7c2VsZi5oZWxwZXJfYXJnX3R5cGUoKX0ge3NlbGYuaGVscGVyX2FyZ19uYW1lKCl9Igor
ICAgICAgICApCisKKyMKKyMgRXZlcnkgcmVnaXN0ZXIgaXMgZWl0aGVyIFNpbmdsZSBvciBQYWly
IG9yIEh2eAorIworY2xhc3MgU2NhbGFyOgorICAgIGRlZiBpc19zY2FsYXJfcmVnKHNlbGYpOgor
ICAgICAgICByZXR1cm4gVHJ1ZQorICAgIGRlZiBpc19odnhfcmVnKHNlbGYpOgorICAgICAgICBy
ZXR1cm4gRmFsc2UKKyAgICBkZWYgaGVscGVyX2FyZ19uYW1lKHNlbGYpOgorICAgICAgICByZXR1
cm4gc2VsZi5yZWdfdGNnKCkKKworY2xhc3MgU2luZ2xlKFNjYWxhcik6CisgICAgZGVmIGhlbHBl
cl9wcm90b190eXBlKHNlbGYpOgorICAgICAgICByZXR1cm4gInMzMiIKKyAgICBkZWYgaGVscGVy
X2FyZ190eXBlKHNlbGYpOgorICAgICAgICByZXR1cm4gImludDMyX3QiCisKK2NsYXNzIFBhaXIo
U2NhbGFyKToKKyAgICBkZWYgaGVscGVyX3Byb3RvX3R5cGUoc2VsZik6CisgICAgICAgIHJldHVy
biAiczY0IgorICAgIGRlZiBoZWxwZXJfYXJnX3R5cGUoc2VsZik6CisgICAgICAgIHJldHVybiAi
aW50NjRfdCIKKworY2xhc3MgSHZ4OgorICAgIGRlZiBpc19zY2FsYXJfcmVnKHNlbGYpOgorICAg
ICAgICByZXR1cm4gRmFsc2UKKyAgICBkZWYgaXNfaHZ4X3JlZyhzZWxmKToKKyAgICAgICAgcmV0
dXJuIFRydWUKKyAgICBkZWYgaHZ4X29mZihzZWxmKToKKyAgICAgICAgcmV0dXJuIGYie3NlbGYu
cmVnX3RjZygpfV9vZmYiCisgICAgZGVmIGhlbHBlcl9wcm90b190eXBlKHNlbGYpOgorICAgICAg
ICByZXR1cm4gInB0ciIKKyAgICBkZWYgaGVscGVyX2FyZ190eXBlKHNlbGYpOgorICAgICAgICBy
ZXR1cm4gInZvaWQgKiIKKyAgICBkZWYgaGVscGVyX2FyZ19uYW1lKHNlbGYpOgorICAgICAgICBy
ZXR1cm4gZiJ7c2VsZi5yZWdfdGNnKCl9X3ZvaWQiCisKKyMKKyMgRXZlcnkgcmVnaXN0ZXIgaXMg
ZWl0aGVyIERlc3Qgb3IgT2xkU291cmNlIG9yIE5ld1NvdXJjZSBvciBSZWFkV3JpdGUKKyMKK2Ns
YXNzIERlc3Q6CisgICAgZGVmIHJlZ190Y2coc2VsZik6CisgICAgICAgIHJldHVybiBmIntzZWxm
LnJlZ3R5cGV9e3NlbGYucmVnaWR9ViIKKyAgICBkZWYgaXNfd3JpdHRlbihzZWxmKToKKyAgICAg
ICAgcmV0dXJuIFRydWUKKyAgICBkZWYgaXNfd3JpdGVvbmx5KHNlbGYpOgorICAgICAgICByZXR1
cm4gVHJ1ZQorICAgIGRlZiBpc19yZWFkKHNlbGYpOgorICAgICAgICByZXR1cm4gRmFsc2UKKyAg
ICBkZWYgaXNfcmVhZHdyaXRlKHNlbGYpOgorICAgICAgICByZXR1cm4gRmFsc2UKKworY2xhc3Mg
U291cmNlOgorICAgIGRlZiBpc193cml0dGVuKHNlbGYpOgorICAgICAgICByZXR1cm4gRmFsc2UK
KyAgICBkZWYgaXNfd3JpdGVvbmx5KHNlbGYpOgorICAgICAgICByZXR1cm4gRmFsc2UKKyAgICBk
ZWYgaXNfcmVhZChzZWxmKToKKyAgICAgICAgcmV0dXJuIFRydWUKKyAgICBkZWYgaXNfcmVhZHdy
aXRlKHNlbGYpOgorICAgICAgICByZXR1cm4gRmFsc2UKKworY2xhc3MgT2xkU291cmNlKFNvdXJj
ZSk6CisgICAgZGVmIHJlZ190Y2coc2VsZik6CisgICAgICAgIHJldHVybiBmIntzZWxmLnJlZ3R5
cGV9e3NlbGYucmVnaWR9ViIKKworY2xhc3MgTmV3U291cmNlKFNvdXJjZSk6CisgICAgZGVmIHJl
Z190Y2coc2VsZik6CisgICAgICAgIHJldHVybiBmIntzZWxmLnJlZ3R5cGV9e3NlbGYucmVnaWR9
TiIKKworY2xhc3MgUmVhZFdyaXRlOgorICAgIGRlZiByZWdfdGNnKHNlbGYpOgorICAgICAgICBy
ZXR1cm4gZiJ7c2VsZi5yZWd0eXBlfXtzZWxmLnJlZ2lkfVYiCisgICAgZGVmIGlzX3dyaXR0ZW4o
c2VsZik6CisgICAgICAgIHJldHVybiBUcnVlCisgICAgZGVmIGlzX3dyaXRlb25seShzZWxmKToK
KyAgICAgICAgcmV0dXJuIEZhbHNlCisgICAgZGVmIGlzX3JlYWQoc2VsZik6CisgICAgICAgIHJl
dHVybiBUcnVlCisgICAgZGVmIGlzX3JlYWR3cml0ZShzZWxmKToKKyAgICAgICAgcmV0dXJuIFRy
dWUKKworY2xhc3MgR3ByRGVzdChSZWdpc3RlciwgU2luZ2xlLCBEZXN0KToKKyAgICBkZWYgZGVj
bF90Y2coc2VsZiwgZiwgdGFnLCByZWdubyk6CisgICAgICAgIHNlbGYuZGVjbF9yZWdfbnVtKGYs
IHJlZ25vKQorICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAgICAgICBUQ0d2
IHtzZWxmLnJlZ190Y2coKX0gPSBnZXRfcmVzdWx0X2dwcihjdHgsIHtzZWxmLnJlZ19udW19KTsK
KyAgICAgICAgIiIiKSkKKyAgICBkZWYgbG9nX3dyaXRlKHNlbGYsIGYsIHRhZyk6CisgICAgICAg
IGYud3JpdGUoY29kZV9mbXQoZiIiIlwKKyAgICAgICAgICAgIGdlbl9sb2dfcmVnX3dyaXRlKGN0
eCwge3NlbGYucmVnX251bX0sIHtzZWxmLnJlZ190Y2coKX0pOworICAgICAgICAiIiIpKQorCitj
bGFzcyBHcHJTb3VyY2UoUmVnaXN0ZXIsIFNpbmdsZSwgT2xkU291cmNlKToKKyAgICBkZWYgZGVj
bF90Y2coc2VsZiwgZiwgdGFnLCByZWdubyk6CisgICAgICAgIHNlbGYuZGVjbF9yZWdfbnVtKGYs
IHJlZ25vKQorICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAgICAgICBUQ0d2
IHtzZWxmLnJlZ190Y2coKX0gPSBoZXhfZ3ByW3tzZWxmLnJlZ19udW19XTsKKyAgICAgICAgIiIi
KSkKKworY2xhc3MgR3ByTmV3U291cmNlKFJlZ2lzdGVyLCBTaW5nbGUsIE5ld1NvdXJjZSk6Cisg
ICAgZGVmIGRlY2xfdGNnKHNlbGYsIGYsIHRhZywgcmVnbm8pOgorICAgICAgICBmLndyaXRlKGNv
ZGVfZm10KGYiIiJcCisgICAgICAgICAgICBUQ0d2IHtzZWxmLnJlZ190Y2coKX0gPSBnZXRfcmVz
dWx0X2dwcihjdHgsIGluc24tPnJlZ25vW3tyZWdub31dKTsKKyAgICAgICAgIiIiKSkKKworY2xh
c3MgR3ByUmVhZFdyaXRlKFJlZ2lzdGVyLCBTaW5nbGUsIFJlYWRXcml0ZSk6CisgICAgZGVmIGRl
Y2xfdGNnKHNlbGYsIGYsIHRhZywgcmVnbm8pOgorICAgICAgICBzZWxmLmRlY2xfcmVnX251bShm
LCByZWdubykKKyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgVENH
diB7c2VsZi5yZWdfdGNnKCl9ID0gZ2V0X3Jlc3VsdF9ncHIoY3R4LCB7c2VsZi5yZWdfbnVtfSk7
CisgICAgICAgICIiIikpCisgICAgICAgICMjIEZvciByZWFkL3dyaXRlIHJlZ2lzdGVycywgd2Ug
bmVlZCB0byBnZXQgdGhlIG9yaWdpbmFsIHZhbHVlIGludG8KKyAgICAgICAgIyMgdGhlIHJlc3Vs
dCBUQ0d2LiAgRm9yIHByZWRpY2F0ZWQgaW5zdHJ1Y3Rpb25zLCB0aGlzIGlzIGRvbmUgaW4KKyAg
ICAgICAgIyMgZ2VuX3N0YXJ0X3BhY2tldC4gIEZvciB1bi1wcmVkaWNhdGVkIGluc3RydWN0aW9u
cywgd2UgZG8gaXQgaGVyZS4KKyAgICAgICAgaWYgbm90IGlzX3ByZWRpY2F0ZWQodGFnKToKKyAg
ICAgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwKKyAgICAgICAgICAgICAgICB0Y2dfZ2Vu
X21vdl90bCh7c2VsZi5yZWdfdGNnKCl9LCBoZXhfZ3ByW3tzZWxmLnJlZ19udW19XSk7CisgICAg
ICAgICAgICAiIiIpKQorICAgIGRlZiBsb2dfd3JpdGUoc2VsZiwgZiwgdGFnKToKKyAgICAgICAg
Zi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgZ2VuX2xvZ19yZWdfd3JpdGUoY3R4
LCB7c2VsZi5yZWdfbnVtfSwge3NlbGYucmVnX3RjZygpfSk7CisgICAgICAgICIiIikpCisKK2Ns
YXNzIENvbnRyb2xEZXN0KFJlZ2lzdGVyLCBTaW5nbGUsIERlc3QpOgorICAgIGRlZiBkZWNsX3Jl
Z19udW0oc2VsZiwgZiwgcmVnbm8pOgorICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisg
ICAgICAgICAgICBjb25zdCBpbnQge3NlbGYucmVnX251bX0gPSBpbnNuLT5yZWdub1t7cmVnbm99
XSAgKyBIRVhfUkVHX1NBMDsKKyAgICAgICAgIiIiKSkKKyAgICBkZWYgZGVjbF90Y2coc2VsZiwg
ZiwgdGFnLCByZWdubyk6CisgICAgICAgIHNlbGYuZGVjbF9yZWdfbnVtKGYsIHJlZ25vKQorICAg
ICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAgICAgICBUQ0d2IHtzZWxmLnJlZ190
Y2coKX0gPSBnZXRfcmVzdWx0X2dwcihjdHgsIHtzZWxmLnJlZ19udW19KTsKKyAgICAgICAgIiIi
KSkKKyAgICBkZWYgbG9nX3dyaXRlKHNlbGYsIGYsIHRhZyk6CisgICAgICAgIGYud3JpdGUoY29k
ZV9mbXQoZiIiIlwKKyAgICAgICAgICAgIGdlbl93cml0ZV9jdHJsX3JlZyhjdHgsIHtzZWxmLnJl
Z19udW19LCB7c2VsZi5yZWdfdGNnKCl9KTsKKyAgICAgICAgIiIiKSkKKworY2xhc3MgQ29udHJv
bFNvdXJjZShSZWdpc3RlciwgU2luZ2xlLCBPbGRTb3VyY2UpOgorICAgIGRlZiBkZWNsX3JlZ19u
dW0oc2VsZiwgZiwgcmVnbm8pOgorICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAg
ICAgICAgICBjb25zdCBpbnQge3NlbGYucmVnX251bX0gPSBpbnNuLT5yZWdub1t7cmVnbm99XSAg
KyBIRVhfUkVHX1NBMDsKKyAgICAgICAgIiIiKSkKKyAgICBkZWYgZGVjbF90Y2coc2VsZiwgZiwg
dGFnLCByZWdubyk6CisgICAgICAgIHNlbGYuZGVjbF9yZWdfbnVtKGYsIHJlZ25vKTsKKyAgICAg
ICAgZi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgVENHdiB7c2VsZi5yZWdfdGNn
KCl9ID0gdGNnX3RlbXBfbmV3KCk7CisgICAgICAgICAgICBnZW5fcmVhZF9jdHJsX3JlZyhjdHgs
IHtzZWxmLnJlZ19udW19LCB7c2VsZi5yZWdfdGNnKCl9KTsKKyAgICAgICAgIiIiKSkKKworY2xh
c3MgTW9kaWZpZXJTb3VyY2UoUmVnaXN0ZXIsIFNpbmdsZSwgT2xkU291cmNlKToKKyAgICBkZWYg
ZGVjbF9yZWdfbnVtKHNlbGYsIGYsIHJlZ25vKToKKyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChm
IiIiXAorICAgICAgICAgICAgY29uc3QgaW50IHtzZWxmLnJlZ19udW19ID0gaW5zbi0+cmVnbm9b
e3JlZ25vfV0gKyBIRVhfUkVHX00wOworICAgICAgICAiIiIpKQorICAgIGRlZiBkZWNsX3RjZyhz
ZWxmLCBmLCB0YWcsIHJlZ25vKToKKyAgICAgICAgc2VsZi5kZWNsX3JlZ19udW0oZiwgcmVnbm8p
CisgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwKKyAgICAgICAgICAgIFRDR3Yge3NlbGYu
cmVnX3RjZygpfSA9IGhleF9ncHJbe3NlbGYucmVnX251bX1dOworICAgICAgICAgICAgVENHdiBD
UyBHX0dOVUNfVU5VU0VEID0KKyAgICAgICAgICAgICAgICBoZXhfZ3ByW3tzZWxmLnJlZ19udW19
IC0gSEVYX1JFR19NMCArIEhFWF9SRUdfQ1MwXTsKKyAgICAgICAgIiIiKSkKKyAgICBkZWYgaWRl
Zl9hcmcoc2VsZiwgZGVjbGFyZWQpOgorICAgICAgICBkZWNsYXJlZC5hcHBlbmQoc2VsZi5yZWdf
dGNnKCkpCisgICAgICAgIGRlY2xhcmVkLmFwcGVuZCgiQ1MiKQorCitjbGFzcyBQcmVkRGVzdChS
ZWdpc3RlciwgU2luZ2xlLCBEZXN0KToKKyAgICBkZWYgZGVjbF90Y2coc2VsZiwgZiwgdGFnLCBy
ZWdubyk6CisgICAgICAgIHNlbGYuZGVjbF9yZWdfbnVtKGYsIHJlZ25vKQorICAgICAgICBmLndy
aXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAgICAgICBUQ0d2IHtzZWxmLnJlZ190Y2coKX0gPSB0
Y2dfdGVtcF9uZXcoKTsKKyAgICAgICAgIiIiKSkKKyAgICBkZWYgbG9nX3dyaXRlKHNlbGYsIGYs
IHRhZyk6CisgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwKKyAgICAgICAgICAgIGdlbl9s
b2dfcHJlZF93cml0ZShjdHgsIHtzZWxmLnJlZ19udW19LCB7c2VsZi5yZWdfdGNnKCl9KTsKKyAg
ICAgICAgIiIiKSkKKworY2xhc3MgUHJlZFNvdXJjZShSZWdpc3RlciwgU2luZ2xlLCBPbGRTb3Vy
Y2UpOgorICAgIGRlZiBkZWNsX3RjZyhzZWxmLCBmLCB0YWcsIHJlZ25vKToKKyAgICAgICAgc2Vs
Zi5kZWNsX3JlZ19udW0oZiwgcmVnbm8pCisgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwK
KyAgICAgICAgICAgIFRDR3Yge3NlbGYucmVnX3RjZygpfSA9IGhleF9wcmVkW3tzZWxmLnJlZ19u
dW19XTsKKyAgICAgICAgIiIiKSkKKworY2xhc3MgUHJlZE5ld1NvdXJjZShSZWdpc3RlciwgU2lu
Z2xlLCBOZXdTb3VyY2UpOgorICAgIGRlZiBkZWNsX3RjZyhzZWxmLCBmLCB0YWcsIHJlZ25vKToK
KyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgVENHdiB7c2VsZi5y
ZWdfdGNnKCl9ID0gZ2V0X3Jlc3VsdF9wcmVkKGN0eCwgaW5zbi0+cmVnbm9be3JlZ25vfV0pOwor
ICAgICAgICAiIiIpKQorCitjbGFzcyBQcmVkUmVhZFdyaXRlKFJlZ2lzdGVyLCBTaW5nbGUsIFJl
YWRXcml0ZSk6CisgICAgZGVmIGRlY2xfdGNnKHNlbGYsIGYsIHRhZywgcmVnbm8pOgorICAgICAg
ICBzZWxmLmRlY2xfcmVnX251bShmLCByZWdubykKKyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChm
IiIiXAorICAgICAgICAgICAgVENHdiB7c2VsZi5yZWdfdGNnKCl9ID0gdGNnX3RlbXBfbmV3KCk7
CisgICAgICAgICAgICB0Y2dfZ2VuX21vdl90bCh7c2VsZi5yZWdfdGNnKCl9LCBoZXhfcHJlZFt7
c2VsZi5yZWdfbnVtfV0pOworICAgICAgICAiIiIpKQorICAgIGRlZiBsb2dfd3JpdGUoc2VsZiwg
ZiwgdGFnKToKKyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgZ2Vu
X2xvZ19wcmVkX3dyaXRlKGN0eCwge3NlbGYucmVnX251bX0sIHtzZWxmLnJlZ190Y2coKX0pOwor
ICAgICAgICAiIiIpKQorCitjbGFzcyBQYWlyRGVzdChSZWdpc3RlciwgUGFpciwgRGVzdCk6Cisg
ICAgZGVmIGRlY2xfdGNnKHNlbGYsIGYsIHRhZywgcmVnbm8pOgorICAgICAgICBzZWxmLmRlY2xf
cmVnX251bShmLCByZWdubykKKyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAg
ICAgICAgVENHdl9pNjQge3NlbGYucmVnX3RjZygpfSA9CisgICAgICAgICAgICAgICAgZ2V0X3Jl
c3VsdF9ncHJfcGFpcihjdHgsIHtzZWxmLnJlZ19udW19KTsKKyAgICAgICAgIiIiKSkKKyAgICBk
ZWYgbG9nX3dyaXRlKHNlbGYsIGYsIHRhZyk6CisgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIi
IlwKKyAgICAgICAgICAgIGdlbl9sb2dfcmVnX3dyaXRlX3BhaXIoY3R4LCB7c2VsZi5yZWdfbnVt
fSwge3NlbGYucmVnX3RjZygpfSk7CisgICAgICAgICIiIikpCisKK2NsYXNzIFBhaXJTb3VyY2Uo
UmVnaXN0ZXIsIFBhaXIsIE9sZFNvdXJjZSk6CisgICAgZGVmIGRlY2xfdGNnKHNlbGYsIGYsIHRh
ZywgcmVnbm8pOgorICAgICAgICBzZWxmLmRlY2xfcmVnX251bShmLCByZWdubykKKyAgICAgICAg
Zi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgVENHdl9pNjQge3NlbGYucmVnX3Rj
ZygpfSA9IHRjZ190ZW1wX25ld19pNjQoKTsKKyAgICAgICAgICAgIHRjZ19nZW5fY29uY2F0X2kz
Ml9pNjQoe3NlbGYucmVnX3RjZygpfSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGhleF9ncHJbe3NlbGYucmVnX251bX1dLAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaGV4X2dwclt7c2VsZi5yZWdfbnVtfSArIDFdKTsKKyAgICAgICAgIiIiKSkKKwor
Y2xhc3MgUGFpclJlYWRXcml0ZShSZWdpc3RlciwgUGFpciwgUmVhZFdyaXRlKToKKyAgICBkZWYg
ZGVjbF90Y2coc2VsZiwgZiwgdGFnLCByZWdubyk6CisgICAgICAgIHNlbGYuZGVjbF9yZWdfbnVt
KGYsIHJlZ25vKQorICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAgICAgICBU
Q0d2X2k2NCB7c2VsZi5yZWdfdGNnKCl9ID0KKyAgICAgICAgICAgICAgICBnZXRfcmVzdWx0X2dw
cl9wYWlyKGN0eCwge3NlbGYucmVnX251bX0pOworICAgICAgICAgICAgdGNnX2dlbl9jb25jYXRf
aTMyX2k2NCh7c2VsZi5yZWdfdGNnKCl9LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBoZXhfZ3ByW3tzZWxmLnJlZ19udW19XSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgaGV4X2dwclt7c2VsZi5yZWdfbnVtfSArIDFdKTsKKyAgICAgICAgIiIiKSkKKyAg
ICBkZWYgbG9nX3dyaXRlKHNlbGYsIGYsIHRhZyk6CisgICAgICAgIGYud3JpdGUoY29kZV9mbXQo
ZiIiIlwKKyAgICAgICAgICAgIGdlbl9sb2dfcmVnX3dyaXRlX3BhaXIoY3R4LCB7c2VsZi5yZWdf
bnVtfSwge3NlbGYucmVnX3RjZygpfSk7CisgICAgICAgICIiIikpCisKK2NsYXNzIENvbnRyb2xQ
YWlyRGVzdChSZWdpc3RlciwgUGFpciwgRGVzdCk6CisgICAgZGVmIGRlY2xfcmVnX251bShzZWxm
LCBmLCByZWdubyk6CisgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwKKyAgICAgICAgICAg
IGNvbnN0IGludCB7c2VsZi5yZWdfbnVtfSA9IGluc24tPnJlZ25vW3tyZWdub31dICsgSEVYX1JF
R19TQTA7CisgICAgICAgICIiIikpCisgICAgZGVmIGRlY2xfdGNnKHNlbGYsIGYsIHRhZywgcmVn
bm8pOgorICAgICAgICBzZWxmLmRlY2xfcmVnX251bShmLCByZWdubykKKyAgICAgICAgZi53cml0
ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgVENHdl9pNjQge3NlbGYucmVnX3RjZygpfSA9
CisgICAgICAgICAgICAgICAgZ2V0X3Jlc3VsdF9ncHJfcGFpcihjdHgsIHtzZWxmLnJlZ19udW19
KTsKKyAgICAgICAgIiIiKSkKKyAgICBkZWYgbG9nX3dyaXRlKHNlbGYsIGYsIHRhZyk6CisgICAg
ICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwKKyAgICAgICAgICAgIGdlbl93cml0ZV9jdHJsX3Jl
Z19wYWlyKGN0eCwge3NlbGYucmVnX251bX0sIHtzZWxmLnJlZ190Y2coKX0pOworICAgICAgICAi
IiIpKQorCitjbGFzcyBDb250cm9sUGFpclNvdXJjZShSZWdpc3RlciwgUGFpciwgT2xkU291cmNl
KToKKyAgICBkZWYgZGVjbF9yZWdfbnVtKHNlbGYsIGYsIHJlZ25vKToKKyAgICAgICAgZi53cml0
ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgY29uc3QgaW50IHtzZWxmLnJlZ19udW19ID0g
aW5zbi0+cmVnbm9be3JlZ25vfV0gKyBIRVhfUkVHX1NBMDsKKyAgICAgICAgIiIiKSkKKyAgICBk
ZWYgZGVjbF90Y2coc2VsZiwgZiwgdGFnLCByZWdubyk6CisgICAgICAgIHNlbGYuZGVjbF9yZWdf
bnVtKGYsIHJlZ25vKQorICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAgICAg
ICBUQ0d2X2k2NCB7c2VsZi5yZWdfdGNnKCl9ID0gdGNnX3RlbXBfbmV3X2k2NCgpOworICAgICAg
ICAgICAgZ2VuX3JlYWRfY3RybF9yZWdfcGFpcihjdHgsIHtzZWxmLnJlZ19udW19LCB7c2VsZi5y
ZWdfdGNnKCl9KTsKKyAgICAgICAgIiIiKSkKKworY2xhc3MgVlJlZ0Rlc3QoUmVnaXN0ZXIsIEh2
eCwgRGVzdCk6CisgICAgZGVmIGRlY2xfdGNnKHNlbGYsIGYsIHRhZywgcmVnbm8pOgorICAgICAg
ICBzZWxmLmRlY2xfcmVnX251bShmLCByZWdubykKKyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChm
IiIiXAorICAgICAgICAgICAgY29uc3QgaW50cHRyX3Qge3NlbGYuaHZ4X29mZigpfSA9CisgICAg
ICAgICAgICAgICAge3ZyZWdfb2Zmc2V0X2Z1bmModGFnKX0oY3R4LCB7c2VsZi5yZWdfbnVtfSwg
MSwgdHJ1ZSk7CisgICAgICAgICIiIikpCisgICAgICAgIGlmIG5vdCBza2lwX3FlbXVfaGVscGVy
KHRhZyk6CisgICAgICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAgICAgICAg
ICAgVENHdl9wdHIge3NlbGYucmVnX3RjZygpfSA9IHRjZ190ZW1wX25ld19wdHIoKTsKKyAgICAg
ICAgICAgICAgICB0Y2dfZ2VuX2FkZGlfcHRyKHtzZWxmLnJlZ190Y2coKX0sIHRjZ19lbnYsIHtz
ZWxmLmh2eF9vZmYoKX0pOworICAgICAgICAgICAgIiIiKSkKKyAgICBkZWYgbG9nX3dyaXRlKHNl
bGYsIGYsIHRhZyk6CisgICAgICAgIHBhc3MKKworY2xhc3MgVlJlZ1NvdXJjZShSZWdpc3Rlciwg
SHZ4LCBPbGRTb3VyY2UpOgorICAgIGRlZiBkZWNsX3RjZyhzZWxmLCBmLCB0YWcsIHJlZ25vKToK
KyAgICAgICAgc2VsZi5kZWNsX3JlZ19udW0oZiwgcmVnbm8pCisgICAgICAgIGYud3JpdGUoY29k
ZV9mbXQoZiIiIlwKKyAgICAgICAgICAgIGNvbnN0IGludHB0cl90IHtzZWxmLmh2eF9vZmYoKX0g
PSB2cmVnX3NyY19vZmYoY3R4LCB7c2VsZi5yZWdfbnVtfSk7CisgICAgICAgICIiIikpCisgICAg
ICAgIGlmIG5vdCBza2lwX3FlbXVfaGVscGVyKHRhZyk6CisgICAgICAgICAgICBmLndyaXRlKGNv
ZGVfZm10KGYiIiJcCisgICAgICAgICAgICAgICAgVENHdl9wdHIge3NlbGYucmVnX3RjZygpfSA9
IHRjZ190ZW1wX25ld19wdHIoKTsKKyAgICAgICAgICAgICAgICB0Y2dfZ2VuX2FkZGlfcHRyKHtz
ZWxmLnJlZ190Y2coKX0sIHRjZ19lbnYsIHtzZWxmLmh2eF9vZmYoKX0pOworICAgICAgICAgICAg
IiIiKSkKKworY2xhc3MgVlJlZ05ld1NvdXJjZShSZWdpc3RlciwgSHZ4LCBOZXdTb3VyY2UpOgor
ICAgIGRlZiBkZWNsX3RjZyhzZWxmLCBmLCB0YWcsIHJlZ25vKToKKyAgICAgICAgc2VsZi5kZWNs
X3JlZ19udW0oZiwgcmVnbm8pCisgICAgICAgIGlmIHNraXBfcWVtdV9oZWxwZXIodGFnKToKKyAg
ICAgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwKKyAgICAgICAgICAgICAgICBjb25zdCBp
bnRwdHJfdCB7c2VsZi5odnhfb2ZmKCl9ID0KKyAgICAgICAgICAgICAgICAgICAgY3R4X2Z1dHVy
ZV92cmVnX29mZihjdHgsIHtzZWxmLnJlZ19udW19LCAxLCB0cnVlKTsKKyAgICAgICAgICAgICIi
IikpCisKK2NsYXNzIFZSZWdSZWFkV3JpdGUoUmVnaXN0ZXIsIEh2eCwgUmVhZFdyaXRlKToKKyAg
ICBkZWYgZGVjbF90Y2coc2VsZiwgZiwgdGFnLCByZWdubyk6CisgICAgICAgIHNlbGYuZGVjbF9y
ZWdfbnVtKGYsIHJlZ25vKQorICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAg
ICAgICBjb25zdCBpbnRwdHJfdCB7c2VsZi5odnhfb2ZmKCl9ID0KKyAgICAgICAgICAgICAgICB7
dnJlZ19vZmZzZXRfZnVuYyh0YWcpfShjdHgsIHtzZWxmLnJlZ19udW19LCAxLCB0cnVlKTsKKyAg
ICAgICAgICAgIHRjZ19nZW5fZ3ZlY19tb3YoTU9fNjQsIHtzZWxmLmh2eF9vZmYoKX0sCisgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHZyZWdfc3JjX29mZihjdHgsIHtzZWxmLnJlZ19udW19
KSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKE1NVmVjdG9yKSwgc2l6ZW9m
KE1NVmVjdG9yKSk7CisgICAgICAgICIiIikpCisgICAgICAgIGlmIG5vdCBza2lwX3FlbXVfaGVs
cGVyKHRhZyk6CisgICAgICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAgICAg
ICAgICAgVENHdl9wdHIge3NlbGYucmVnX3RjZygpfSA9IHRjZ190ZW1wX25ld19wdHIoKTsKKyAg
ICAgICAgICAgICAgICB0Y2dfZ2VuX2FkZGlfcHRyKHtzZWxmLnJlZ190Y2coKX0sIHRjZ19lbnYs
IHtzZWxmLmh2eF9vZmYoKX0pOworICAgICAgICAgICAgIiIiKSkKKyAgICBkZWYgbG9nX3dyaXRl
KHNlbGYsIGYsIHRhZyk6CisgICAgICAgIHBhc3MKKworY2xhc3MgVlJlZ1RtcChSZWdpc3Rlciwg
SHZ4LCBSZWFkV3JpdGUpOgorICAgIGRlZiBkZWNsX3RjZyhzZWxmLCBmLCB0YWcsIHJlZ25vKToK
KyAgICAgICAgc2VsZi5kZWNsX3JlZ19udW0oZiwgcmVnbm8pCisgICAgICAgIGYud3JpdGUoY29k
ZV9mbXQoZiIiIlwKKyAgICAgICAgICAgIGNvbnN0IGludHB0cl90IHtzZWxmLmh2eF9vZmYoKX0g
PSBvZmZzZXRvZihDUFVIZXhhZ29uU3RhdGUsIHZ0bXApOworICAgICAgICAiIiIpKQorICAgICAg
ICBpZiBub3Qgc2tpcF9xZW11X2hlbHBlcih0YWcpOgorICAgICAgICAgICAgZi53cml0ZShjb2Rl
X2ZtdChmIiIiXAorICAgICAgICAgICAgICAgIFRDR3ZfcHRyIHtzZWxmLnJlZ190Y2coKX0gPSB0
Y2dfdGVtcF9uZXdfcHRyKCk7CisgICAgICAgICAgICAgICAgdGNnX2dlbl9hZGRpX3B0cih7c2Vs
Zi5yZWdfdGNnKCl9LCB0Y2dfZW52LCB7c2VsZi5odnhfb2ZmKCl9KTsKKyAgICAgICAgICAgICAg
ICB0Y2dfZ2VuX2d2ZWNfbW92KE1PXzY0LCB7c2VsZi5odnhfb2ZmKCl9LAorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgdnJlZ19zcmNfb2ZmKGN0eCwge3NlbGYucmVnX251bX0pLAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKE1NVmVjdG9yKSwgc2l6ZW9m
KE1NVmVjdG9yKSk7CisgICAgICAgICAgICAiIiIpKQorICAgIGRlZiBsb2dfd3JpdGUoc2VsZiwg
ZiwgdGFnKToKKyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgZ2Vu
X2xvZ192cmVnX3dyaXRlKGN0eCwge3NlbGYuaHZ4X29mZigpfSwge3NlbGYucmVnX251bX0sCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2h2eF9uZXd2KHRhZyl9KTsKKyAgICAgICAg
IiIiKSkKKworY2xhc3MgVlJlZ1BhaXJEZXN0KFJlZ2lzdGVyLCBIdngsIERlc3QpOgorICAgIGRl
ZiBkZWNsX3RjZyhzZWxmLCBmLCB0YWcsIHJlZ25vKToKKyAgICAgICAgc2VsZi5kZWNsX3JlZ19u
dW0oZiwgcmVnbm8pCisgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwKKyAgICAgICAgICAg
IGNvbnN0IGludHB0cl90IHtzZWxmLmh2eF9vZmYoKX0gPQorICAgICAgICAgICAgICAgIHt2cmVn
X29mZnNldF9mdW5jKHRhZyl9KGN0eCwge3NlbGYucmVnX251bX0sIDIsIHRydWUpOworICAgICAg
ICAiIiIpKQorICAgICAgICBpZiBub3Qgc2tpcF9xZW11X2hlbHBlcih0YWcpOgorICAgICAgICAg
ICAgZi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgICAgIFRDR3ZfcHRyIHtzZWxm
LnJlZ190Y2coKX0gPSB0Y2dfdGVtcF9uZXdfcHRyKCk7CisgICAgICAgICAgICAgICAgdGNnX2dl
bl9hZGRpX3B0cih7c2VsZi5yZWdfdGNnKCl9LCB0Y2dfZW52LCB7c2VsZi5odnhfb2ZmKCl9KTsK
KyAgICAgICAgICAgICIiIikpCisgICAgZGVmIGxvZ193cml0ZShzZWxmLCBmLCB0YWcpOgorICAg
ICAgICBwYXNzCisKK2NsYXNzIFZSZWdQYWlyU291cmNlKFJlZ2lzdGVyLCBIdngsIE9sZFNvdXJj
ZSk6CisgICAgZGVmIGRlY2xfdGNnKHNlbGYsIGYsIHRhZywgcmVnbm8pOgorICAgICAgICBzZWxm
LmRlY2xfcmVnX251bShmLCByZWdubykKKyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChmIiIiXAor
ICAgICAgICAgICAgY29uc3QgaW50cHRyX3Qge3NlbGYuaHZ4X29mZigpfSA9CisgICAgICAgICAg
ICAgICAgb2Zmc2V0b2YoQ1BVSGV4YWdvblN0YXRlLCB7c2VsZi5yZWdfdGNnKCl9KTsKKyAgICAg
ICAgICAgIHRjZ19nZW5fZ3ZlY19tb3YoTU9fNjQsIHtzZWxmLmh2eF9vZmYoKX0sCisgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHZyZWdfc3JjX29mZihjdHgsIHtzZWxmLnJlZ19udW19KSwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZW9mKE1NVmVjdG9yKSwgc2l6ZW9mKE1N
VmVjdG9yKSk7CisgICAgICAgICAgICB0Y2dfZ2VuX2d2ZWNfbW92KE1PXzY0LCB7c2VsZi5odnhf
b2ZmKCl9ICsgc2l6ZW9mKE1NVmVjdG9yKSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dnJlZ19zcmNfb2ZmKGN0eCwge3NlbGYucmVnX251bX0gXiAxKSwKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgc2l6ZW9mKE1NVmVjdG9yKSwgc2l6ZW9mKE1NVmVjdG9yKSk7CisgICAgICAg
ICIiIikpCisgICAgICAgIGlmIG5vdCBza2lwX3FlbXVfaGVscGVyKHRhZyk6CisgICAgICAgICAg
ICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAgICAgICAgICAgVENHdl9wdHIge3NlbGYu
cmVnX3RjZygpfSA9IHRjZ190ZW1wX25ld19wdHIoKTsKKyAgICAgICAgICAgICAgICB0Y2dfZ2Vu
X2FkZGlfcHRyKHtzZWxmLnJlZ190Y2coKX0sIHRjZ19lbnYsIHtzZWxmLmh2eF9vZmYoKX0pOwor
ICAgICAgICAgICAgIiIiKSkKKworY2xhc3MgVlJlZ1BhaXJSZWFkV3JpdGUoUmVnaXN0ZXIsIEh2
eCwgUmVhZFdyaXRlKToKKyAgICBkZWYgZGVjbF90Y2coc2VsZiwgZiwgdGFnLCByZWdubyk6Cisg
ICAgICAgIHNlbGYuZGVjbF9yZWdfbnVtKGYsIHJlZ25vKQorICAgICAgICBmLndyaXRlKGNvZGVf
Zm10KGYiIiJcCisgICAgICAgICAgICBjb25zdCBpbnRwdHJfdCB7c2VsZi5odnhfb2ZmKCl9ID0K
KyAgICAgICAgICAgICAgICBvZmZzZXRvZihDUFVIZXhhZ29uU3RhdGUsIHtzZWxmLnJlZ190Y2co
KX0pOworICAgICAgICAgICAgdGNnX2dlbl9ndmVjX21vdihNT182NCwge3NlbGYuaHZ4X29mZigp
fSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnJlZ19zcmNfb2ZmKGN0eCwge3NlbGYu
cmVnX251bX0pLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YoTU1WZWN0b3Ip
LCBzaXplb2YoTU1WZWN0b3IpKTsKKyAgICAgICAgICAgIHRjZ19nZW5fZ3ZlY19tb3YoTU9fNjQs
IHtzZWxmLmh2eF9vZmYoKX0gKyBzaXplb2YoTU1WZWN0b3IpLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB2cmVnX3NyY19vZmYoY3R4LCB7c2VsZi5yZWdfbnVtfSBeIDEpLAorICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YoTU1WZWN0b3IpLCBzaXplb2YoTU1WZWN0b3Ip
KTsKKyAgICAgICAgIiIiKSkKKyAgICAgICAgaWYgbm90IHNraXBfcWVtdV9oZWxwZXIodGFnKToK
KyAgICAgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwKKyAgICAgICAgICAgICAgICBUQ0d2
X3B0ciB7c2VsZi5yZWdfdGNnKCl9ID0gdGNnX3RlbXBfbmV3X3B0cigpOworICAgICAgICAgICAg
ICAgIHRjZ19nZW5fYWRkaV9wdHIoe3NlbGYucmVnX3RjZygpfSwgdGNnX2Vudiwge3NlbGYuaHZ4
X29mZigpfSk7CisgICAgICAgICAgICAiIiIpKQorICAgIGRlZiBsb2dfd3JpdGUoc2VsZiwgZiwg
dGFnKToKKyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgZ2VuX2xv
Z192cmVnX3dyaXRlX3BhaXIoY3R4LCB7c2VsZi5odnhfb2ZmKCl9LCB7c2VsZi5yZWdfbnVtfSwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtodnhfbmV3dih0YWcpfSk7Cisg
ICAgICAgICIiIikpCisKK2NsYXNzIFFSZWdEZXN0KFJlZ2lzdGVyLCBIdngsIERlc3QpOgorICAg
IGRlZiBkZWNsX3RjZyhzZWxmLCBmLCB0YWcsIHJlZ25vKToKKyAgICAgICAgc2VsZi5kZWNsX3Jl
Z19udW0oZiwgcmVnbm8pCisgICAgICAgIGYud3JpdGUoY29kZV9mbXQoZiIiIlwKKyAgICAgICAg
ICAgIGNvbnN0IGludHB0cl90IHtzZWxmLmh2eF9vZmYoKX0gPQorICAgICAgICAgICAgICAgIGdl
dF9yZXN1bHRfcXJlZyhjdHgsIHtzZWxmLnJlZ19udW19KTsKKyAgICAgICAgIiIiKSkKKyAgICAg
ICAgaWYgbm90IHNraXBfcWVtdV9oZWxwZXIodGFnKToKKyAgICAgICAgICAgIGYud3JpdGUoY29k
ZV9mbXQoZiIiIlwKKyAgICAgICAgICAgICAgICBUQ0d2X3B0ciB7c2VsZi5yZWdfdGNnKCl9ID0g
dGNnX3RlbXBfbmV3X3B0cigpOworICAgICAgICAgICAgICAgIHRjZ19nZW5fYWRkaV9wdHIoe3Nl
bGYucmVnX3RjZygpfSwgdGNnX2Vudiwge3NlbGYuaHZ4X29mZigpfSk7CisgICAgICAgICAgICAi
IiIpKQorICAgIGRlZiBsb2dfd3JpdGUoc2VsZiwgZiwgdGFnKToKKyAgICAgICAgcGFzcworCitj
bGFzcyBRUmVnU291cmNlKFJlZ2lzdGVyLCBIdngsIE9sZFNvdXJjZSk6CisgICAgZGVmIGRlY2xf
dGNnKHNlbGYsIGYsIHRhZywgcmVnbm8pOgorICAgICAgICBzZWxmLmRlY2xfcmVnX251bShmLCBy
ZWdubykKKyAgICAgICAgZi53cml0ZShjb2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgY29uc3Qg
aW50cHRyX3Qge3NlbGYuaHZ4X29mZigpfSA9CisgICAgICAgICAgICAgICAgb2Zmc2V0b2YoQ1BV
SGV4YWdvblN0YXRlLCBRUmVnc1t7c2VsZi5yZWdfbnVtfV0pOworICAgICAgICAiIiIpKQorICAg
ICAgICBpZiBub3Qgc2tpcF9xZW11X2hlbHBlcih0YWcpOgorICAgICAgICAgICAgZi53cml0ZShj
b2RlX2ZtdChmIiIiXAorICAgICAgICAgICAgICAgIFRDR3ZfcHRyIHtzZWxmLnJlZ190Y2coKX0g
PSB0Y2dfdGVtcF9uZXdfcHRyKCk7CisgICAgICAgICAgICAgICAgdGNnX2dlbl9hZGRpX3B0cih7
c2VsZi5yZWdfdGNnKCl9LCB0Y2dfZW52LCB7c2VsZi5odnhfb2ZmKCl9KTsKKyAgICAgICAgICAg
ICIiIikpCisKK2NsYXNzIFFSZWdSZWFkV3JpdGUoUmVnaXN0ZXIsIEh2eCwgUmVhZFdyaXRlKToK
KyAgICBkZWYgZGVjbF90Y2coc2VsZiwgZiwgdGFnLCByZWdubyk6CisgICAgICAgIHNlbGYuZGVj
bF9yZWdfbnVtKGYsIHJlZ25vKQorICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAg
ICAgICAgICBjb25zdCBpbnRwdHJfdCB7c2VsZi5odnhfb2ZmKCl9ID0KKyAgICAgICAgICAgICAg
ICBnZXRfcmVzdWx0X3FyZWcoY3R4LCB7c2VsZi5yZWdfbnVtfSk7CisgICAgICAgICAgICB0Y2df
Z2VuX2d2ZWNfbW92KE1PXzY0LCB7c2VsZi5odnhfb2ZmKCl9LAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBvZmZzZXRvZihDUFVIZXhhZ29uU3RhdGUsIFFSZWdzW3tzZWxmLnJlZ19udW19
XSksCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVvZihNTVFSZWcpLCBzaXplb2Yo
TU1RUmVnKSk7CisgICAgICAgICIiIikpCisgICAgICAgIGlmIG5vdCBza2lwX3FlbXVfaGVscGVy
KHRhZyk6CisgICAgICAgICAgICBmLndyaXRlKGNvZGVfZm10KGYiIiJcCisgICAgICAgICAgICAg
ICAgVENHdl9wdHIge3NlbGYucmVnX3RjZygpfSA9IHRjZ190ZW1wX25ld19wdHIoKTsKKyAgICAg
ICAgICAgICAgICB0Y2dfZ2VuX2FkZGlfcHRyKHtzZWxmLnJlZ190Y2coKX0sIHRjZ19lbnYsIHtz
ZWxmLmh2eF9vZmYoKX0pOworICAgICAgICAgICAgIiIiKSkKKyAgICBkZWYgbG9nX3dyaXRlKHNl
bGYsIGYsIHRhZyk6CisgICAgICAgIHBhc3MKKworZGVmIGluaXRfcmVnaXN0ZXJzKCk6CisgICAg
cmVncyA9IHsKKyAgICAgICAgR3ByRGVzdCgiUiIsICJkIiksCisgICAgICAgIEdwckRlc3QoIlIi
LCAiZSIpLAorICAgICAgICBHcHJTb3VyY2UoIlIiLCAicyIpLAorICAgICAgICBHcHJTb3VyY2Uo
IlIiLCAidCIpLAorICAgICAgICBHcHJTb3VyY2UoIlIiLCAidSIpLAorICAgICAgICBHcHJTb3Vy
Y2UoIlIiLCAidiIpLAorICAgICAgICBHcHJSZWFkV3JpdGUoIlIiLCAieCIpLAorICAgICAgICBH
cHJSZWFkV3JpdGUoIlIiLCAieSIpLAorICAgICAgICBDb250cm9sRGVzdCgiQyIsICJkIiksCisg
ICAgICAgIENvbnRyb2xTb3VyY2UoIkMiLCAicyIpLAorICAgICAgICBNb2RpZmllclNvdXJjZSgi
TSIsICJ1IiksCisgICAgICAgIFByZWREZXN0KCJQIiwgImQiKSwKKyAgICAgICAgUHJlZERlc3Qo
IlAiLCAiZSIpLAorICAgICAgICBQcmVkU291cmNlKCJQIiwgInMiKSwKKyAgICAgICAgUHJlZFNv
dXJjZSgiUCIsICJ0IiksCisgICAgICAgIFByZWRTb3VyY2UoIlAiLCAidSIpLAorICAgICAgICBQ
cmVkU291cmNlKCJQIiwgInYiKSwKKyAgICAgICAgUHJlZFJlYWRXcml0ZSgiUCIsICJ4IiksCisg
ICAgICAgIFBhaXJEZXN0KCJSIiwgImRkIiksCisgICAgICAgIFBhaXJEZXN0KCJSIiwgImVlIiks
CisgICAgICAgIFBhaXJTb3VyY2UoIlIiLCAic3MiKSwKKyAgICAgICAgUGFpclNvdXJjZSgiUiIs
ICJ0dCIpLAorICAgICAgICBQYWlyUmVhZFdyaXRlKCJSIiwgInh4IiksCisgICAgICAgIFBhaXJS
ZWFkV3JpdGUoIlIiLCAieXkiKSwKKyAgICAgICAgQ29udHJvbFBhaXJEZXN0KCJDIiwgImRkIiks
CisgICAgICAgIENvbnRyb2xQYWlyU291cmNlKCJDIiwgInNzIiksCisgICAgICAgIFZSZWdEZXN0
KCJWIiwgImQiKSwKKyAgICAgICAgVlJlZ1NvdXJjZSgiViIsICJzIiksCisgICAgICAgIFZSZWdT
b3VyY2UoIlYiLCAidSIpLAorICAgICAgICBWUmVnU291cmNlKCJWIiwgInYiKSwKKyAgICAgICAg
VlJlZ1NvdXJjZSgiViIsICJ3IiksCisgICAgICAgIFZSZWdSZWFkV3JpdGUoIlYiLCAieCIpLAor
ICAgICAgICBWUmVnVG1wKCJWIiwgInkiKSwKKyAgICAgICAgVlJlZ1BhaXJEZXN0KCJWIiwgImRk
IiksCisgICAgICAgIFZSZWdQYWlyU291cmNlKCJWIiwgInV1IiksCisgICAgICAgIFZSZWdQYWly
U291cmNlKCJWIiwgInZ2IiksCisgICAgICAgIFZSZWdQYWlyUmVhZFdyaXRlKCJWIiwgInh4Iiks
CisgICAgICAgIFFSZWdEZXN0KCJRIiwgImQiKSwKKyAgICAgICAgUVJlZ0Rlc3QoIlEiLCAiZSIp
LAorICAgICAgICBRUmVnU291cmNlKCJRIiwgInMiKSwKKyAgICAgICAgUVJlZ1NvdXJjZSgiUSIs
ICJ0IiksCisgICAgICAgIFFSZWdTb3VyY2UoIlEiLCAidSIpLAorICAgICAgICBRUmVnU291cmNl
KCJRIiwgInYiKSwKKyAgICAgICAgUVJlZ1JlYWRXcml0ZSgiUSIsICJ4IiksCisgICAgfQorICAg
IGZvciByZWcgaW4gcmVnczoKKyAgICAgICAgcmVnaXN0ZXJzW2Yie3JlZy5yZWd0eXBlfXtyZWcu
cmVnaWR9Il0gPSByZWcKKworICAgIG5ld19yZWdzID0geworICAgICAgICBHcHJOZXdTb3VyY2Uo
Ik4iLCAicyIpLAorICAgICAgICBHcHJOZXdTb3VyY2UoIk4iLCAidCIpLAorICAgICAgICBQcmVk
TmV3U291cmNlKCJQIiwgInQiKSwKKyAgICAgICAgUHJlZE5ld1NvdXJjZSgiUCIsICJ1IiksCisg
ICAgICAgIFByZWROZXdTb3VyY2UoIlAiLCAidiIpLAorICAgICAgICBWUmVnTmV3U291cmNlKCJP
IiwgInMiKSwKKyAgICB9CisgICAgZm9yIHJlZyBpbiBuZXdfcmVnczoKKyAgICAgICAgbmV3X3Jl
Z2lzdGVyc1tmIntyZWcucmVndHlwZX17cmVnLnJlZ2lkfSJdID0gcmVnCisKK2RlZiBnZXRfcmVn
aXN0ZXIodGFnLCByZWd0eXBlLCByZWdpZCk6CisgICAgaWYgZiJ7cmVndHlwZX17cmVnaWR9ViIg
aW4gc2VtZGljdFt0YWddOgorICAgICAgICByZXR1cm4gcmVnaXN0ZXJzW2Yie3JlZ3R5cGV9e3Jl
Z2lkfSJdCisgICAgZWxzZToKKyAgICAgICAgcmV0dXJuIG5ld19yZWdpc3RlcnNbZiJ7cmVndHlw
ZX17cmVnaWR9Il0KKworZGVmIGhlbHBlcl9yZXRfdHlwZSh0YWcsIHJlZ3MpOgorICAgICMjIElm
IHRoZXJlIGlzIGEgc2NhbGFyIHJlc3VsdCwgaXQgaXMgdGhlIHJldHVybiB0eXBlCisgICAgcmV0
dXJuX3R5cGUgPSBIZWxwZXJBcmcoICJ2b2lkIiwgInZvaWQiLCAidm9pZCIpCisgICAgbnVtc2Nh
bGFycmVzdWx0cyA9IDAKKyAgICBmb3IgcmVndHlwZSwgcmVnaWQgaW4gcmVnczoKKyAgICAgICAg
cmVnID0gZ2V0X3JlZ2lzdGVyKHRhZywgcmVndHlwZSwgcmVnaWQpCisgICAgICAgIGlmIHJlZy5p
c193cml0dGVuKCkgYW5kIHJlZy5pc19zY2FsYXJfcmVnKCk6CisgICAgICAgICAgICByZXR1cm5f
dHlwZSA9IEhlbHBlckFyZygKKyAgICAgICAgICAgICAgICByZWcuaGVscGVyX3Byb3RvX3R5cGUo
KSwKKyAgICAgICAgICAgICAgICByZWcucmVnX3RjZygpLAorICAgICAgICAgICAgICAgIHJlZy5o
ZWxwZXJfYXJnX3R5cGUoKQorICAgICAgICAgICAgKQorICAgIGlmIG51bXNjYWxhcnJlc3VsdHMg
PiAxOgorICAgICAgICByYWlzZSBFeGNlcHRpb24oIm51bXNjYWxhcnJlc3VsdHMgPiAxIikKKyAg
ICByZXR1cm4gcmV0dXJuX3R5cGUKKworZGVmIGhlbHBlcl9hcmdzKHRhZywgcmVncywgaW1tcyk6
CisgICAgYXJncyA9IFtdCisKKyAgICAjIyBGaXJzdCBhcmd1bWVudCBpcyB0aGUgQ1BVIHN0YXRl
CisgICAgYXJncy5hcHBlbmQoSGVscGVyQXJnKAorICAgICAgICAiZW52IiwKKyAgICAgICAgInRj
Z19lbnYiLAorICAgICAgICAiQ1BVSGV4YWdvblN0YXRlICplbnYiCisgICAgKSkKKworICAgICMj
IEZvciBwcmVkaWNhdGVkIGluc3RydWN0aW9ucywgd2UgcGFzcyBpbiB0aGUgZGVzdGluYXRpb24g
cmVnaXN0ZXIKKyAgICBpZiBpc19wcmVkaWNhdGVkKHRhZyk6CisgICAgICAgIGZvciByZWd0eXBl
LCByZWdpZCBpbiByZWdzOgorICAgICAgICAgICAgcmVnID0gZ2V0X3JlZ2lzdGVyKHRhZywgcmVn
dHlwZSwgcmVnaWQpCisgICAgICAgICAgICBpZiByZWcuaXNfd3JpdGVvbmx5KCkgYW5kIG5vdCBy
ZWcuaXNfaHZ4X3JlZygpOgorICAgICAgICAgICAgICAgIGFyZ3MuYXBwZW5kKHJlZy5oZWxwZXJf
YXJnKCkpCisKKyAgICAjIyBQYXNzIHRoZSBIVlggZGVzdGluYXRpb24gcmVnaXN0ZXJzCisgICAg
Zm9yIHJlZ3R5cGUsIHJlZ2lkIGluIHJlZ3M6CisgICAgICAgIHJlZyA9IGdldF9yZWdpc3Rlcih0
YWcsIHJlZ3R5cGUsIHJlZ2lkKQorICAgICAgICBpZiByZWcuaXNfd3JpdHRlbigpIGFuZCByZWcu
aXNfaHZ4X3JlZygpOgorICAgICAgICAgICAgYXJncy5hcHBlbmQocmVnLmhlbHBlcl9hcmcoKSkK
KworICAgICMjIFBhc3MgdGhlIHNvdXJjZSByZWdpc3RlcnMKKyAgICBmb3IgcmVndHlwZSwgcmVn
aWQgaW4gcmVnczoKKyAgICAgICAgcmVnID0gZ2V0X3JlZ2lzdGVyKHRhZywgcmVndHlwZSwgcmVn
aWQpCisgICAgICAgIGlmIHJlZy5pc19yZWFkKCkgYW5kIG5vdCAocmVnLmlzX2h2eF9yZWcoKSBh
bmQgcmVnLmlzX3JlYWR3cml0ZSgpKToKKyAgICAgICAgICAgIGFyZ3MuYXBwZW5kKHJlZy5oZWxw
ZXJfYXJnKCkpCisKKyAgICAjIyBQYXNzIHRoZSBpbW1lZGlhdGVzCisgICAgZm9yIGltbWxldHQs
IGJpdHMsIGltbXNoaWZ0IGluIGltbXM6CisgICAgICAgIGFyZ3MuYXBwZW5kKEhlbHBlckFyZygK
KyAgICAgICAgICAgICJzMzIiLAorICAgICAgICAgICAgZiJ0Y2dfY29uc3RhbnRfdGwoe2ltbV9u
YW1lKGltbWxldHQpfSkiLAorICAgICAgICAgICAgZiJpbnQzMl90IHtpbW1fbmFtZShpbW1sZXR0
KX0iCisgICAgICAgICkpCisKKyAgICAjIyBPdGhlciBzdHVmZiB0aGUgaGVscGVyIG1pZ2h0IG5l
ZWQKKyAgICBpZiBuZWVkX3BrdF9oYXNfbXVsdGlfY29mKHRhZyk6CisgICAgICAgIGFyZ3MuYXBw
ZW5kKEhlbHBlckFyZygKKyAgICAgICAgICAgICJpMzIiLAorICAgICAgICAgICAgInRjZ19jb25z
dGFudF90bChjdHgtPnBrdC0+cGt0X2hhc19tdWx0aV9jb2YpIiwKKyAgICAgICAgICAgICJ1aW50
MzJfdCBwa3RfaGFzX211bHRpX2NvZiIKKyAgICAgICAgKSkKKyAgICBpZiBuZWVkX3BrdF9uZWVk
X2NvbW1pdCh0YWcpOgorICAgICAgICBhcmdzLmFwcGVuZChIZWxwZXJBcmcoCisgICAgICAgICAg
ICAiaTMyIiwKKyAgICAgICAgICAgICJ0Y2dfY29uc3RhbnRfdGwoY3R4LT5uZWVkX2NvbW1pdCki
LAorICAgICAgICAgICAgInVpbnQzMl90IHBrdF9uZWVkX2NvbW1pdCIKKyAgICAgICAgKSkKKyAg
ICBpZiBuZWVkX1BDKHRhZyk6CisgICAgICAgIGFyZ3MuYXBwZW5kKEhlbHBlckFyZygKKyAgICAg
ICAgICAgICJpMzIiLAorICAgICAgICAgICAgInRjZ19jb25zdGFudF90bChjdHgtPnBrdC0+cGMp
IiwKKyAgICAgICAgICAgICJ0YXJnZXRfdWxvbmcgUEMiCisgICAgICAgICkpCisgICAgaWYgbmVl
ZF9uZXh0X1BDKHRhZyk6CisgICAgICAgIGFyZ3MuYXBwZW5kKEhlbHBlckFyZygKKyAgICAgICAg
ICAgICJpMzIiLAorICAgICAgICAgICAgInRjZ19jb25zdGFudF90bChjdHgtPm5leHRfUEMpIiwK
KyAgICAgICAgICAgICJ0YXJnZXRfdWxvbmcgbmV4dF9QQyIKKyAgICAgICAgKSkKKyAgICBpZiBu
ZWVkX3Nsb3QodGFnKToKKyAgICAgICAgYXJncy5hcHBlbmQoSGVscGVyQXJnKAorICAgICAgICAg
ICAgImkzMiIsCisgICAgICAgICAgICAiZ2VuX3Nsb3R2YWwoY3R4KSIsCisgICAgICAgICAgICAi
dWludDMyX3Qgc2xvdHZhbCIKKyAgICAgICAgKSkKKyAgICBpZiBuZWVkX3BhcnQxKHRhZyk6Cisg
ICAgICAgIGFyZ3MuYXBwZW5kKEhlbHBlckFyZygKKyAgICAgICAgICAgICJpMzIiLAorICAgICAg
ICAgICAgInRjZ19jb25zdGFudF90bChpbnNuLT5wYXJ0MSkiCisgICAgICAgICAgICAidWludDMy
X3QgcGFydDEiCisgICAgICAgICkpCisgICAgcmV0dXJuIGFyZ3MKLS0gCjIuMjUuMQoK

