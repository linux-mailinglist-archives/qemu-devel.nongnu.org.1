Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id ECE73A4A913
	for <lists+qemu-devel@lfdr.de>; Sat,  1 Mar 2025 06:35:49 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1toFPo-00016e-1i; Sat, 01 Mar 2025 00:29:32 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <brian.cain@oss.qualcomm.com>)
 id 1toFPj-0000yZ-As
 for qemu-devel@nongnu.org; Sat, 01 Mar 2025 00:29:27 -0500
Received: from mx0a-0031df01.pphosted.com ([205.220.168.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <brian.cain@oss.qualcomm.com>)
 id 1toFPg-0008PS-Jh
 for qemu-devel@nongnu.org; Sat, 01 Mar 2025 00:29:26 -0500
Received: from pps.filterd (m0279863.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.18.1.2/8.18.1.2) with ESMTP id 5213YXoj030222
 for <qemu-devel@nongnu.org>; Sat, 1 Mar 2025 05:29:13 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=qualcomm.com; h=
 cc:content-transfer-encoding:content-type:date:from:in-reply-to
 :message-id:mime-version:references:subject:to; s=qcppdkim1; bh=
 4WPJcl6XUAdqKjphGDJJkpHEkpnj/vHIpKcKP8TtYfI=; b=nm87qSvV3SJ2XSpx
 74KINokQyUlXL/w6CRRXM2Nyw0LMvNCQDx0aLY7usRp4IoAcmEn1AyOtWdJweaQZ
 gPym/JjTFfBo7zc/Tc7bNPGC5quvovV8qiJX3IfXFPurtbaqOkaTICeWgeLq2Drr
 Fe1p/3uERV0j/WOO9C2MxdhzzzoYR5bxW1y0pkoY4VUN1oL255c45Dxohkza3/as
 LlSie89cIreTF9A/gmOnbN3xpVvqZonxggXebLsUWmsvm0Q8+8U/my2/lzesIzLO
 xTb0PF5kbzrndpqHsgw53imQzrT3+nrmcwWnCU6uXbXYQvsivxHC7dOfGRj8WSX1
 YiMdMA==
Received: from mail-pl1-f199.google.com (mail-pl1-f199.google.com
 [209.85.214.199])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 453tf0g5d8-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128 verify=NOT)
 for <qemu-devel@nongnu.org>; Sat, 01 Mar 2025 05:29:12 +0000 (GMT)
Received: by mail-pl1-f199.google.com with SMTP id
 d9443c01a7336-21f6cb3097bso75821675ad.3
 for <qemu-devel@nongnu.org>; Fri, 28 Feb 2025 21:29:12 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1740806952; x=1741411752;
 h=content-transfer-encoding:mime-version:references:in-reply-to
 :message-id:date:subject:cc:to:from:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=4WPJcl6XUAdqKjphGDJJkpHEkpnj/vHIpKcKP8TtYfI=;
 b=XRhKhnBYiMq0TjhZtP5VY0cYxoV6Jrg9qVQ+Ncq+VKgzWt07mYhLsUHo5jQTw4E6x4
 XcB8EI2SbqQfYCgNsVOCUb0QU7Qzj8BlaCGnTRlGKjefxMs8E/1ZuFlZPlYyLjzDMuAJ
 oiGm6p7zHQhL/19uOrehgDVOkExGfWnKZ/dVL6jLN5YC8ZTnVFX8RCY/d2aGU0kLvvA3
 PWGkHN7YRc2yUBoNY3QluVWCM5sfZ3qFydy/acC3Fo3p+bn++A7AKJWtnNbnmSgJaECx
 VL5FNoBLVnG87prBLcKmJ7wSiyFK2d5P3gKI1hHFI0qmsFrYkPQdG07OOcnB83jE6Xb5
 VW3g==
X-Gm-Message-State: AOJu0YzzQdab9f7xE9ZSr7JE5o9Ya0rCzYc0Rkg///FcIe8LMr2ZeHKO
 h7tGgHE6e2gTglybEd6VxxO8fN6kL1aJaa1gHqdVtpYPKqTbKD34fA5JvdZfd3XdjIjHYc+Esgf
 DkWK7+drSNA20vdOJErfA+rqVTvpTzg+RxwGx7/OVKACBD5WIiLejH//0u9Xyzg==
X-Gm-Gg: ASbGnctdugTtCEVaMSSy0sJD7FP7xr0n33bV/YCpQXjOGkAWxO990XDoPZi8xOuUkEW
 HIMZb5fR9r3leG18Pm6X3S19qOWq/L7yyvz9ZWOZmnKu/No6muaGt1diYdbUIRTMVar9XnV1m/j
 fZIkWkx1BkMQV/6tSCA5RhPh6p+rT2v2vGz3QmOpuc6wswjOXi+d8wcXihIXE+b3lddChSxZY9J
 2ooyWrzA0sUlkGzMBiqCwkdsA/AaUtHjB+oR8fPQb+qa/CJG2v2YM6N2mnUiZ8gcBdUgq4StlA3
 wNxZgJjaNQE/hlPHgw12d13hdhhuV1oqOwVg4wnI1sVdriiDfWtv241dUbSUE/9c
X-Received: by 2002:a17:902:c951:b0:221:283:5884 with SMTP id
 d9443c01a7336-22368fc9535mr100578415ad.29.1740806951934; 
 Fri, 28 Feb 2025 21:29:11 -0800 (PST)
X-Google-Smtp-Source: AGHT+IGpGcLnBs+04+o/jsa0LIdEbmo0iLWjiLQsqB+18hY+8IWRE/g04yDjoVHnslio8U++s7Z51Q==
X-Received: by 2002:a17:902:c951:b0:221:283:5884 with SMTP id
 d9443c01a7336-22368fc9535mr100578075ad.29.1740806951547; 
 Fri, 28 Feb 2025 21:29:11 -0800 (PST)
Received: from hu-bcain-lv.qualcomm.com (Global_NAT1.qualcomm.com.
 [129.46.96.20]) by smtp.gmail.com with ESMTPSA id
 98e67ed59e1d1-2fea67a5dc8sm4732955a91.23.2025.02.28.21.29.10
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 28 Feb 2025 21:29:11 -0800 (PST)
From: Brian Cain <brian.cain@oss.qualcomm.com>
To: qemu-devel@nongnu.org
Cc: brian.cain@oss.qualcomm.com, richard.henderson@linaro.org,
 philmd@linaro.org, quic_mathbern@quicinc.com, ale@rev.ng, anjo@rev.ng,
 quic_mliebel@quicinc.com, ltaylorsimpson@gmail.com,
 alex.bennee@linaro.org, quic_mburton@quicinc.com, sidneym@quicinc.com,
 Brian Cain <bcain@quicinc.com>, Mike Lambert <mlambert@quicinc.com>
Subject: [PATCH 17/39] target/hexagon: Implement software interrupt
Date: Fri, 28 Feb 2025 21:28:23 -0800
Message-Id: <20250301052845.1012069-18-brian.cain@oss.qualcomm.com>
X-Mailer: git-send-email 2.34.1
In-Reply-To: <20250301052845.1012069-1-brian.cain@oss.qualcomm.com>
References: <20250301052845.1012069-1-brian.cain@oss.qualcomm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Proofpoint-GUID: vcAAFbhGENBJ3XozErHOQ79_rgLhfAJ5
X-Proofpoint-ORIG-GUID: vcAAFbhGENBJ3XozErHOQ79_rgLhfAJ5
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.293,Aquarius:18.0.1057,Hydra:6.0.680,FMLib:17.12.68.34
 definitions=2025-03-01_01,2025-02-28_01,2024-11-22_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 priorityscore=1501
 suspectscore=0 malwarescore=0 lowpriorityscore=0 mlxlogscore=999
 phishscore=0 adultscore=0 spamscore=0 clxscore=1015 mlxscore=0 bulkscore=0
 impostorscore=0 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.19.0-2502100000 definitions=main-2503010040
Received-SPF: pass client-ip=205.220.168.131;
 envelope-from=brian.cain@oss.qualcomm.com; helo=mx0a-0031df01.pphosted.com
X-Spam_score_int: -26
X-Spam_score: -2.7
X-Spam_bar: --
X-Spam_report: (-2.7 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_EF=-0.1, RCVD_IN_DNSWL_LOW=-0.7,
 RCVD_IN_VALIDITY_RPBL_BLOCKED=0.001, RCVD_IN_VALIDITY_SAFE_BLOCKED=0.001,
 SPF_HELO_NONE=0.001, SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

RnJvbTogQnJpYW4gQ2FpbiA8YmNhaW5AcXVpY2luYy5jb20+CgpDby1hdXRob3JlZC1ieTogTWlr
ZSBMYW1iZXJ0IDxtbGFtYmVydEBxdWljaW5jLmNvbT4KU2lnbmVkLW9mZi1ieTogQnJpYW4gQ2Fp
biA8YnJpYW4uY2FpbkBvc3MucXVhbGNvbW0uY29tPgotLS0KIHRhcmdldC9oZXhhZ29uL2NwdS5o
ICAgICAgIHwgICAxIC0KIHRhcmdldC9oZXhhZ29uL2hleHN3aS5oICAgIHwgIDE3ICsrKwogdGFy
Z2V0L2hleGFnb24vY3B1LmMgICAgICAgfCAgIDIgKwogdGFyZ2V0L2hleGFnb24vaGV4c3dpLmMg
ICAgfCAyNTggKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogdGFyZ2V0L2hl
eGFnb24vb3BfaGVscGVyLmMgfCAgIDEgKwogNSBmaWxlcyBjaGFuZ2VkLCAyNzggaW5zZXJ0aW9u
cygrKSwgMSBkZWxldGlvbigtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IHRhcmdldC9oZXhhZ29uL2hl
eHN3aS5oCiBjcmVhdGUgbW9kZSAxMDA2NDQgdGFyZ2V0L2hleGFnb24vaGV4c3dpLmMKCmRpZmYg
LS1naXQgYS90YXJnZXQvaGV4YWdvbi9jcHUuaCBiL3RhcmdldC9oZXhhZ29uL2NwdS5oCmluZGV4
IGRhYmVlMzEwYzUuLjA0NTU4MWQ3YmUgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL2NwdS5o
CisrKyBiL3RhcmdldC9oZXhhZ29uL2NwdS5oCkBAIC0yNTYsNSArMjU2LDQgQEAgdHlwZWRlZiBI
ZXhhZ29uQ1BVIEFyY2hDUFU7CiB2b2lkIGhleGFnb25fdHJhbnNsYXRlX2luaXQodm9pZCk7CiB2
b2lkIGhleGFnb25fdHJhbnNsYXRlX2NvZGUoQ1BVU3RhdGUgKmNzLCBUcmFuc2xhdGlvbkJsb2Nr
ICp0YiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgKm1heF9pbnNucywgdmFkZHIg
cGMsIHZvaWQgKmhvc3RfcGMpOwotCiAjZW5kaWYgLyogSEVYQUdPTl9DUFVfSCAqLwpkaWZmIC0t
Z2l0IGEvdGFyZ2V0L2hleGFnb24vaGV4c3dpLmggYi90YXJnZXQvaGV4YWdvbi9oZXhzd2kuaApu
ZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwLi41ZDIzMmNiMDZjCi0tLSAvZGV2
L251bGwKKysrIGIvdGFyZ2V0L2hleGFnb24vaGV4c3dpLmgKQEAgLTAsMCArMSwxNyBAQAorLyoK
KyAqIENvcHlyaWdodChjKSAyMDI1IFF1YWxjb21tIElubm92YXRpb24gQ2VudGVyLCBJbmMuIEFs
bCBSaWdodHMgUmVzZXJ2ZWQuCisgKgorICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0y
LjAtb3ItbGF0ZXIKKyAqLworCisjaWZuZGVmIEhFWFNXSV9ICisjZGVmaW5lIEhFWFNXSV9ICisK
KworI2luY2x1ZGUgImNwdS5oIgorCit2b2lkIGhleGFnb25fY3B1X2RvX2ludGVycnVwdChDUFVT
dGF0ZSAqY3B1KTsKK3ZvaWQgcmVnaXN0ZXJfdHJhcF9leGNlcHRpb24oQ1BVSGV4YWdvblN0YXRl
ICplbnYsIGludCB0eXBlLCBpbnQgaW1tLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0
YXJnZXRfdWxvbmcgUEMpOworCisjZW5kaWYgLyogSEVYU1dJX0ggKi8KZGlmZiAtLWdpdCBhL3Rh
cmdldC9oZXhhZ29uL2NwdS5jIGIvdGFyZ2V0L2hleGFnb24vY3B1LmMKaW5kZXggODlhMDUxYjQx
ZC4uODQzYmU4MjIxZiAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vY3B1LmMKKysrIGIvdGFy
Z2V0L2hleGFnb24vY3B1LmMKQEAgLTMzLDYgKzMzLDggQEAKICNpZm5kZWYgQ09ORklHX1VTRVJf
T05MWQogI2luY2x1ZGUgInN5c19tYWNyb3MuaCIKICNpbmNsdWRlICJxZW11L21haW4tbG9vcC5o
IgorI2luY2x1ZGUgImhleF9pbnRlcnJ1cHRzLmgiCisjaW5jbHVkZSAiaGV4c3dpLmgiCiAjZW5k
aWYKIAogc3RhdGljIHZvaWQgaGV4YWdvbl92NjZfY3B1X2luaXQoT2JqZWN0ICpvYmopIHsgfQpk
aWZmIC0tZ2l0IGEvdGFyZ2V0L2hleGFnb24vaGV4c3dpLmMgYi90YXJnZXQvaGV4YWdvbi9oZXhz
d2kuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwLi41ZmNmOWIyYmU5Ci0t
LSAvZGV2L251bGwKKysrIGIvdGFyZ2V0L2hleGFnb24vaGV4c3dpLmMKQEAgLTAsMCArMSwyNTgg
QEAKKy8qCisgKiBDb3B5cmlnaHQoYykgMjAxOS0yMDI1IFF1YWxjb21tIElubm92YXRpb24gQ2Vu
dGVyLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCisgKgorICogU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKyAqLworCisjaW5jbHVkZSAicWVtdS9vc2RlcC5oIgor
I2luY2x1ZGUgImNwdS5oIgorI2lmZGVmIENPTkZJR19VU0VSX09OTFkKKyNpbmNsdWRlICJleGVj
L2hlbHBlci1wcm90by5oIgorI2luY2x1ZGUgInFlbXUuaCIKKyNlbmRpZgorI2luY2x1ZGUgImV4
ZWMvY3B1X2xkc3QuaCIKKyNpbmNsdWRlICJleGVjL2V4ZWMtYWxsLmgiCisjaW5jbHVkZSAicWVt
dS9sb2cuaCIKKyNpbmNsdWRlICJxZW11L21haW4tbG9vcC5oIgorI2luY2x1ZGUgImFyY2guaCIK
KyNpbmNsdWRlICJpbnRlcm5hbC5oIgorI2luY2x1ZGUgIm1hY3Jvcy5oIgorI2luY2x1ZGUgInN5
c19tYWNyb3MuaCIKKyNpbmNsdWRlICJ0Y2cvdGNnLW9wLmgiCisjaWZuZGVmIENPTkZJR19VU0VS
X09OTFkKKyNpbmNsdWRlICJoZXhfbW11LmgiCisjaW5jbHVkZSAiaGV4c3dpLmgiCisjZW5kaWYK
KworI2lmbmRlZiBDT05GSUdfVVNFUl9PTkxZCisKKworc3RhdGljIHZvaWQgc2V0X2FkZHJlc3Nl
cyhDUFVIZXhhZ29uU3RhdGUgKmVudiwgdGFyZ2V0X3Vsb25nIHBjX29mZnNldCwKKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgdGFyZ2V0X3Vsb25nIGV4Y2VwdGlvbl9pbmRleCkKKworeworICAg
IGFyY2hfc2V0X3N5c3RlbV9yZWcoZW52LCBIRVhfU1JFR19FTFIsCisgICAgICAgICAgICAgICAg
ICAgICAgICBhcmNoX2dldF90aHJlYWRfcmVnKGVudiwgSEVYX1JFR19QQykgKyBwY19vZmZzZXQp
OworICAgIGFyY2hfc2V0X3RocmVhZF9yZWcoZW52LCBIRVhfUkVHX1BDLAorICAgICAgICAgICAg
ICAgICAgICAgICAgYXJjaF9nZXRfc3lzdGVtX3JlZyhlbnYsIEhFWF9TUkVHX0VWQikgfAorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIChleGNlcHRpb25faW5kZXggPDwgMikpOworfQorCitz
dGF0aWMgY29uc3QgY2hhciAqZXZlbnRfbmFtZVtdID0geworICAgIFtIRVhfRVZFTlRfUkVTRVRd
ID0gIkhFWF9FVkVOVF9SRVNFVCIsCisgICAgW0hFWF9FVkVOVF9JTVBSRUNJU0VdID0gIkhFWF9F
VkVOVF9JTVBSRUNJU0UiLAorICAgIFtIRVhfRVZFTlRfVExCX01JU1NfWF0gPSAiSEVYX0VWRU5U
X1RMQl9NSVNTX1giLAorICAgIFtIRVhfRVZFTlRfVExCX01JU1NfUlddID0gIkhFWF9FVkVOVF9U
TEJfTUlTU19SVyIsCisgICAgW0hFWF9FVkVOVF9UUkFQMF0gPSAiSEVYX0VWRU5UX1RSQVAwIiwK
KyAgICBbSEVYX0VWRU5UX1RSQVAxXSA9ICJIRVhfRVZFTlRfVFJBUDEiLAorICAgIFtIRVhfRVZF
TlRfRlBUUkFQXSA9ICJIRVhfRVZFTlRfRlBUUkFQIiwKKyAgICBbSEVYX0VWRU5UX0RFQlVHXSA9
ICJIRVhfRVZFTlRfREVCVUciLAorICAgIFtIRVhfRVZFTlRfSU5UMF0gPSAiSEVYX0VWRU5UX0lO
VDAiLAorICAgIFtIRVhfRVZFTlRfSU5UMV0gPSAiSEVYX0VWRU5UX0lOVDEiLAorICAgIFtIRVhf
RVZFTlRfSU5UMl0gPSAiSEVYX0VWRU5UX0lOVDIiLAorICAgIFtIRVhfRVZFTlRfSU5UM10gPSAi
SEVYX0VWRU5UX0lOVDMiLAorICAgIFtIRVhfRVZFTlRfSU5UNF0gPSAiSEVYX0VWRU5UX0lOVDQi
LAorICAgIFtIRVhfRVZFTlRfSU5UNV0gPSAiSEVYX0VWRU5UX0lOVDUiLAorICAgIFtIRVhfRVZF
TlRfSU5UNl0gPSAiSEVYX0VWRU5UX0lOVDYiLAorICAgIFtIRVhfRVZFTlRfSU5UN10gPSAiSEVY
X0VWRU5UX0lOVDciLAorICAgIFtIRVhfRVZFTlRfSU5UOF0gPSAiSEVYX0VWRU5UX0lOVDgiLAor
ICAgIFtIRVhfRVZFTlRfSU5UOV0gPSAiSEVYX0VWRU5UX0lOVDkiLAorICAgIFtIRVhfRVZFTlRf
SU5UQV0gPSAiSEVYX0VWRU5UX0lOVEEiLAorICAgIFtIRVhfRVZFTlRfSU5UQl0gPSAiSEVYX0VW
RU5UX0lOVEIiLAorICAgIFtIRVhfRVZFTlRfSU5UQ10gPSAiSEVYX0VWRU5UX0lOVEMiLAorICAg
IFtIRVhfRVZFTlRfSU5URF0gPSAiSEVYX0VWRU5UX0lOVEQiLAorICAgIFtIRVhfRVZFTlRfSU5U
RV0gPSAiSEVYX0VWRU5UX0lOVEUiLAorICAgIFtIRVhfRVZFTlRfSU5URl0gPSAiSEVYX0VWRU5U
X0lOVEYiCit9OworCit2b2lkIGhleGFnb25fY3B1X2RvX2ludGVycnVwdChDUFVTdGF0ZSAqY3Mp
CisKK3sKKyAgICBDUFVIZXhhZ29uU3RhdGUgKmVudiA9IGNwdV9lbnYoY3MpOworICAgIEJRTF9M
T0NLX0dVQVJEKCk7CisKKyAgICBxZW11X2xvZ19tYXNrKENQVV9MT0dfSU5ULCAiXHQlczogZXZl
bnQgMHgleDolcywgY2F1c2UgMHgleCglZClcbiIsCisgICAgICAgICAgICAgICAgICBfX2Z1bmNf
XywgY3MtPmV4Y2VwdGlvbl9pbmRleCwKKyAgICAgICAgICAgICAgICAgIGV2ZW50X25hbWVbY3Mt
PmV4Y2VwdGlvbl9pbmRleF0sIGVudi0+Y2F1c2VfY29kZSwKKyAgICAgICAgICAgICAgICAgIGVu
di0+Y2F1c2VfY29kZSk7CisKKyAgICBlbnYtPmxsc2NfYWRkciA9IH4wOworCisgICAgdWludDMy
X3Qgc3NyID0gYXJjaF9nZXRfc3lzdGVtX3JlZyhlbnYsIEhFWF9TUkVHX1NTUik7CisgICAgaWYg
KEdFVF9TU1JfRklFTEQoU1NSX0VYLCBzc3IpID09IDEpIHsKKyAgICAgICAgYXJjaF9zZXRfc3lz
dGVtX3JlZyhlbnYsIEhFWF9TUkVHX0RJQUcsIGVudi0+Y2F1c2VfY29kZSk7CisgICAgICAgIGVu
di0+Y2F1c2VfY29kZSA9IEhFWF9DQVVTRV9ET1VCTEVfRVhDRVBUOworICAgICAgICBjcy0+ZXhj
ZXB0aW9uX2luZGV4ID0gSEVYX0VWRU5UX1BSRUNJU0U7CisgICAgfQorCisgICAgc3dpdGNoIChj
cy0+ZXhjZXB0aW9uX2luZGV4KSB7CisgICAgY2FzZSBIRVhfRVZFTlRfVFJBUDA6CisgICAgICAg
IGlmIChlbnYtPmNhdXNlX2NvZGUgPT0gMCkgeworICAgICAgICAgICAgcWVtdV9sb2dfbWFzayhM
T0dfVU5JTVAsCisgICAgICAgICAgICAgICAgICAgICAgICAgICJ0cmFwMCBpcyB1bmhhbmRsZWQs
IG5vIHNlbWlob3N0aW5nIGF2YWlsYWJsZVxuIik7CisgICAgICAgIH0KKworICAgICAgICBoZXhh
Z29uX3Nzcl9zZXRfY2F1c2UoZW52LCBlbnYtPmNhdXNlX2NvZGUpOworICAgICAgICBzZXRfYWRk
cmVzc2VzKGVudiwgNCwgY3MtPmV4Y2VwdGlvbl9pbmRleCk7CisgICAgICAgIGJyZWFrOworCisg
ICAgY2FzZSBIRVhfRVZFTlRfVFJBUDE6CisgICAgICAgIGhleGFnb25fc3NyX3NldF9jYXVzZShl
bnYsIGVudi0+Y2F1c2VfY29kZSk7CisgICAgICAgIHNldF9hZGRyZXNzZXMoZW52LCA0LCBjcy0+
ZXhjZXB0aW9uX2luZGV4KTsKKyAgICAgICAgYnJlYWs7CisKKyAgICBjYXNlIEhFWF9FVkVOVF9U
TEJfTUlTU19YOgorICAgICAgICBzd2l0Y2ggKGVudi0+Y2F1c2VfY29kZSkgeworICAgICAgICBj
YXNlIEhFWF9DQVVTRV9UTEJNSVNTWF9DQVVTRV9OT1JNQUw6CisgICAgICAgIGNhc2UgSEVYX0NB
VVNFX1RMQk1JU1NYX0NBVVNFX05FWFRQQUdFOgorICAgICAgICAgICAgcWVtdV9sb2dfbWFzayhD
UFVfTE9HX01NVSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgIlRMQiBtaXNzIEVYIGV4Y2Vw
dGlvbiAoMHgleCkgY2F1Z2h0OiAiCisgICAgICAgICAgICAgICAgICAgICAgICAgICJDYXVzZSBj
b2RlICgweCV4KSAiCisgICAgICAgICAgICAgICAgICAgICAgICAgICJUSUQgPSAweCUiIFBSSXgz
MiAiLCBQQyA9IDB4JSIgUFJJeDMyCisgICAgICAgICAgICAgICAgICAgICAgICAgICIsIEJBRFZB
ID0gMHglIiBQUkl4MzIgIlxuIiwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgY3MtPmV4Y2Vw
dGlvbl9pbmRleCwgZW52LT5jYXVzZV9jb2RlLCBlbnYtPnRocmVhZElkLAorICAgICAgICAgICAg
ICAgICAgICAgICAgICBhcmNoX2dldF90aHJlYWRfcmVnKGVudiwgSEVYX1JFR19QQyksCisgICAg
ICAgICAgICAgICAgICAgICAgICAgIGFyY2hfZ2V0X3N5c3RlbV9yZWcoZW52LCBIRVhfU1JFR19C
QURWQSkpOworCisgICAgICAgICAgICBoZXhhZ29uX3Nzcl9zZXRfY2F1c2UoZW52LCBlbnYtPmNh
dXNlX2NvZGUpOworICAgICAgICAgICAgc2V0X2FkZHJlc3NlcyhlbnYsIDAsIGNzLT5leGNlcHRp
b25faW5kZXgpOworICAgICAgICAgICAgYnJlYWs7CisKKyAgICAgICAgZGVmYXVsdDoKKyAgICAg
ICAgICAgIGNwdV9hYm9ydChjcywKKyAgICAgICAgICAgICAgICAgICAgICAiMTpIZXhhZ29uIGV4
Y2VwdGlvbiAlZC8weCV4OiAiCisgICAgICAgICAgICAgICAgICAgICAgIlVua25vd24gY2F1c2Ug
Y29kZSAlZC8weCV4XG4iLAorICAgICAgICAgICAgICAgICAgICAgIGNzLT5leGNlcHRpb25faW5k
ZXgsIGNzLT5leGNlcHRpb25faW5kZXgsIGVudi0+Y2F1c2VfY29kZSwKKyAgICAgICAgICAgICAg
ICAgICAgICBlbnYtPmNhdXNlX2NvZGUpOworICAgICAgICAgICAgYnJlYWs7CisgICAgICAgIH0K
KyAgICAgICAgYnJlYWs7CisKKyAgICBjYXNlIEhFWF9FVkVOVF9UTEJfTUlTU19SVzoKKyAgICAg
ICAgc3dpdGNoIChlbnYtPmNhdXNlX2NvZGUpIHsKKyAgICAgICAgY2FzZSBIRVhfQ0FVU0VfVExC
TUlTU1JXX0NBVVNFX1JFQUQ6CisgICAgICAgIGNhc2UgSEVYX0NBVVNFX1RMQk1JU1NSV19DQVVT
RV9XUklURToKKyAgICAgICAgICAgIHFlbXVfbG9nX21hc2soQ1BVX0xPR19NTVUsCisgICAgICAg
ICAgICAgICAgICAgICAgICAgICJUTEIgbWlzcyBSVyBleGNlcHRpb24gKDB4JXgpIGNhdWdodDog
IgorICAgICAgICAgICAgICAgICAgICAgICAgICAiQ2F1c2UgY29kZSAoMHgleCkgIgorICAgICAg
ICAgICAgICAgICAgICAgICAgICAiVElEID0gMHglIiBQUkl4MzIgIiwgUEMgPSAweCUiIFBSSXgz
MgorICAgICAgICAgICAgICAgICAgICAgICAgICAiLCBCQURWQSA9IDB4JSIgUFJJeDMyICJcbiIs
CisgICAgICAgICAgICAgICAgICAgICAgICAgIGNzLT5leGNlcHRpb25faW5kZXgsIGVudi0+Y2F1
c2VfY29kZSwgZW52LT50aHJlYWRJZCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgZW52LT5n
cHJbSEVYX1JFR19QQ10sCisgICAgICAgICAgICAgICAgICAgICAgICAgIGFyY2hfZ2V0X3N5c3Rl
bV9yZWcoZW52LCBIRVhfU1JFR19CQURWQSkpOworCisgICAgICAgICAgICBoZXhhZ29uX3Nzcl9z
ZXRfY2F1c2UoZW52LCBlbnYtPmNhdXNlX2NvZGUpOworICAgICAgICAgICAgc2V0X2FkZHJlc3Nl
cyhlbnYsIDAsIGNzLT5leGNlcHRpb25faW5kZXgpOworICAgICAgICAgICAgLyogZW52LT5zcmVn
W0hFWF9TUkVHX0JBRFZBXSBpcyBzZXQgd2hlbiB0aGUgZXhjZXB0aW9uIGlzIHJhaXNlZCAqLwor
ICAgICAgICAgICAgYnJlYWs7CisKKyAgICAgICAgZGVmYXVsdDoKKyAgICAgICAgICAgIGNwdV9h
Ym9ydChjcywKKyAgICAgICAgICAgICAgICAgICAgICAiMjpIZXhhZ29uIGV4Y2VwdGlvbiAlZC8w
eCV4OiAiCisgICAgICAgICAgICAgICAgICAgICAgIlVua25vd24gY2F1c2UgY29kZSAlZC8weCV4
XG4iLAorICAgICAgICAgICAgICAgICAgICAgIGNzLT5leGNlcHRpb25faW5kZXgsIGNzLT5leGNl
cHRpb25faW5kZXgsIGVudi0+Y2F1c2VfY29kZSwKKyAgICAgICAgICAgICAgICAgICAgICBlbnYt
PmNhdXNlX2NvZGUpOworICAgICAgICAgICAgYnJlYWs7CisgICAgICAgIH0KKyAgICAgICAgYnJl
YWs7CisKKyAgICBjYXNlIEhFWF9FVkVOVF9GUFRSQVA6CisgICAgICAgIGhleGFnb25fc3NyX3Nl
dF9jYXVzZShlbnYsIGVudi0+Y2F1c2VfY29kZSk7CisgICAgICAgIGFyY2hfc2V0X3RocmVhZF9y
ZWcoZW52LCBIRVhfUkVHX1BDLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyY2hfZ2V0
X3N5c3RlbV9yZWcoZW52LCBIRVhfU1JFR19FVkIpIHwKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgKGNzLT5leGNlcHRpb25faW5kZXggPDwgMikpOworICAgICAgICBicmVhazsKKwor
ICAgIGNhc2UgSEVYX0VWRU5UX0RFQlVHOgorICAgICAgICBoZXhhZ29uX3Nzcl9zZXRfY2F1c2Uo
ZW52LCBlbnYtPmNhdXNlX2NvZGUpOworICAgICAgICBzZXRfYWRkcmVzc2VzKGVudiwgMCwgY3Mt
PmV4Y2VwdGlvbl9pbmRleCk7CisgICAgICAgIHFlbXVfbG9nX21hc2soTE9HX1VOSU1QLCAic2lu
Z2xlLXN0ZXAgZXhjZXB0aW9uIGlzIG5vdCBoYW5kbGVkXG4iKTsKKyAgICAgICAgYnJlYWs7CisK
KyAgICBjYXNlIEhFWF9FVkVOVF9QUkVDSVNFOgorICAgICAgICBzd2l0Y2ggKGVudi0+Y2F1c2Vf
Y29kZSkgeworICAgICAgICBjYXNlIEhFWF9DQVVTRV9GRVRDSF9OT19YUEFHRToKKyAgICAgICAg
Y2FzZSBIRVhfQ0FVU0VfRkVUQ0hfTk9fVVBBR0U6CisgICAgICAgIGNhc2UgSEVYX0NBVVNFX1BS
SVZfTk9fUkVBRDoKKyAgICAgICAgY2FzZSBIRVhfQ0FVU0VfUFJJVl9OT19VUkVBRDoKKyAgICAg
ICAgY2FzZSBIRVhfQ0FVU0VfUFJJVl9OT19XUklURToKKyAgICAgICAgY2FzZSBIRVhfQ0FVU0Vf
UFJJVl9OT19VV1JJVEU6CisgICAgICAgIGNhc2UgSEVYX0NBVVNFX01JU0FMSUdORURfTE9BRDoK
KyAgICAgICAgY2FzZSBIRVhfQ0FVU0VfTUlTQUxJR05FRF9TVE9SRToKKyAgICAgICAgY2FzZSBI
RVhfQ0FVU0VfUENfTk9UX0FMSUdORUQ6CisgICAgICAgICAgICBxZW11X2xvZ19tYXNrKENQVV9M
T0dfTU1VLAorICAgICAgICAgICAgICAgICAgICAgICAgICAiTU1VIHBlcm1pc3Npb24gZXhjZXB0
aW9uICgweCV4KSBjYXVnaHQ6ICIKKyAgICAgICAgICAgICAgICAgICAgICAgICAgIkNhdXNlIGNv
ZGUgKDB4JXgpICIKKyAgICAgICAgICAgICAgICAgICAgICAgICAgIlRJRCA9IDB4JSIgUFJJeDMy
ICIsIFBDID0gMHglIiBQUkl4MzIKKyAgICAgICAgICAgICAgICAgICAgICAgICAgIiwgQkFEVkEg
PSAweCUiIFBSSXgzMiAiXG4iLAorICAgICAgICAgICAgICAgICAgICAgICAgICBjcy0+ZXhjZXB0
aW9uX2luZGV4LCBlbnYtPmNhdXNlX2NvZGUsIGVudi0+dGhyZWFkSWQsCisgICAgICAgICAgICAg
ICAgICAgICAgICAgIGVudi0+Z3ByW0hFWF9SRUdfUENdLAorICAgICAgICAgICAgICAgICAgICAg
ICAgICBhcmNoX2dldF9zeXN0ZW1fcmVnKGVudiwgSEVYX1NSRUdfQkFEVkEpKTsKKworCisgICAg
ICAgICAgICBoZXhhZ29uX3Nzcl9zZXRfY2F1c2UoZW52LCBlbnYtPmNhdXNlX2NvZGUpOworICAg
ICAgICAgICAgc2V0X2FkZHJlc3NlcyhlbnYsIDAsIGNzLT5leGNlcHRpb25faW5kZXgpOworICAg
ICAgICAgICAgLyogZW52LT5zcmVnW0hFWF9TUkVHX0JBRFZBXSBpcyBzZXQgd2hlbiB0aGUgZXhj
ZXB0aW9uIGlzIHJhaXNlZCAqLworICAgICAgICAgICAgYnJlYWs7CisKKyAgICAgICAgY2FzZSBI
RVhfQ0FVU0VfRE9VQkxFX0VYQ0VQVDoKKyAgICAgICAgY2FzZSBIRVhfQ0FVU0VfUFJJVl9VU0VS
X05PX1NJTlNOOgorICAgICAgICBjYXNlIEhFWF9DQVVTRV9QUklWX1VTRVJfTk9fR0lOU046Cisg
ICAgICAgIGNhc2UgSEVYX0NBVVNFX0lOVkFMSURfT1BDT0RFOgorICAgICAgICBjYXNlIEhFWF9D
QVVTRV9OT19DT1BST0NfRU5BQkxFOgorICAgICAgICBjYXNlIEhFWF9DQVVTRV9OT19DT1BST0My
X0VOQUJMRToKKyAgICAgICAgY2FzZSBIRVhfQ0FVU0VfVU5TVVBPUlRFRF9IVlhfNjRCOgorICAg
ICAgICBjYXNlIEhFWF9DQVVTRV9SRUdfV1JJVEVfQ09ORkxJQ1Q6CisgICAgICAgIGNhc2UgSEVY
X0NBVVNFX1ZXQ1RSTF9XSU5ET1dfTUlTUzoKKyAgICAgICAgICAgIGhleGFnb25fc3NyX3NldF9j
YXVzZShlbnYsIGVudi0+Y2F1c2VfY29kZSk7CisgICAgICAgICAgICBzZXRfYWRkcmVzc2VzKGVu
diwgMCwgY3MtPmV4Y2VwdGlvbl9pbmRleCk7CisgICAgICAgICAgICBicmVhazsKKworICAgICAg
ICBjYXNlIEhFWF9DQVVTRV9DT1BST0NfTERTVDoKKyAgICAgICAgICAgIGhleGFnb25fc3NyX3Nl
dF9jYXVzZShlbnYsIGVudi0+Y2F1c2VfY29kZSk7CisgICAgICAgICAgICBzZXRfYWRkcmVzc2Vz
KGVudiwgMCwgY3MtPmV4Y2VwdGlvbl9pbmRleCk7CisgICAgICAgICAgICBicmVhazsKKworICAg
ICAgICBjYXNlIEhFWF9DQVVTRV9TVEFDS19MSU1JVDoKKyAgICAgICAgICAgIGhleGFnb25fc3Ny
X3NldF9jYXVzZShlbnYsIGVudi0+Y2F1c2VfY29kZSk7CisgICAgICAgICAgICBzZXRfYWRkcmVz
c2VzKGVudiwgMCwgY3MtPmV4Y2VwdGlvbl9pbmRleCk7CisgICAgICAgICAgICBicmVhazsKKwor
ICAgICAgICBkZWZhdWx0OgorICAgICAgICAgICAgY3B1X2Fib3J0KGNzLAorICAgICAgICAgICAg
ICAgICAgICAgICIzOkhleGFnb24gZXhjZXB0aW9uICVkLzB4JXg6ICIKKyAgICAgICAgICAgICAg
ICAgICAgICAiVW5rbm93biBjYXVzZSBjb2RlICVkLzB4JXhcbiIsCisgICAgICAgICAgICAgICAg
ICAgICAgY3MtPmV4Y2VwdGlvbl9pbmRleCwgY3MtPmV4Y2VwdGlvbl9pbmRleCwgZW52LT5jYXVz
ZV9jb2RlLAorICAgICAgICAgICAgICAgICAgICAgIGVudi0+Y2F1c2VfY29kZSk7CisgICAgICAg
ICAgICBicmVhazsKKyAgICAgICAgfQorICAgICAgICBicmVhazsKKworICAgIGNhc2UgSEVYX0VW
RU5UX0lNUFJFQ0lTRToKKyAgICAgICAgcWVtdV9sb2dfbWFzayhMT0dfVU5JTVAsCisgICAgICAg
ICAgICAgICAgIkltcHJlY2lzZSBleGNlcHRpb246IHRoaXMgY2FzZSBpcyBub3QgeWV0IGhhbmRs
ZWQiKTsKKyAgICAgICAgYnJlYWs7CisKKyAgICBkZWZhdWx0OgorICAgICAgICBxZW11X2xvZ19t
YXNrKExPR19VTklNUCwKKyAgICAgICAgICAgICAgICAiSGV4YWdvbiBVbnN1cHBvcnRlZCBleGNl
cHRpb24gMHgleC8weCV4XG4iLAorICAgICAgICAgICAgICAgICAgY3MtPmV4Y2VwdGlvbl9pbmRl
eCwgZW52LT5jYXVzZV9jb2RlKTsKKyAgICAgICAgYnJlYWs7CisgICAgfQorCisgICAgY3MtPmV4
Y2VwdGlvbl9pbmRleCA9IEhFWF9FVkVOVF9OT05FOworfQorCit2b2lkIHJlZ2lzdGVyX3RyYXBf
ZXhjZXB0aW9uKENQVUhleGFnb25TdGF0ZSAqZW52LCBpbnQgdHJhcHR5cGUsIGludCBpbW0sCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF91bG9uZyBQQykKK3sKKyAgICBDUFVT
dGF0ZSAqY3MgPSBlbnZfY3B1KGVudik7CisKKyAgICBjcy0+ZXhjZXB0aW9uX2luZGV4ID0gKHRy
YXB0eXBlID09IDApID8gSEVYX0VWRU5UX1RSQVAwIDogSEVYX0VWRU5UX1RSQVAxOworICAgIEFT
U0VSVF9ESVJFQ1RfVE9fR1VFU1RfVU5TRVQoZW52LCBjcy0+ZXhjZXB0aW9uX2luZGV4KTsKKwor
ICAgIGVudi0+Y2F1c2VfY29kZSA9IGltbTsKKyAgICBlbnYtPmdwcltIRVhfUkVHX1BDXSA9IFBD
OworICAgIGNwdV9sb29wX2V4aXQoY3MpOworfQorI2VuZGlmCmRpZmYgLS1naXQgYS90YXJnZXQv
aGV4YWdvbi9vcF9oZWxwZXIuYyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jCmluZGV4IDQy
ODA1ZDBmMWQuLjY4N2U3ZjQ1YzIgMTAwNjQ0Ci0tLSBhL3RhcmdldC9oZXhhZ29uL29wX2hlbHBl
ci5jCisrKyBiL3RhcmdldC9oZXhhZ29uL29wX2hlbHBlci5jCkBAIC0zOCw2ICszOCw3IEBACiAj
aW5jbHVkZSAiaGV4X21tdS5oIgogI2luY2x1ZGUgImh3L2ludGMvbDJ2aWMuaCIKICNpbmNsdWRl
ICJoZXhfaW50ZXJydXB0cy5oIgorI2luY2x1ZGUgImhleHN3aS5oIgogI2VuZGlmCiAKICNkZWZp
bmUgU0ZfQklBUyAgICAgICAgMTI3Ci0tIAoyLjM0LjEKCg==

