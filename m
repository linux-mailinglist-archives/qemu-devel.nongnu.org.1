Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 3343A7B2A07
	for <lists+qemu-devel@lfdr.de>; Fri, 29 Sep 2023 02:56:38 +0200 (CEST)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1qm1n0-00022X-Oz; Thu, 28 Sep 2023 20:55:30 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <raphael.norwitz@nutanix.com>)
 id 1qm1mz-00022I-28; Thu, 28 Sep 2023 20:55:29 -0400
Received: from mx0a-002c1b01.pphosted.com ([148.163.151.68])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <raphael.norwitz@nutanix.com>)
 id 1qm1mn-0001pW-Ve; Thu, 28 Sep 2023 20:55:27 -0400
Received: from pps.filterd (m0127837.ppops.net [127.0.0.1])
 by mx0a-002c1b01.pphosted.com (8.17.1.22/8.17.1.22) with ESMTP id
 38SJCSIV009674; Thu, 28 Sep 2023 17:55:09 -0700
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=nutanix.com; h=
 from:to:cc:subject:date:message-id:references:in-reply-to
 :content-type:content-id:content-transfer-encoding:mime-version;
 s=proofpoint20171006; bh=r8lAK7ml8ZXJlT47L2gSp8Z9oRD9PDUvOvkbaJ
 uCtWU=; b=tkRIBfk4xGyLyftjLFO1KQmt4xtI1zd24CoPjFpNpImWF68z2fQGvC
 EyHu76l8mpI3+F3dEvXRTd3NeP22xRNXyLsvnGQVWQGAFd3jqsBlOghyDyewxYXp
 CWOcgCPNLigfjsW8WiPwaoYrCeV3uUNU/z+NZBDC1uZED/C4EHJelQIwTnTYLAKC
 RWw4cs0UKsI7MA0HOS0aWl/jfdEKjIONWfadAVS55PZ8gXnxWLLhxvMqCCNxmu2C
 hm2nH2m9RWQ6mgNmQCjwTCeH2GVYnZ4h/c0DiBeGl9oZ6zzP5KQJ0WuDaO92UxqQ
 mEKTOuqC2sz3FiNxK6X/37lDP4xGx+mA==
Received: from nam11-bn8-obe.outbound.protection.outlook.com
 (mail-bn8nam11lp2168.outbound.protection.outlook.com [104.47.58.168])
 by mx0a-002c1b01.pphosted.com (PPS) with ESMTPS id 3t9ux5k2u4-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Thu, 28 Sep 2023 17:55:08 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=NTxyXNEKDnf1mq0yKrFs8IXbTw1PrPYK1v5Y47wVnI5aC3hNb4mXgGbZK++vaBkxFmWhswLmTaEd6QNgUWHQ7rMbwR4i+Ed3WSuSLyka551N2pI7OXRb2kYVwr/m4kY3htqjKrzGen5a9eOE2L5U5crbK4xnXU3Lz5GtkXm1TWWfoT4lIuaK+ikjSFPYo0uQGW8E2Gti6985WNolxVj9IvdFAwt+Gu0TMnlwbERlxGMRF8rXi2d6fGHR8o6zlYfE6QaEefcuXJBzvNKc7WhLrs1MvpOa/qxTUad2N3hE96gL8M/qniSwLAWXXHMIZ/MDP0fqwsAxbIW3XDzNVTaffA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=r8lAK7ml8ZXJlT47L2gSp8Z9oRD9PDUvOvkbaJuCtWU=;
 b=mjyaAkYIPIODcOUrxV0QyIwuXkox06jY2hJSwd25XcSsiF+90nfxzW7nLkfpiZEEzQj0xQGcFiCrB5i653x+toPG3jvZMGqbZ9R3+sJQeDzQEwgpMXQs+VogLLP5YnO/aaYQOKdpeHziCnGtd22U/aeF2tp80Zz6eCDy7ROidqPafGneZAE+iHqULdOaRFL9KgnU6haklCvoBWoiE5Tl4tU9kRKU5YurwEl0FHo1agoEs0HKwRPtzwiZainrtiBZUR4QGK5k3S6hY42yARxTZWVggmZ1yf41y8JpatVXINjzZpsDbTFr+bxBemRMYLOPopyRnmOkoZ+a0dqIweOKIA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=nutanix.com; dmarc=pass action=none header.from=nutanix.com;
 dkim=pass header.d=nutanix.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=nutanix.com;
 s=selector1;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=r8lAK7ml8ZXJlT47L2gSp8Z9oRD9PDUvOvkbaJuCtWU=;
 b=mVb4SxT6NQ8djFAk8aS4ZfxK6QZICgLcQXp1m0fK6g4IXfMxYDIieoxLBBgjRaYOc++Dt2kkbIbVGQ+2+AHHm7Hn/oAHyOjm+pV4QCLHe7Zbn+0yZIEUO4gFxI5xboRkCwzX8OaoIPtc5nO3pbJr9HzA3j0xpAZQvV3u3MzgRbFJrv5kDNpoDm+hCbH6eyf0dAYddBpE7Ht8RQOZA2TSTrmnrGyD2k3EDKhQ656oByoc1Sa2ENB7jm5FB3FETe2f4U+kNqqRTGIMSAsOiJT9v4TV8e6TXRhlfgZpOo0gvoD4hxED8yrRPupuvm5XGANMg1kaOXr0J7IsnhRj1pQS+A==
Received: from BL3PR02MB7938.namprd02.prod.outlook.com (2603:10b6:208:355::20)
 by CO1PR02MB8348.namprd02.prod.outlook.com (2603:10b6:303:163::7)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.6813.19; Fri, 29 Sep
 2023 00:55:06 +0000
Received: from BL3PR02MB7938.namprd02.prod.outlook.com
 ([fe80::136e:4c43:97d6:6c8d]) by BL3PR02MB7938.namprd02.prod.outlook.com
 ([fe80::136e:4c43:97d6:6c8d%7]) with mapi id 15.20.6838.024; Fri, 29 Sep 2023
 00:55:06 +0000
From: Raphael Norwitz <raphael.norwitz@nutanix.com>
To: Li Feng <fengli@smartx.com>
CC: Markus Armbruster <armbru@redhat.com>, "Michael S. Tsirkin"
 <mst@redhat.com>, Kevin Wolf <kwolf@redhat.com>, Hanna Reitz
 <hreitz@redhat.com>, Paolo Bonzini <pbonzini@redhat.com>, Fam Zheng
 <fam@euphon.net>, =?utf-8?B?QWxleCBCZW5uw6ll?= <alex.bennee@linaro.org>,
 Viresh Kumar <viresh.kumar@linaro.org>, "open list:Block layer core"
 <qemu-block@nongnu.org>, "open list:All patches CC here"
 <qemu-devel@nongnu.org>
Subject: Re: [PATCH v6 3/5] vhost-user-scsi: support reconnect to backend
Thread-Topic: [PATCH v6 3/5] vhost-user-scsi: support reconnect to backend
Thread-Index: AQHZ7UqOG1GkP1JdFEuteL/fiPKhgLAxBJaA
Date: Fri, 29 Sep 2023 00:55:06 +0000
Message-ID: <5FAE8470-7001-4AEC-A138-05E28FFF21F4@nutanix.com>
References: <20230721105205.1714449-1-fengli@smartx.com>
 <20230922114625.5786-1-fengli@smartx.com>
 <20230922114625.5786-4-fengli@smartx.com>
In-Reply-To: <20230922114625.5786-4-fengli@smartx.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-mailer: Apple Mail (2.3696.120.41.1.1)
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: BL3PR02MB7938:EE_|CO1PR02MB8348:EE_
x-ms-office365-filtering-correlation-id: acfeab60-77ae-4bf3-aa90-08dbc086b8ea
x-proofpoint-crosstenant: true
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: Y/yCMwOiEqdCQtJpbZV+dt6LufCLRdc38V1iJPf/6VlFvuSU94uLeRFRN+3NQIDKO2eQguVKYHube6W9L6lBVgtnYBFBe8sNiAKs1jo44nWtsGpCN3hYPrX9vEKuzvmnVum5H0KxWQGpCKXSUSpT9aUUIIyO40AivCMwmPtVYQiS1VUeOWIHOuaCsz/cIZReKwOoLybSuggPp8qHIzZrfN/cNwxYc0lflFfIZU4Y+46e98DykeAKaHIsL8YQwt//9wSsvPxY1xWq9XqAQRWNkWyj0xW8f434CXKTaHw2gDsfM2YOpVKzaL+OQiVOtbkyLSjH5hlMn9CSJ5+9NknQ2LWYhbothIRB51CVU7IRwTqFDfHTvBRCnl+Qs43wlOW8sUun3+DvxtY85C2YPuuDFQeOIA/9vQlie9Fc4JMHa9fIc0pM63wyaYmHlIt14ZInpdXsPp9A0EAMeLcV+hlRm3W8xVWJkCelKyawxxYRdFv68GnZSsie3C77fQTRUFjKpBDTSH/YEQbuexknHjzBC3QB7br7KznO1NaZ/yWeW7pV5uDYehzk1OonKplSAVdKK9oozivmyY3XjxVt/ditbVfRnGlyrADjwPMc5eTkHz6zFq8TwwMXV3qjDpdCIrEitP2fUJit1jr2NTrlTVybqw==
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:BL3PR02MB7938.namprd02.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(13230031)(396003)(366004)(376002)(136003)(39860400002)(346002)(230922051799003)(64100799003)(451199024)(1800799009)(186009)(71200400001)(53546011)(6512007)(6506007)(6486002)(8676002)(86362001)(36756003)(2906002)(76116006)(38070700005)(64756008)(33656002)(38100700002)(4326008)(83380400001)(8936002)(478600001)(5660300002)(316002)(122000001)(66946007)(26005)(6916009)(91956017)(41300700001)(30864003)(44832011)(2616005)(54906003)(66556008)(7416002)(66446008)(66476007)(45980500001);
 DIR:OUT; SFP:1102; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?TW1COUNwS0d0U1JZT3FLWjNsc0xqZkxBQm00L2JjVUJ2VFJnTmJ1MHMzL2Qy?=
 =?utf-8?B?dTR5cnJFY0JXam5tbFpMbXZSUFQvVGMyRGE1VHdmZXI4YTg1SlBveVh3TE5m?=
 =?utf-8?B?bmozM0xVQUhBUDF6aWdFNmVMZWUrM09vNE1lNHowNi9RaVVjb2pwS2dBdmFm?=
 =?utf-8?B?eEJVSUpKZGFjKzdyazk1RjNVZ3FKS2Z5eW01c0JtNU9peEs4QmxMT3JMZXY1?=
 =?utf-8?B?ZkpIQldodnoyTTFNcDlyZEdTU3ZoZm5ZbEcxYW5WcmRERlQ2Z0grc1BtbDJN?=
 =?utf-8?B?L09QWlpOMmZxOUtsU3VnNlp4YUN3R2dCcWhZVmhyNFR5V0RZbHpPbWNPN2JM?=
 =?utf-8?B?WVIza2lpSmlVTllPVXp6Q0xMeUlJQmJGQzhUN2dzbkE2ZUtsbGFjMU1TaGFJ?=
 =?utf-8?B?bjdJa1VmTUN3TEJDVXhIWnhpZWpTUGZKbWlsSmJPZVJwRUIxaURKREpaczNQ?=
 =?utf-8?B?dEdCaHJYTUhNREV1cklLWWdaZEtPd0pPUEhtNUR3UjJWdmpqRFBxMTFVdkE5?=
 =?utf-8?B?MGhjcXA1TzY4UmlKdnBoT2t6aXg1YTJWRGtPZElJUlpxQ1lKaGVDYkN3UDJK?=
 =?utf-8?B?WE40aEJsRXFvcnl1bTg0OXhUOGk0RHBwd0UxM20vaW1Fdmptb2kraVV1N09a?=
 =?utf-8?B?MHYxWEN6SUVPZ2kyNnRNNm9sRFJzakZWaDlhN1IrMUxJUy9jVXpWbjl5dGZM?=
 =?utf-8?B?bU9Ha3RBTlFVaGd3OTFGM0h3Rlk0bTZWTlE4VEZ6d0dobnpCbi9uelhoVk9E?=
 =?utf-8?B?NUVYWWRMenJLY2xVTk52SGcwYXBSRzIxNUxXVjA2WDBpc2E4YkJqVHhXaFdD?=
 =?utf-8?B?elJwb1dteVBicUdkMjhmWi9QbWllY1JQcVQxQ3RDMEx6Z1oxNFVTb2tTNTN1?=
 =?utf-8?B?UVFidDBaQkh0K1hSQ3JveERWL21QbksrYUkyVi9sVk4vb25TV2lhMGxNRXJm?=
 =?utf-8?B?QXZtVmVVSHJpZEJpVlhSWVhrTkl0N1JKL09uTERPS0s2ajNYMXp4R25yZTdt?=
 =?utf-8?B?L05iOFpWZk5CanR2NEZGUnVjbEU3RnVub21pNEQydzQyUDE0TkxreVlUd2tN?=
 =?utf-8?B?OXBLRXFNTDNrWUpsMHU4U1hxUlBXQVpNK1MrQ0dYL0J2cVY2QzNvMThoM0pq?=
 =?utf-8?B?aktYaEs4Z05KTDFOU0RTUGxoZXlHOW9XMUhwaDRzcjAvTkR3TzN5Y0VPcU9a?=
 =?utf-8?B?T1A0N3ZwaHN3TC9YMWZFb28wMWs1aTJDblU0WnpTaHJTZnp2cHF1YjJDV1JC?=
 =?utf-8?B?TXVwVVJUL0E0b2xoSjQzTnUzK29wSnFFOFQvLzhobXZsS2prTEx6ZGZ5QVBu?=
 =?utf-8?B?UXFBLzNIVmM4NmFDamt1dVllRVIrVlMvNU1HNExpc2FmVnA0VEJlQjB1OFpv?=
 =?utf-8?B?WnlsWTMyU3c1Zy9sNnVSYVhyUXZtT3B3eHBydlZaZ055T0VqVzdrK2swLzUz?=
 =?utf-8?B?cGpiQUN4TzdhQUdnajExbU1TMSt4VVhGV1Y0ZmFKV0trQmFzcHJtdFpTSXJK?=
 =?utf-8?B?QXdmRUVWalNxdmorcnp3bWxXVlorUXc0eCtKNzMwWEJhVFdLa1E3ZlVDQnZD?=
 =?utf-8?B?bzhFWEI5NmFnRWMrQW1yOG9NbzZYN3YzVENKaVNEM3ZBbStpYzVVYWJJNy9y?=
 =?utf-8?B?dmZCam5CK2V2N0hqUHFVZmRFV1Z2dUNiQ3R5QlRNY1l4RVdrdU1meWxjUmRL?=
 =?utf-8?B?TG5lOHpja05nSmdQNUFwL2NiZXZFaGZBRXFRa3hLa3BaN1dJYWpMeGNrak9M?=
 =?utf-8?B?RGFSVXFaWXZTbmdIVmJXZitwWWY0RnNySGFTUXIweWVvR2t4d1psN1YrVENa?=
 =?utf-8?B?WE9HZUlpZFB3eXJkV1lpU0FjdTdReEVlTkFQS2dwQlU5ekkzSVZXSDZzY2dI?=
 =?utf-8?B?QmFMMHNhUVJZQm03Vk0zZGtqNk5hWUIxNjFQeVFHZ3JOT0lacCtEMmVQYWZU?=
 =?utf-8?B?bVVJUmMwcjVZZUhaUTlnK0E4M25KQmJiellySWpiMG54ckNkdXVMdDF0Rmpp?=
 =?utf-8?B?RzlHQTdXRWJTaEN6ZHNiM1YydU9xQUpCLzJleGdLZ1IzWGxCY1IwU0Y2bmli?=
 =?utf-8?B?QW15dlZjMHc0L0JLWWYwL2RYMTVuOGIxV2NYV2YyNjhGYitnWGVhaEs1ZGxP?=
 =?utf-8?B?dVo4RDJTeEFEckdtS1FrOFBHN3grbkJYWU1QNGZqc2xmNGp1MC9GYmg4emR0?=
 =?utf-8?B?VUE9PQ==?=
Content-Type: text/plain; charset="utf-8"
Content-ID: <79CFA8D70B11CE468D109D942368F68D@namprd02.prod.outlook.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: nutanix.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: BL3PR02MB7938.namprd02.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: acfeab60-77ae-4bf3-aa90-08dbc086b8ea
X-MS-Exchange-CrossTenant-originalarrivaltime: 29 Sep 2023 00:55:06.3027 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: bb047546-786f-4de1-bd75-24e5b6f79043
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: dMSIxflHmggASS2lkyI+/MOEDZWxGxvqJ/Bn6qiEfJMywomH289zzmUHGJDfUavxoSxnSdlB1PCCrhxHM4siK56zGssl5Jo6bdKhQEMeyuM=
X-MS-Exchange-Transport-CrossTenantHeadersStamped: CO1PR02MB8348
X-Proofpoint-GUID: c2GOAYJhwo-ufyWyr2aBHr80up43VnGN
X-Proofpoint-ORIG-GUID: c2GOAYJhwo-ufyWyr2aBHr80up43VnGN
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.267,Aquarius:18.0.980,Hydra:6.0.619,FMLib:17.11.176.26
 definitions=2023-09-28_24,2023-09-28_03,2023-05-22_02
X-Proofpoint-Spam-Reason: safe
Received-SPF: pass client-ip=148.163.151.68;
 envelope-from=raphael.norwitz@nutanix.com; helo=mx0a-002c1b01.pphosted.com
X-Spam_score_int: -20
X-Spam_score: -2.1
X-Spam_bar: --
X-Spam_report: (-2.1 / 5.0 requ) BAYES_00=-1.9, DKIMWL_WL_HIGH=-0.001,
 DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1,
 SPF_HELO_NONE=0.001, SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

T25lIGNvbW1lbnQgb24gdGhlIGxvZ2dpbmcgc3R1ZmYgaW4gdmhvc3Qtc2NzaS4gQXMgZmFyIGFz
IEkgY2FuIHRlbGwgdGhlIGxvZ2dpbmcgaW4gdmhvc3QtdXNlci1zY3NpIGxvb2tzIGdvb2QuDQoN
Ck1hcmt1cyAtIGRvZXMgdGhpcyBsb29rIGJldHRlciB0byB5b3U/IE90aGVyd2lzZSBkbyB5b3Ug
dGhpbmsgd2Ugc2hvdWxkIGFsc28gZml4IHVwIHRoZSB2aG9zdC11c2VyLWJsayByZWFsaXplIGZ1
bmN0aW9uPw0KDQo+IE9uIFNlcCAyMiwgMjAyMywgYXQgNzo0NiBBTSwgTGkgRmVuZyA8ZmVuZ2xp
QHNtYXJ0eC5jb20+IHdyb3RlOg0KPiANCj4gSWYgdGhlIGJhY2tlbmQgY3Jhc2hlcyBhbmQgcmVz
dGFydHMsIHRoZSBkZXZpY2UgaXMgYnJva2VuLg0KPiBUaGlzIHBhdGNoIGFkZHMgcmVjb25uZWN0
IGZvciB2aG9zdC11c2VyLXNjc2kuDQo+IA0KPiBUaGlzIHBhdGNoIGFsc28gaW1wcm92ZXMgdGhl
IGVycm9yIG1lc3NhZ2VzLCBhbmQgcmVwb3J0cyBzb21lIHNpbGVudCBlcnJvcnMuDQo+IA0KPiBU
ZXN0ZWQgd2l0aCBzcGRrIGJhY2tlbmQuDQo+IA0KPiBTaWduZWQtb2ZmLWJ5OiBMaSBGZW5nIDxm
ZW5nbGlAc21hcnR4LmNvbT4NCj4gLS0tDQo+IGh3L3Njc2kvdmhvc3Qtc2NzaS1jb21tb24uYyAg
ICAgICAgICAgfCAgMTYgKy0NCj4gaHcvc2NzaS92aG9zdC1zY3NpLmMgICAgICAgICAgICAgICAg
ICB8ICAgNSArLQ0KPiBody9zY3NpL3Zob3N0LXVzZXItc2NzaS5jICAgICAgICAgICAgIHwgMjA0
ICsrKysrKysrKysrKysrKysrKysrKysrLS0tDQo+IGluY2x1ZGUvaHcvdmlydGlvL3Zob3N0LXNj
c2ktY29tbW9uLmggfCAgIDIgKy0NCj4gaW5jbHVkZS9ody92aXJ0aW8vdmhvc3QtdXNlci1zY3Np
LmggICB8ICAgNCArDQo+IDUgZmlsZXMgY2hhbmdlZCwgMjAxIGluc2VydGlvbnMoKyksIDMwIGRl
bGV0aW9ucygtKQ0KPiANCj4gZGlmZiAtLWdpdCBhL2h3L3Njc2kvdmhvc3Qtc2NzaS1jb21tb24u
YyBiL2h3L3Njc2kvdmhvc3Qtc2NzaS1jb21tb24uYw0KPiBpbmRleCBhNjFjZDBlOTA3Li40Yzg2
MzcwNDVkIDEwMDY0NA0KPiAtLS0gYS9ody9zY3NpL3Zob3N0LXNjc2ktY29tbW9uLmMNCj4gKysr
IGIvaHcvc2NzaS92aG9zdC1zY3NpLWNvbW1vbi5jDQo+IEBAIC0xNiw2ICsxNiw3IEBADQo+ICAq
Lw0KPiANCj4gI2luY2x1ZGUgInFlbXUvb3NkZXAuaCINCj4gKyNpbmNsdWRlICJxYXBpL2Vycm9y
LmgiDQo+ICNpbmNsdWRlICJxZW11L2Vycm9yLXJlcG9ydC5oIg0KPiAjaW5jbHVkZSAicWVtdS9t
b2R1bGUuaCINCj4gI2luY2x1ZGUgImh3L3ZpcnRpby92aG9zdC5oIg0KPiBAQCAtMjUsNyArMjYs
NyBAQA0KPiAjaW5jbHVkZSAiaHcvdmlydGlvL3ZpcnRpby1hY2Nlc3MuaCINCj4gI2luY2x1ZGUg
Imh3L2Z3LXBhdGgtcHJvdmlkZXIuaCINCj4gDQo+IC1pbnQgdmhvc3Rfc2NzaV9jb21tb25fc3Rh
cnQoVkhvc3RTQ1NJQ29tbW9uICp2c2MpDQo+ICtpbnQgdmhvc3Rfc2NzaV9jb21tb25fc3RhcnQo
Vkhvc3RTQ1NJQ29tbW9uICp2c2MsIEVycm9yICoqZXJycCkNCj4gew0KPiAgICAgaW50IHJldCwg
aTsNCj4gICAgIFZpcnRJT0RldmljZSAqdmRldiA9IFZJUlRJT19ERVZJQ0UodnNjKTsNCj4gQEAg
LTM1LDE4ICszNiwxOSBAQCBpbnQgdmhvc3Rfc2NzaV9jb21tb25fc3RhcnQoVkhvc3RTQ1NJQ29t
bW9uICp2c2MpDQo+ICAgICBWaXJ0SU9TQ1NJQ29tbW9uICp2cyA9IChWaXJ0SU9TQ1NJQ29tbW9u
ICopdnNjOw0KPiANCj4gICAgIGlmICghay0+c2V0X2d1ZXN0X25vdGlmaWVycykgew0KPiAtICAg
ICAgICBlcnJvcl9yZXBvcnQoImJpbmRpbmcgZG9lcyBub3Qgc3VwcG9ydCBndWVzdCBub3RpZmll
cnMiKTsNCj4gKyAgICAgICAgZXJyb3Jfc2V0ZyhlcnJwLCAiYmluZGluZyBkb2VzIG5vdCBzdXBw
b3J0IGd1ZXN0IG5vdGlmaWVycyIpOw0KPiAgICAgICAgIHJldHVybiAtRU5PU1lTOw0KPiAgICAg
fQ0KPiANCj4gICAgIHJldCA9IHZob3N0X2Rldl9lbmFibGVfbm90aWZpZXJzKCZ2c2MtPmRldiwg
dmRldik7DQo+ICAgICBpZiAocmV0IDwgMCkgew0KPiArICAgICAgICBlcnJvcl9zZXRnX2Vycm5v
KGVycnAsIC1yZXQsICJFcnJvciBlbmFibGluZyBob3N0IG5vdGlmaWVycyIpOw0KPiAgICAgICAg
IHJldHVybiByZXQ7DQo+ICAgICB9DQo+IA0KPiAgICAgcmV0ID0gay0+c2V0X2d1ZXN0X25vdGlm
aWVycyhxYnVzLT5wYXJlbnQsIHZzYy0+ZGV2Lm52cXMsIHRydWUpOw0KPiAgICAgaWYgKHJldCA8
IDApIHsNCj4gLSAgICAgICAgZXJyb3JfcmVwb3J0KCJFcnJvciBiaW5kaW5nIGd1ZXN0IG5vdGlm
aWVyIik7DQo+ICsgICAgICAgIGVycm9yX3NldGdfZXJybm8oZXJycCwgLXJldCwgIkVycm9yIGJp
bmRpbmcgZ3Vlc3Qgbm90aWZpZXIiKTsNCj4gICAgICAgICBnb3RvIGVycl9ob3N0X25vdGlmaWVy
czsNCj4gICAgIH0NCj4gDQo+IEBAIC01NCw3ICs1Niw3IEBAIGludCB2aG9zdF9zY3NpX2NvbW1v
bl9zdGFydChWSG9zdFNDU0lDb21tb24gKnZzYykNCj4gDQo+ICAgICByZXQgPSB2aG9zdF9kZXZf
cHJlcGFyZV9pbmZsaWdodCgmdnNjLT5kZXYsIHZkZXYpOw0KPiAgICAgaWYgKHJldCA8IDApIHsN
Cj4gLSAgICAgICAgZXJyb3JfcmVwb3J0KCJFcnJvciBzZXR0aW5nIGluZmxpZ2h0IGZvcm1hdDog
JWQiLCAtcmV0KTsNCj4gKyAgICAgICAgZXJyb3Jfc2V0Z19lcnJubyhlcnJwLCAtcmV0LCAiRXJy
b3Igc2V0dGluZyBpbmZsaWdodCBmb3JtYXQiKTsNCj4gICAgICAgICBnb3RvIGVycl9ndWVzdF9u
b3RpZmllcnM7DQo+ICAgICB9DQo+IA0KPiBAQCAtNjQsMjEgKzY2LDIxIEBAIGludCB2aG9zdF9z
Y3NpX2NvbW1vbl9zdGFydChWSG9zdFNDU0lDb21tb24gKnZzYykNCj4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHZzLT5jb25mLnZpcnRxdWV1ZV9zaXplLA0KPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnNjLT5pbmZsaWdodCk7DQo+ICAg
ICAgICAgICAgIGlmIChyZXQgPCAwKSB7DQo+IC0gICAgICAgICAgICAgICAgZXJyb3JfcmVwb3J0
KCJFcnJvciBnZXR0aW5nIGluZmxpZ2h0OiAlZCIsIC1yZXQpOw0KPiArICAgICAgICAgICAgICAg
IGVycm9yX3NldGdfZXJybm8oZXJycCwgLXJldCwgIkVycm9yIGdldHRpbmcgaW5mbGlnaHQiKTsN
Cj4gICAgICAgICAgICAgICAgIGdvdG8gZXJyX2d1ZXN0X25vdGlmaWVyczsNCj4gICAgICAgICAg
ICAgfQ0KPiAgICAgICAgIH0NCj4gDQo+ICAgICAgICAgcmV0ID0gdmhvc3RfZGV2X3NldF9pbmZs
aWdodCgmdnNjLT5kZXYsIHZzYy0+aW5mbGlnaHQpOw0KPiAgICAgICAgIGlmIChyZXQgPCAwKSB7
DQo+IC0gICAgICAgICAgICBlcnJvcl9yZXBvcnQoIkVycm9yIHNldHRpbmcgaW5mbGlnaHQ6ICVk
IiwgLXJldCk7DQo+ICsgICAgICAgICAgICBlcnJvcl9zZXRnX2Vycm5vKGVycnAsIC1yZXQsICJF
cnJvciBzZXR0aW5nIGluZmxpZ2h0Iik7DQo+ICAgICAgICAgICAgIGdvdG8gZXJyX2d1ZXN0X25v
dGlmaWVyczsNCj4gICAgICAgICB9DQo+ICAgICB9DQo+IA0KPiAgICAgcmV0ID0gdmhvc3RfZGV2
X3N0YXJ0KCZ2c2MtPmRldiwgdmRldiwgdHJ1ZSk7DQo+ICAgICBpZiAocmV0IDwgMCkgew0KPiAt
ICAgICAgICBlcnJvcl9yZXBvcnQoIkVycm9yIHN0YXJ0IHZob3N0IGRldiIpOw0KPiArICAgICAg
ICBlcnJvcl9zZXRnX2Vycm5vKGVycnAsIC1yZXQsICJFcnJvciBzdGFydGluZyB2aG9zdCBkZXYi
KTsNCj4gICAgICAgICBnb3RvIGVycl9ndWVzdF9ub3RpZmllcnM7DQo+ICAgICB9DQo+IA0KPiBk
aWZmIC0tZ2l0IGEvaHcvc2NzaS92aG9zdC1zY3NpLmMgYi9ody9zY3NpL3Zob3N0LXNjc2kuYw0K
PiBpbmRleCA0NDNmNjdkYWE0Li4wMWEzYWI0Mjc3IDEwMDY0NA0KPiAtLS0gYS9ody9zY3NpL3Zo
b3N0LXNjc2kuYw0KPiArKysgYi9ody9zY3NpL3Zob3N0LXNjc2kuYw0KPiBAQCAtNzUsNiArNzUs
NyBAQCBzdGF0aWMgaW50IHZob3N0X3Njc2lfc3RhcnQoVkhvc3RTQ1NJICpzKQ0KPiAgICAgaW50
IHJldCwgYWJpX3ZlcnNpb247DQo+ICAgICBWSG9zdFNDU0lDb21tb24gKnZzYyA9IFZIT1NUX1ND
U0lfQ09NTU9OKHMpOw0KPiAgICAgY29uc3QgVmhvc3RPcHMgKnZob3N0X29wcyA9IHZzYy0+ZGV2
LnZob3N0X29wczsNCj4gKyAgICBFcnJvciAqbG9jYWxfZXJyID0gTlVMTDsNCj4gDQo+ICAgICBy
ZXQgPSB2aG9zdF9vcHMtPnZob3N0X3Njc2lfZ2V0X2FiaV92ZXJzaW9uKCZ2c2MtPmRldiwgJmFi
aV92ZXJzaW9uKTsNCj4gICAgIGlmIChyZXQgPCAwKSB7DQo+IEBAIC04OCwxNCArODksMTQgQEAg
c3RhdGljIGludCB2aG9zdF9zY3NpX3N0YXJ0KFZIb3N0U0NTSSAqcykNCj4gICAgICAgICByZXR1
cm4gLUVOT1NZUzsNCj4gICAgIH0NCj4gDQo+IC0gICAgcmV0ID0gdmhvc3Rfc2NzaV9jb21tb25f
c3RhcnQodnNjKTsNCj4gKyAgICByZXQgPSB2aG9zdF9zY3NpX2NvbW1vbl9zdGFydCh2c2MsICZs
b2NhbF9lcnIpOw0KPiAgICAgaWYgKHJldCA8IDApIHsNCg0KV2h5IGFyZW7igJl0IHlvdSByZXBv
cnRpbmcgdGhlIGVycm9yIGhlcmU/DQoNCj4gICAgICAgICByZXR1cm4gcmV0Ow0KPiAgICAgfQ0K
PiANCj4gICAgIHJldCA9IHZob3N0X3Njc2lfc2V0X2VuZHBvaW50KHMpOw0KPiAgICAgaWYgKHJl
dCA8IDApIHsNCj4gLSAgICAgICAgZXJyb3JfcmVwb3J0KCJFcnJvciBzZXR0aW5nIHZob3N0LXNj
c2kgZW5kcG9pbnQiKTsNCj4gKyAgICAgICAgZXJyb3JfcmVwb3J0Zl9lcnIobG9jYWxfZXJyLCAi
RXJyb3Igc2V0dGluZyB2aG9zdC1zY3NpIGVuZHBvaW50Iik7DQo+ICAgICAgICAgdmhvc3Rfc2Nz
aV9jb21tb25fc3RvcCh2c2MpOw0KPiAgICAgfQ0KPiANCj4gZGlmZiAtLWdpdCBhL2h3L3Njc2kv
dmhvc3QtdXNlci1zY3NpLmMgYi9ody9zY3NpL3Zob3N0LXVzZXItc2NzaS5jDQo+IGluZGV4IGVl
OTliMTllN2EuLmRjMTA5MTU0YWQgMTAwNjQ0DQo+IC0tLSBhL2h3L3Njc2kvdmhvc3QtdXNlci1z
Y3NpLmMNCj4gKysrIGIvaHcvc2NzaS92aG9zdC11c2VyLXNjc2kuYw0KPiBAQCAtNDMsMjYgKzQz
LDU2IEBAIGVudW0gVmhvc3RVc2VyUHJvdG9jb2xGZWF0dXJlIHsNCj4gICAgIFZIT1NUX1VTRVJf
UFJPVE9DT0xfRl9SRVNFVF9ERVZJQ0UgPSAxMywNCj4gfTsNCj4gDQo+ICtzdGF0aWMgaW50IHZo
b3N0X3VzZXJfc2NzaV9zdGFydChWSG9zdFVzZXJTQ1NJICpzLCBFcnJvciAqKmVycnApDQo+ICt7
DQo+ICsgICAgVkhvc3RTQ1NJQ29tbW9uICp2c2MgPSBWSE9TVF9TQ1NJX0NPTU1PTihzKTsNCj4g
KyAgICBpbnQgcmV0Ow0KPiArDQo+ICsgICAgcmV0ID0gdmhvc3Rfc2NzaV9jb21tb25fc3RhcnQo
dnNjLCBlcnJwKTsNCj4gKyAgICBzLT5zdGFydGVkX3Z1ID0gKHJldCA8IDAgPyBmYWxzZSA6IHRy
dWUpOw0KPiArDQo+ICsgICAgcmV0dXJuIHJldDsNCj4gK30NCj4gKw0KPiArc3RhdGljIHZvaWQg
dmhvc3RfdXNlcl9zY3NpX3N0b3AoVkhvc3RVc2VyU0NTSSAqcykNCj4gK3sNCj4gKyAgICBWSG9z
dFNDU0lDb21tb24gKnZzYyA9IFZIT1NUX1NDU0lfQ09NTU9OKHMpOw0KPiArDQo+ICsgICAgaWYg
KCFzLT5zdGFydGVkX3Z1KSB7DQo+ICsgICAgICAgIHJldHVybjsNCj4gKyAgICB9DQo+ICsgICAg
cy0+c3RhcnRlZF92dSA9IGZhbHNlOw0KPiArDQo+ICsgICAgdmhvc3Rfc2NzaV9jb21tb25fc3Rv
cCh2c2MpOw0KPiArfQ0KPiArDQo+IHN0YXRpYyB2b2lkIHZob3N0X3VzZXJfc2NzaV9zZXRfc3Rh
dHVzKFZpcnRJT0RldmljZSAqdmRldiwgdWludDhfdCBzdGF0dXMpDQo+IHsNCj4gICAgIFZIb3N0
VXNlclNDU0kgKnMgPSAoVkhvc3RVc2VyU0NTSSAqKXZkZXY7DQo+ICsgICAgRGV2aWNlU3RhdGUg
KmRldiA9ICZzLT5wYXJlbnRfb2JqLnBhcmVudF9vYmoucGFyZW50X29iai5wYXJlbnRfb2JqOw0K
PiAgICAgVkhvc3RTQ1NJQ29tbW9uICp2c2MgPSBWSE9TVF9TQ1NJX0NPTU1PTihzKTsNCj4gLSAg
ICBib29sIHN0YXJ0ID0gKHN0YXR1cyAmIFZJUlRJT19DT05GSUdfU19EUklWRVJfT0spICYmIHZk
ZXYtPnZtX3J1bm5pbmc7DQo+ICsgICAgVmlydElPU0NTSUNvbW1vbiAqdnMgPSBWSVJUSU9fU0NT
SV9DT01NT04oZGV2KTsNCj4gKyAgICBib29sIHNob3VsZF9zdGFydCA9IHZpcnRpb19kZXZpY2Vf
c2hvdWxkX3N0YXJ0KHZkZXYsIHN0YXR1cyk7DQo+ICsgICAgRXJyb3IgKmxvY2FsX2VyciA9IE5V
TEw7DQo+ICsgICAgaW50IHJldDsNCj4gDQo+IC0gICAgaWYgKHZob3N0X2Rldl9pc19zdGFydGVk
KCZ2c2MtPmRldikgPT0gc3RhcnQpIHsNCj4gKyAgICBpZiAoIXMtPmNvbm5lY3RlZCkgew0KPiAg
ICAgICAgIHJldHVybjsNCj4gICAgIH0NCj4gDQo+IC0gICAgaWYgKHN0YXJ0KSB7DQo+IC0gICAg
ICAgIGludCByZXQ7DQo+ICsgICAgaWYgKHZob3N0X2Rldl9pc19zdGFydGVkKCZ2c2MtPmRldikg
PT0gc2hvdWxkX3N0YXJ0KSB7DQo+ICsgICAgICAgIHJldHVybjsNCj4gKyAgICB9DQo+IA0KPiAt
ICAgICAgICByZXQgPSB2aG9zdF9zY3NpX2NvbW1vbl9zdGFydCh2c2MpOw0KPiArICAgIGlmIChz
aG91bGRfc3RhcnQpIHsNCj4gKyAgICAgICAgcmV0ID0gdmhvc3RfdXNlcl9zY3NpX3N0YXJ0KHMs
ICZsb2NhbF9lcnIpOw0KPiAgICAgICAgIGlmIChyZXQgPCAwKSB7DQo+IC0gICAgICAgICAgICBl
cnJvcl9yZXBvcnQoInVuYWJsZSB0byBzdGFydCB2aG9zdC11c2VyLXNjc2k6ICVzIiwgc3RyZXJy
b3IoLXJldCkpOw0KPiAtICAgICAgICAgICAgZXhpdCgxKTsNCj4gKyAgICAgICAgICAgIGVycm9y
X3JlcG9ydGZfZXJyKGxvY2FsX2VyciwgInVuYWJsZSB0byBzdGFydCB2aG9zdC11c2VyLXNjc2k6
ICVzIiwNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVycm9yKC1yZXQpKTsN
Cj4gKyAgICAgICAgICAgIHFlbXVfY2hyX2ZlX2Rpc2Nvbm5lY3QoJnZzLT5jb25mLmNoYXJkZXYp
Ow0KPiAgICAgICAgIH0NCj4gICAgIH0gZWxzZSB7DQo+IC0gICAgICAgIHZob3N0X3Njc2lfY29t
bW9uX3N0b3AodnNjKTsNCj4gKyAgICAgICAgdmhvc3RfdXNlcl9zY3NpX3N0b3Aocyk7DQo+ICAg
ICB9DQo+IH0NCj4gDQo+IEBAIC04OSwxNCArMTE5LDEyNyBAQCBzdGF0aWMgdm9pZCB2aG9zdF9k
dW1teV9oYW5kbGVfb3V0cHV0KFZpcnRJT0RldmljZSAqdmRldiwgVmlydFF1ZXVlICp2cSkNCj4g
ew0KPiB9DQo+IA0KPiArc3RhdGljIGludCB2aG9zdF91c2VyX3Njc2lfY29ubmVjdChEZXZpY2VT
dGF0ZSAqZGV2LCBFcnJvciAqKmVycnApDQo+ICt7DQo+ICsgICAgVmlydElPRGV2aWNlICp2ZGV2
ID0gVklSVElPX0RFVklDRShkZXYpOw0KPiArICAgIFZIb3N0VXNlclNDU0kgKnMgPSBWSE9TVF9V
U0VSX1NDU0kodmRldik7DQo+ICsgICAgVkhvc3RTQ1NJQ29tbW9uICp2c2MgPSBWSE9TVF9TQ1NJ
X0NPTU1PTihzKTsNCj4gKyAgICBWaXJ0SU9TQ1NJQ29tbW9uICp2cyA9IFZJUlRJT19TQ1NJX0NP
TU1PTihkZXYpOw0KPiArICAgIGludCByZXQgPSAwOw0KPiArDQo+ICsgICAgaWYgKHMtPmNvbm5l
Y3RlZCkgew0KPiArICAgICAgICByZXR1cm4gMDsNCj4gKyAgICB9DQo+ICsgICAgcy0+Y29ubmVj
dGVkID0gdHJ1ZTsNCj4gKw0KPiArICAgIHZzYy0+ZGV2Lm51bV9xdWV1ZXMgPSB2cy0+Y29uZi5u
dW1fcXVldWVzOw0KPiArICAgIHZzYy0+ZGV2Lm52cXMgPSBWSVJUSU9fU0NTSV9WUV9OVU1fRklY
RUQgKyB2cy0+Y29uZi5udW1fcXVldWVzOw0KPiArICAgIHZzYy0+ZGV2LnZxcyA9IHMtPnZob3N0
X3ZxczsNCj4gKyAgICB2c2MtPmRldi52cV9pbmRleCA9IDA7DQo+ICsgICAgdnNjLT5kZXYuYmFj
a2VuZF9mZWF0dXJlcyA9IDA7DQo+ICsNCj4gKyAgICByZXQgPSB2aG9zdF9kZXZfaW5pdCgmdnNj
LT5kZXYsICZzLT52aG9zdF91c2VyLCBWSE9TVF9CQUNLRU5EX1RZUEVfVVNFUiwgMCwNCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICBlcnJwKTsNCj4gKyAgICBpZiAocmV0IDwgMCkgew0KPiAr
ICAgICAgICByZXR1cm4gcmV0Ow0KPiArICAgIH0NCj4gKw0KPiArICAgIC8qIHJlc3RvcmUgdmhv
c3Qgc3RhdGUgKi8NCj4gKyAgICBpZiAodmlydGlvX2RldmljZV9zdGFydGVkKHZkZXYsIHZkZXYt
PnN0YXR1cykpIHsNCj4gKyAgICAgICAgcmV0ID0gdmhvc3RfdXNlcl9zY3NpX3N0YXJ0KHMsIGVy
cnApOw0KPiArICAgICAgICBpZiAocmV0IDwgMCkgew0KPiArICAgICAgICAgICAgcmV0dXJuIHJl
dDsNCj4gKyAgICAgICAgfQ0KPiArICAgIH0NCj4gKw0KPiArICAgIHJldHVybiAwOw0KPiArfQ0K
PiArDQo+ICtzdGF0aWMgdm9pZCB2aG9zdF91c2VyX3Njc2lfZXZlbnQodm9pZCAqb3BhcXVlLCBR
RU1VQ2hyRXZlbnQgZXZlbnQpOw0KPiArDQo+ICtzdGF0aWMgdm9pZCB2aG9zdF91c2VyX3Njc2lf
ZGlzY29ubmVjdChEZXZpY2VTdGF0ZSAqZGV2KQ0KPiArew0KPiArICAgIFZpcnRJT0RldmljZSAq
dmRldiA9IFZJUlRJT19ERVZJQ0UoZGV2KTsNCj4gKyAgICBWSG9zdFVzZXJTQ1NJICpzID0gVkhP
U1RfVVNFUl9TQ1NJKHZkZXYpOw0KPiArICAgIFZIb3N0U0NTSUNvbW1vbiAqdnNjID0gVkhPU1Rf
U0NTSV9DT01NT04ocyk7DQo+ICsgICAgVmlydElPU0NTSUNvbW1vbiAqdnMgPSBWSVJUSU9fU0NT
SV9DT01NT04oZGV2KTsNCj4gKw0KPiArICAgIGlmICghcy0+Y29ubmVjdGVkKSB7DQo+ICsgICAg
ICAgIHJldHVybjsNCj4gKyAgICB9DQo+ICsgICAgcy0+Y29ubmVjdGVkID0gZmFsc2U7DQo+ICsN
Cj4gKyAgICB2aG9zdF91c2VyX3Njc2lfc3RvcChzKTsNCj4gKw0KPiArICAgIHZob3N0X2Rldl9j
bGVhbnVwKCZ2c2MtPmRldik7DQo+ICsNCj4gKyAgICAvKiBSZS1pbnN0YXRlIHRoZSBldmVudCBo
YW5kbGVyIGZvciBuZXcgY29ubmVjdGlvbnMgKi8NCj4gKyAgICBxZW11X2Nocl9mZV9zZXRfaGFu
ZGxlcnMoJnZzLT5jb25mLmNoYXJkZXYsIE5VTEwsIE5VTEwsDQo+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHZob3N0X3VzZXJfc2NzaV9ldmVudCwgTlVMTCwgZGV2LCBOVUxMLCB0cnVl
KTsNCj4gK30NCj4gKw0KPiArc3RhdGljIHZvaWQgdmhvc3RfdXNlcl9zY3NpX2V2ZW50KHZvaWQg
Km9wYXF1ZSwgUUVNVUNockV2ZW50IGV2ZW50KQ0KPiArew0KPiArICAgIERldmljZVN0YXRlICpk
ZXYgPSBvcGFxdWU7DQo+ICsgICAgVmlydElPRGV2aWNlICp2ZGV2ID0gVklSVElPX0RFVklDRShk
ZXYpOw0KPiArICAgIFZIb3N0VXNlclNDU0kgKnMgPSBWSE9TVF9VU0VSX1NDU0kodmRldik7DQo+
ICsgICAgVkhvc3RTQ1NJQ29tbW9uICp2c2MgPSBWSE9TVF9TQ1NJX0NPTU1PTihzKTsNCj4gKyAg
ICBWaXJ0SU9TQ1NJQ29tbW9uICp2cyA9IFZJUlRJT19TQ1NJX0NPTU1PTihkZXYpOw0KPiArICAg
IEVycm9yICpsb2NhbF9lcnIgPSBOVUxMOw0KPiArDQo+ICsgICAgc3dpdGNoIChldmVudCkgew0K
PiArICAgIGNhc2UgQ0hSX0VWRU5UX09QRU5FRDoNCj4gKyAgICAgICAgaWYgKHZob3N0X3VzZXJf
c2NzaV9jb25uZWN0KGRldiwgJmxvY2FsX2VycikgPCAwKSB7DQo+ICsgICAgICAgICAgICBlcnJv
cl9yZXBvcnRfZXJyKGxvY2FsX2Vycik7DQo+ICsgICAgICAgICAgICBxZW11X2Nocl9mZV9kaXNj
b25uZWN0KCZ2cy0+Y29uZi5jaGFyZGV2KTsNCj4gKyAgICAgICAgICAgIHJldHVybjsNCj4gKyAg
ICAgICAgfQ0KPiArICAgICAgICBicmVhazsNCj4gKyAgICBjYXNlIENIUl9FVkVOVF9DTE9TRUQ6
DQo+ICsgICAgICAgIC8qIGRlZmVyIGNsb3NlIHVudGlsIGxhdGVyIHRvIGF2b2lkIGNpcmN1bGFy
IGNsb3NlICovDQo+ICsgICAgICAgIHZob3N0X3VzZXJfYXN5bmNfY2xvc2UoZGV2LCAmdnMtPmNv
bmYuY2hhcmRldiwgJnZzYy0+ZGV2LA0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHZob3N0X3VzZXJfc2NzaV9kaXNjb25uZWN0KTsNCj4gKyAgICAgICAgYnJlYWs7DQo+ICsgICAg
Y2FzZSBDSFJfRVZFTlRfQlJFQUs6DQo+ICsgICAgY2FzZSBDSFJfRVZFTlRfTVVYX0lOOg0KPiAr
ICAgIGNhc2UgQ0hSX0VWRU5UX01VWF9PVVQ6DQo+ICsgICAgICAgIC8qIElnbm9yZSAqLw0KPiAr
ICAgICAgICBicmVhazsNCj4gKyAgICB9DQo+ICt9DQo+ICsNCj4gK3N0YXRpYyBpbnQgdmhvc3Rf
dXNlcl9zY3NpX3JlYWxpemVfY29ubmVjdChWSG9zdFVzZXJTQ1NJICpzLCBFcnJvciAqKmVycnAp
DQo+ICt7DQo+ICsgICAgRGV2aWNlU3RhdGUgKmRldiA9ICZzLT5wYXJlbnRfb2JqLnBhcmVudF9v
YmoucGFyZW50X29iai5wYXJlbnRfb2JqOw0KPiArICAgIFZpcnRJT1NDU0lDb21tb24gKnZzID0g
VklSVElPX1NDU0lfQ09NTU9OKGRldik7DQo+ICsgICAgaW50IHJldDsNCj4gKw0KPiArICAgIHMt
PmNvbm5lY3RlZCA9IGZhbHNlOw0KPiArDQo+ICsgICAgcmV0ID0gcWVtdV9jaHJfZmVfd2FpdF9j
b25uZWN0ZWQoJnZzLT5jb25mLmNoYXJkZXYsIGVycnApOw0KPiArICAgIGlmIChyZXQgPCAwKSB7
DQo+ICsgICAgICAgIHJldHVybiByZXQ7DQo+ICsgICAgfQ0KPiArDQo+ICsgICAgcmV0ID0gdmhv
c3RfdXNlcl9zY3NpX2Nvbm5lY3QoZGV2LCBlcnJwKTsNCj4gKyAgICBpZiAocmV0IDwgMCkgew0K
PiArICAgICAgICBxZW11X2Nocl9mZV9kaXNjb25uZWN0KCZ2cy0+Y29uZi5jaGFyZGV2KTsNCj4g
KyAgICAgICAgcmV0dXJuIHJldDsNCj4gKyAgICB9DQo+ICsgICAgYXNzZXJ0KHMtPmNvbm5lY3Rl
ZCk7DQo+ICsNCj4gKyAgICByZXR1cm4gMDsNCj4gK30NCj4gKw0KPiBzdGF0aWMgdm9pZCB2aG9z
dF91c2VyX3Njc2lfcmVhbGl6ZShEZXZpY2VTdGF0ZSAqZGV2LCBFcnJvciAqKmVycnApDQo+IHsN
Cj4gKyAgICBFUlJQX0dVQVJEKCk7DQo+ICAgICBWaXJ0SU9TQ1NJQ29tbW9uICp2cyA9IFZJUlRJ
T19TQ1NJX0NPTU1PTihkZXYpOw0KPiAgICAgVkhvc3RVc2VyU0NTSSAqcyA9IFZIT1NUX1VTRVJf
U0NTSShkZXYpOw0KPiAgICAgVkhvc3RTQ1NJQ29tbW9uICp2c2MgPSBWSE9TVF9TQ1NJX0NPTU1P
TihzKTsNCj4gLSAgICBzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlICp2cXMgPSBOVUxMOw0KPiAgICAg
RXJyb3IgKmVyciA9IE5VTEw7DQo+ICAgICBpbnQgcmV0Ow0KPiArICAgIGludCByZXRyaWVzID0g
VlVfUkVBTElaRV9DT05OX1JFVFJJRVM7DQo+IA0KPiAgICAgaWYgKCF2cy0+Y29uZi5jaGFyZGV2
LmNocikgew0KPiAgICAgICAgIGVycm9yX3NldGcoZXJycCwgInZob3N0LXVzZXItc2NzaTogbWlz
c2luZyBjaGFyZGV2Iik7DQo+IEBAIC0xMTUsMTggKzI1OCwyOCBAQCBzdGF0aWMgdm9pZCB2aG9z
dF91c2VyX3Njc2lfcmVhbGl6ZShEZXZpY2VTdGF0ZSAqZGV2LCBFcnJvciAqKmVycnApDQo+ICAg
ICAgICAgZ290byBmcmVlX3ZpcnRpbzsNCj4gICAgIH0NCj4gDQo+IC0gICAgdnNjLT5kZXYubnZx
cyA9IFZJUlRJT19TQ1NJX1ZRX05VTV9GSVhFRCArIHZzLT5jb25mLm51bV9xdWV1ZXM7DQo+IC0g
ICAgdnNjLT5kZXYudnFzID0gZ19uZXcwKHN0cnVjdCB2aG9zdF92aXJ0cXVldWUsIHZzYy0+ZGV2
Lm52cXMpOw0KPiAtICAgIHZzYy0+ZGV2LnZxX2luZGV4ID0gMDsNCj4gLSAgICB2c2MtPmRldi5i
YWNrZW5kX2ZlYXR1cmVzID0gMDsNCj4gLSAgICB2cXMgPSB2c2MtPmRldi52cXM7DQo+ICsgICAg
dnNjLT5pbmZsaWdodCA9IGdfbmV3MChzdHJ1Y3Qgdmhvc3RfaW5mbGlnaHQsIDEpOw0KPiArICAg
IHMtPnZob3N0X3ZxcyA9IGdfbmV3MChzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVlLA0KPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICBWSVJUSU9fU0NTSV9WUV9OVU1fRklYRUQgKyB2cy0+Y29uZi5u
dW1fcXVldWVzKTsNCj4gKw0KPiArICAgIGFzc2VydCghKmVycnApOw0KPiArICAgIGRvIHsNCj4g
KyAgICAgICAgaWYgKCplcnJwKSB7DQo+ICsgICAgICAgICAgICBlcnJvcl9wcmVwZW5kKGVycnAs
ICJSZWNvbm5lY3RpbmcgYWZ0ZXIgZXJyb3I6ICIpOw0KPiArICAgICAgICAgICAgZXJyb3JfcmVw
b3J0X2VycigqZXJycCk7DQo+ICsgICAgICAgICAgICAqZXJycCA9IE5VTEw7DQo+ICsgICAgICAg
IH0NCj4gKyAgICAgICAgcmV0ID0gdmhvc3RfdXNlcl9zY3NpX3JlYWxpemVfY29ubmVjdChzLCBl
cnJwKTsNCj4gKyAgICB9IHdoaWxlIChyZXQgPCAwICYmIHJldHJpZXMtLSk7DQo+IA0KPiAtICAg
IHJldCA9IHZob3N0X2Rldl9pbml0KCZ2c2MtPmRldiwgJnMtPnZob3N0X3VzZXIsDQo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgVkhPU1RfQkFDS0VORF9UWVBFX1VTRVIsIDAsIGVycnApOw0K
PiAgICAgaWYgKHJldCA8IDApIHsNCj4gICAgICAgICBnb3RvIGZyZWVfdmhvc3Q7DQo+ICAgICB9
DQo+IA0KPiArICAgIC8qIHdlJ3JlIGZ1bGx5IGluaXRpYWxpemVkLCBub3cgd2UgY2FuIG9wZXJh
dGUsIHNvIGFkZCB0aGUgaGFuZGxlciAqLw0KPiArICAgIHFlbXVfY2hyX2ZlX3NldF9oYW5kbGVy
cygmdnMtPmNvbmYuY2hhcmRldiwgIE5VTEwsIE5VTEwsDQo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHZob3N0X3VzZXJfc2NzaV9ldmVudCwgTlVMTCwgKHZvaWQgKilkZXYsDQo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5VTEwsIHRydWUpOw0KPiAgICAgLyogQ2hhbm5l
bCBhbmQgbHVuIGJvdGggYXJlIDAgZm9yIGJvb3RhYmxlIHZob3N0LXVzZXItc2NzaSBkaXNrICov
DQo+ICAgICB2c2MtPmNoYW5uZWwgPSAwOw0KPiAgICAgdnNjLT5sdW4gPSAwOw0KPiBAQCAtMTM1
LDggKzI4OCwxMiBAQCBzdGF0aWMgdm9pZCB2aG9zdF91c2VyX3Njc2lfcmVhbGl6ZShEZXZpY2VT
dGF0ZSAqZGV2LCBFcnJvciAqKmVycnApDQo+ICAgICByZXR1cm47DQo+IA0KPiBmcmVlX3Zob3N0
Og0KPiArICAgIGdfZnJlZShzLT52aG9zdF92cXMpOw0KPiArICAgIHMtPnZob3N0X3ZxcyA9IE5V
TEw7DQo+ICsgICAgZ19mcmVlKHZzYy0+aW5mbGlnaHQpOw0KPiArICAgIHZzYy0+aW5mbGlnaHQg
PSBOVUxMOw0KPiAgICAgdmhvc3RfdXNlcl9jbGVhbnVwKCZzLT52aG9zdF91c2VyKTsNCj4gLSAg
ICBnX2ZyZWUodnFzKTsNCj4gKw0KPiBmcmVlX3ZpcnRpbzoNCj4gICAgIHZpcnRpb19zY3NpX2Nv
bW1vbl91bnJlYWxpemUoZGV2KTsNCj4gfQ0KPiBAQCAtMTQ2LDE2ICszMDMsMjMgQEAgc3RhdGlj
IHZvaWQgdmhvc3RfdXNlcl9zY3NpX3VucmVhbGl6ZShEZXZpY2VTdGF0ZSAqZGV2KQ0KPiAgICAg
VmlydElPRGV2aWNlICp2ZGV2ID0gVklSVElPX0RFVklDRShkZXYpOw0KPiAgICAgVkhvc3RVc2Vy
U0NTSSAqcyA9IFZIT1NUX1VTRVJfU0NTSShkZXYpOw0KPiAgICAgVkhvc3RTQ1NJQ29tbW9uICp2
c2MgPSBWSE9TVF9TQ1NJX0NPTU1PTihzKTsNCj4gLSAgICBzdHJ1Y3Qgdmhvc3RfdmlydHF1ZXVl
ICp2cXMgPSB2c2MtPmRldi52cXM7DQo+ICsgICAgVmlydElPU0NTSUNvbW1vbiAqdnMgPSBWSVJU
SU9fU0NTSV9DT01NT04oZGV2KTsNCj4gDQo+ICAgICAvKiBUaGlzIHdpbGwgc3RvcCB0aGUgdmhv
c3QgYmFja2VuZC4gKi8NCj4gICAgIHZob3N0X3VzZXJfc2NzaV9zZXRfc3RhdHVzKHZkZXYsIDAp
Ow0KPiArICAgIHFlbXVfY2hyX2ZlX3NldF9oYW5kbGVycygmdnMtPmNvbmYuY2hhcmRldiwgTlVM
TCwgTlVMTCwgTlVMTCwgTlVMTCwgTlVMTCwNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgTlVMTCwgZmFsc2UpOw0KPiANCj4gICAgIHZob3N0X2Rldl9jbGVhbnVwKCZ2c2MtPmRldik7
DQo+IC0gICAgZ19mcmVlKHZxcyk7DQo+ICsgICAgZ19mcmVlKHMtPnZob3N0X3Zxcyk7DQo+ICsg
ICAgcy0+dmhvc3RfdnFzID0gTlVMTDsNCj4gKw0KPiArICAgIHZob3N0X2Rldl9mcmVlX2luZmxp
Z2h0KHZzYy0+aW5mbGlnaHQpOw0KPiArICAgIGdfZnJlZSh2c2MtPmluZmxpZ2h0KTsNCj4gKyAg
ICB2c2MtPmluZmxpZ2h0ID0gTlVMTDsNCj4gDQo+IC0gICAgdmlydGlvX3Njc2lfY29tbW9uX3Vu
cmVhbGl6ZShkZXYpOw0KPiAgICAgdmhvc3RfdXNlcl9jbGVhbnVwKCZzLT52aG9zdF91c2VyKTsN
Cj4gKyAgICB2aXJ0aW9fc2NzaV9jb21tb25fdW5yZWFsaXplKGRldik7DQo+IH0NCj4gDQo+IHN0
YXRpYyBQcm9wZXJ0eSB2aG9zdF91c2VyX3Njc2lfcHJvcGVydGllc1tdID0gew0KPiBkaWZmIC0t
Z2l0IGEvaW5jbHVkZS9ody92aXJ0aW8vdmhvc3Qtc2NzaS1jb21tb24uaCBiL2luY2x1ZGUvaHcv
dmlydGlvL3Zob3N0LXNjc2ktY29tbW9uLmgNCj4gaW5kZXggMThmMTE1NTI3Yy4uYzVkMmMwOTQ1
NSAxMDA2NDQNCj4gLS0tIGEvaW5jbHVkZS9ody92aXJ0aW8vdmhvc3Qtc2NzaS1jb21tb24uaA0K
PiArKysgYi9pbmNsdWRlL2h3L3ZpcnRpby92aG9zdC1zY3NpLWNvbW1vbi5oDQo+IEBAIC0zOSw3
ICszOSw3IEBAIHN0cnVjdCBWSG9zdFNDU0lDb21tb24gew0KPiAgICAgc3RydWN0IHZob3N0X2lu
ZmxpZ2h0ICppbmZsaWdodDsNCj4gfTsNCj4gDQo+IC1pbnQgdmhvc3Rfc2NzaV9jb21tb25fc3Rh
cnQoVkhvc3RTQ1NJQ29tbW9uICp2c2MpOw0KPiAraW50IHZob3N0X3Njc2lfY29tbW9uX3N0YXJ0
KFZIb3N0U0NTSUNvbW1vbiAqdnNjLCBFcnJvciAqKmVycnApOw0KPiB2b2lkIHZob3N0X3Njc2lf
Y29tbW9uX3N0b3AoVkhvc3RTQ1NJQ29tbW9uICp2c2MpOw0KPiBjaGFyICp2aG9zdF9zY3NpX2Nv
bW1vbl9nZXRfZndfZGV2X3BhdGgoRldQYXRoUHJvdmlkZXIgKnAsIEJ1c1N0YXRlICpidXMsDQo+
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZXZpY2VTdGF0ZSAqZGV2
KTsNCj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvaHcvdmlydGlvL3Zob3N0LXVzZXItc2NzaS5oIGIv
aW5jbHVkZS9ody92aXJ0aW8vdmhvc3QtdXNlci1zY3NpLmgNCj4gaW5kZXggNTIxYjA4ZTU1OS4u
YjQwNWVjOTUyYSAxMDA2NDQNCj4gLS0tIGEvaW5jbHVkZS9ody92aXJ0aW8vdmhvc3QtdXNlci1z
Y3NpLmgNCj4gKysrIGIvaW5jbHVkZS9ody92aXJ0aW8vdmhvc3QtdXNlci1zY3NpLmgNCj4gQEAg
LTI5LDYgKzI5LDEwIEBAIE9CSkVDVF9ERUNMQVJFX1NJTVBMRV9UWVBFKFZIb3N0VXNlclNDU0ks
IFZIT1NUX1VTRVJfU0NTSSkNCj4gc3RydWN0IFZIb3N0VXNlclNDU0kgew0KPiAgICAgVkhvc3RT
Q1NJQ29tbW9uIHBhcmVudF9vYmo7DQo+ICAgICBWaG9zdFVzZXJTdGF0ZSB2aG9zdF91c2VyOw0K
PiArICAgIGJvb2wgY29ubmVjdGVkOw0KPiArICAgIGJvb2wgc3RhcnRlZF92dTsNCj4gKw0KPiAr
ICAgIHN0cnVjdCB2aG9zdF92aXJ0cXVldWUgKnZob3N0X3ZxczsNCj4gfTsNCj4gDQo+ICNlbmRp
ZiAvKiBWSE9TVF9VU0VSX1NDU0lfSCAqLw0KPiAtLSANCj4gMi40MS4wDQo+IA0KDQo=

