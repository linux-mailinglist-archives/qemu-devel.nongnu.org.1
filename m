Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 87005A4A8E5
	for <lists+qemu-devel@lfdr.de>; Sat,  1 Mar 2025 06:30:42 +0100 (CET)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1toFPe-0000jP-V7; Sat, 01 Mar 2025 00:29:22 -0500
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <brian.cain@oss.qualcomm.com>)
 id 1toFPc-0000bs-Ha
 for qemu-devel@nongnu.org; Sat, 01 Mar 2025 00:29:20 -0500
Received: from mx0a-0031df01.pphosted.com ([205.220.168.131])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <brian.cain@oss.qualcomm.com>)
 id 1toFPa-0008Ot-Fq
 for qemu-devel@nongnu.org; Sat, 01 Mar 2025 00:29:20 -0500
Received: from pps.filterd (m0279866.ppops.net [127.0.0.1])
 by mx0a-0031df01.pphosted.com (8.18.1.2/8.18.1.2) with ESMTP id 5214m84F020607
 for <qemu-devel@nongnu.org>; Sat, 1 Mar 2025 05:29:07 GMT
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=qualcomm.com; h=
 cc:content-transfer-encoding:content-type:date:from:in-reply-to
 :message-id:mime-version:references:subject:to; s=qcppdkim1; bh=
 /n+EaFwkZ7IlhLae7S0UmP+Ji3oIvPR2YtYG47CF0/o=; b=FT4eP1H8E5yQIONU
 LNvdEgdB5tEopxBk7K0BWv7DKskXaKbJbwrc3JAsV/ozN23ljCVAQneGhXZw+Ho4
 jpNlQr01hHgczkP8yB0QTR4kZiDMgeZNJ0BwgIk4e8+SIWucbctBnuIpKcwt237D
 WbOBHwqA2wJU9z8YK951P5FMkg6FUwLOr8lWSnqaecmC49Rty+T4p40uVjbSrGOf
 4g3+h+LuWvu45KPrho7bE+UPP1gV0A3wH+i9Wxhj7jJS3xwUdPkIraJWfNegTraS
 n9uz25hPkgAndw1s3sn2gVHLdbvPkcD1s6eT8vXpboIwqrdmy3EbShY5cpknY22v
 D7bfmQ==
Received: from mail-pj1-f71.google.com (mail-pj1-f71.google.com
 [209.85.216.71])
 by mx0a-0031df01.pphosted.com (PPS) with ESMTPS id 453uh701xg-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128 verify=NOT)
 for <qemu-devel@nongnu.org>; Sat, 01 Mar 2025 05:29:07 +0000 (GMT)
Received: by mail-pj1-f71.google.com with SMTP id
 98e67ed59e1d1-2fec3e38b60so2178444a91.0
 for <qemu-devel@nongnu.org>; Fri, 28 Feb 2025 21:29:07 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1740806946; x=1741411746;
 h=content-transfer-encoding:mime-version:references:in-reply-to
 :message-id:date:subject:cc:to:from:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=/n+EaFwkZ7IlhLae7S0UmP+Ji3oIvPR2YtYG47CF0/o=;
 b=hTldZjrKPXWc3JvtjhfJTTMUZ1yCkWkAavY7O0gozeq61nKTDRbyqG8yb0LSpKw7BX
 bFq68k7Uu1d6qb3WL/Q5195g0SIsfelMmsygHnGOuK/yeeZoiP+mdt8T2oTs8xHYHvzi
 t39hoktv3Lsr5hTDlup9upN18+gbtgxNw8qm07AyorCWwXKybx3CsbJ+7jXCDxFsD74m
 GjDPGflJU+lFmozDQ3LxyBZdpHx3FbmNISaiqtC1lNIbfYqPcanePb580WXH5sH3iuOE
 Yvt02ysrDSYLLit4/HZdDgOVzlMiZNU40HtRbIy/WBYtozsNkiAPw1YprLlID8rkFf/c
 hcxg==
X-Gm-Message-State: AOJu0YxEQQgMZOkxEePJgkoTb8YphwzOaJtuxiNoyBTx//2sd0wJ/7ab
 e1+GAxQKXnAYhFWww/32BFi3arwgUPcF+sptAWFgbSMzvPUREaXine4nD1eMmr6pDZih3nqkbgx
 UNigJSYunR+mM38A5HH8Sk6W+Y6OC/oFZ24D6XCuVqQ4T0izp7YtTrSFlj1W9NQ==
X-Gm-Gg: ASbGnctm/cdF8EB4SuGrMKM70TG07LqmL6QFT+6Y2N+S7zsOy64VBK1Cb2RLIYIFl1I
 yOU2LKIGvqTVjnvyecFbfKftZBy28XiSSq6Ka7MGvWbQRbNt6+E+1iLwsGos/l4753Q+0I+26oP
 iqkcAZFrvPJOsa4/HVe/01wDDy8KwCukLq0clS7t+Ue/52zdK1D8T9zzSxcVn+tnAeDqOZ33FUL
 2Wx735P2qe6JLPh4hI/ngLJBet92I3a4xWbkCNr8fKKJIKuPBkdrA495ms+NHtqrnBRbKczCi/g
 AdASnsQgdNKToiWfGT0yWuBY7gTMRvwY22QkpXNRwgUn1egFiBKS1Z5rg062fUGf
X-Received: by 2002:a17:90b:2b46:b0:2f9:9ddd:689b with SMTP id
 98e67ed59e1d1-2febabcf44emr8356109a91.22.1740806945966; 
 Fri, 28 Feb 2025 21:29:05 -0800 (PST)
X-Google-Smtp-Source: AGHT+IG6Rr1M6ngFnhdnZSEyCyO6U/HX2yD36rq+KaaoGzjd8V5ovJT06Q/bAwYst/KvZZfGUuEa5A==
X-Received: by 2002:a17:90b:2b46:b0:2f9:9ddd:689b with SMTP id
 98e67ed59e1d1-2febabcf44emr8356087a91.22.1740806945576; 
 Fri, 28 Feb 2025 21:29:05 -0800 (PST)
Received: from hu-bcain-lv.qualcomm.com (Global_NAT1.qualcomm.com.
 [129.46.96.20]) by smtp.gmail.com with ESMTPSA id
 98e67ed59e1d1-2fea67a5dc8sm4732955a91.23.2025.02.28.21.29.04
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Fri, 28 Feb 2025 21:29:05 -0800 (PST)
From: Brian Cain <brian.cain@oss.qualcomm.com>
To: qemu-devel@nongnu.org
Cc: brian.cain@oss.qualcomm.com, richard.henderson@linaro.org,
 philmd@linaro.org, quic_mathbern@quicinc.com, ale@rev.ng, anjo@rev.ng,
 quic_mliebel@quicinc.com, ltaylorsimpson@gmail.com,
 alex.bennee@linaro.org, quic_mburton@quicinc.com, sidneym@quicinc.com,
 Brian Cain <bcain@quicinc.com>
Subject: [PATCH 12/39] target/hexagon: Add implementation of cycle counters
Date: Fri, 28 Feb 2025 21:28:18 -0800
Message-Id: <20250301052845.1012069-13-brian.cain@oss.qualcomm.com>
X-Mailer: git-send-email 2.34.1
In-Reply-To: <20250301052845.1012069-1-brian.cain@oss.qualcomm.com>
References: <20250301052845.1012069-1-brian.cain@oss.qualcomm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Proofpoint-GUID: CdIUT5LGPF60G32cgMXUN4ij_T0UP2UP
X-Proofpoint-ORIG-GUID: CdIUT5LGPF60G32cgMXUN4ij_T0UP2UP
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.293,Aquarius:18.0.1057,Hydra:6.0.680,FMLib:17.12.68.34
 definitions=2025-03-01_01,2025-02-28_01,2024-11-22_01
X-Proofpoint-Spam-Details: rule=outbound_notspam policy=outbound score=0
 bulkscore=0 suspectscore=0
 lowpriorityscore=0 phishscore=0 impostorscore=0 clxscore=1015
 priorityscore=1501 adultscore=0 mlxscore=0 spamscore=0 malwarescore=0
 mlxlogscore=999 classifier=spam adjust=0 reason=mlx scancount=1
 engine=8.19.0-2502100000 definitions=main-2503010040
Received-SPF: pass client-ip=205.220.168.131;
 envelope-from=brian.cain@oss.qualcomm.com; helo=mx0a-0031df01.pphosted.com
X-Spam_score_int: -26
X-Spam_score: -2.7
X-Spam_bar: --
X-Spam_report: (-2.7 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_EF=-0.1, RCVD_IN_DNSWL_LOW=-0.7,
 RCVD_IN_VALIDITY_RPBL_BLOCKED=0.001, RCVD_IN_VALIDITY_SAFE_BLOCKED=0.001,
 SPF_HELO_NONE=0.001, SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

RnJvbTogQnJpYW4gQ2FpbiA8YmNhaW5AcXVpY2luYy5jb20+CgpDby1hdXRob3JlZC1ieTogU2lk
IE1hbm5pbmcgPHNpZG5leW1AcXVpY2luYy5jb20+ClNpZ25lZC1vZmYtYnk6IEJyaWFuIENhaW4g
PGJyaWFuLmNhaW5Ab3NzLnF1YWxjb21tLmNvbT4KLS0tCiB0YXJnZXQvaGV4YWdvbi9jcHUuaCAg
ICAgICAgfCAyNSArKysrKysrKysrKysrKysrKysrKysrLS0tCiB0YXJnZXQvaGV4YWdvbi90cmFu
c2xhdGUuaCAgfCAgMiArKwogdGFyZ2V0L2hleGFnb24vY3B1X2hlbHBlci5jIHwgMTIgKysrKysr
KysrLS0tCiB0YXJnZXQvaGV4YWdvbi90cmFuc2xhdGUuYyAgfCAyNyArKysrKysrKysrKysrKysr
KysrKysrKysrKysKIDQgZmlsZXMgY2hhbmdlZCwgNjAgaW5zZXJ0aW9ucygrKSwgNiBkZWxldGlv
bnMoLSkKCmRpZmYgLS1naXQgYS90YXJnZXQvaGV4YWdvbi9jcHUuaCBiL3RhcmdldC9oZXhhZ29u
L2NwdS5oCmluZGV4IDRiOWM5ODczZGMuLjdlMmVhODM4YzUgMTAwNjQ0Ci0tLSBhL3RhcmdldC9o
ZXhhZ29uL2NwdS5oCisrKyBiL3RhcmdldC9oZXhhZ29uL2NwdS5oCkBAIC0yNywxMSArMjcsMTUg
QEAKIAogI2luY2x1ZGUgImNwdS1xb20uaCIKICNpbmNsdWRlICJleGVjL2NwdS1kZWZzLmgiCisj
aW5jbHVkZSAiZXhlYy9jcHUtY29tbW9uLmgiCiAjaW5jbHVkZSAiaGV4X3JlZ3MuaCIKICNpbmNs
dWRlICJtbXZlYy9tbXZlYy5oIgogI2luY2x1ZGUgImh3L3JlZ2lzdGVyZmllbGRzLmgiCiAKKyNp
Zm5kZWYgQ09ORklHX1VTRVJfT05MWQorI2luY2x1ZGUgInJlZ19maWVsZHMuaCIKIHR5cGVkZWYg
c3RydWN0IENQVUhleGFnb25UTEJDb250ZXh0IENQVUhleGFnb25UTEJDb250ZXh0OworI2VuZGlm
CiAKICNkZWZpbmUgTlVNX1BSRUdTIDQKICNkZWZpbmUgVE9UQUxfUEVSX1RIUkVBRF9SRUdTIDY0
CkBAIC0xODgsNiArMTkyLDcgQEAgc3RydWN0IEFyY2hDUFUgewogCiBGSUVMRChUQl9GTEFHUywg
SVNfVElHSFRfTE9PUCwgMCwgMSkKIEZJRUxEKFRCX0ZMQUdTLCBNTVVfSU5ERVgsIDEsIDMpCitG
SUVMRChUQl9GTEFHUywgUENZQ0xFX0VOQUJMRUQsIDQsIDEpCiAKIEdfTk9SRVRVUk4gdm9pZCBo
ZXhhZ29uX3JhaXNlX2V4Y2VwdGlvbl9lcnIoQ1BVSGV4YWdvblN0YXRlICplbnYsCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IGV4Y2VwdGlvbiwK
QEAgLTIwMSw2ICsyMDYsMTEgQEAgdm9pZCBoZXhhZ29uX2NwdV9zb2Z0X3Jlc2V0KENQVUhleGFn
b25TdGF0ZSAqZW52KTsKICNlbmRpZgogCiAjaW5jbHVkZSAiZXhlYy9jcHUtYWxsLmgiCisKKyNp
Zm5kZWYgQ09ORklHX1VTRVJfT05MWQorI2luY2x1ZGUgImNwdV9oZWxwZXIuaCIKKyNlbmRpZgor
CiBzdGF0aWMgaW5saW5lIHZvaWQgY3B1X2dldF90Yl9jcHVfc3RhdGUoQ1BVSGV4YWdvblN0YXRl
ICplbnYsIHZhZGRyICpwYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1aW50NjRfdCAqY3NfYmFzZSwgdWludDMyX3QgKmZsYWdzKQogewpAQCAtMjEwLDE2ICsyMjAs
MjcgQEAgc3RhdGljIGlubGluZSB2b2lkIGNwdV9nZXRfdGJfY3B1X3N0YXRlKENQVUhleGFnb25T
dGF0ZSAqZW52LCB2YWRkciAqcGMsCiAgICAgaWYgKCpwYyA9PSBlbnYtPmdwcltIRVhfUkVHX1NB
MF0pIHsKICAgICAgICAgaGV4X2ZsYWdzID0gRklFTERfRFAzMihoZXhfZmxhZ3MsIFRCX0ZMQUdT
LCBJU19USUdIVF9MT09QLCAxKTsKICAgICB9Ci0gICAgKmZsYWdzID0gaGV4X2ZsYWdzOwogICAg
IGlmICgqcGMgJiBQQ0FMSUdOX01BU0spIHsKICAgICAgICAgaGV4YWdvbl9yYWlzZV9leGNlcHRp
b25fZXJyKGVudiwgSEVYX0NBVVNFX1BDX05PVF9BTElHTkVELCAwKTsKICAgICB9CiAjaWZuZGVm
IENPTkZJR19VU0VSX09OTFkKKyAgICB0YXJnZXRfdWxvbmcgc3lzY2ZnID0gYXJjaF9nZXRfc3lz
dGVtX3JlZyhlbnYsIEhFWF9TUkVHX1NZU0NGRyk7CisKKyAgICBib29sIHBjeWNsZV9lbmFibGVk
ID0gZXh0cmFjdDMyKHN5c2NmZywKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHJlZ19maWVsZF9pbmZvW1NZU0NGR19QQ1lDTEVFTl0ub2Zmc2V0LAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcmVnX2ZpZWxkX2luZm9bU1lTQ0ZHX1BDWUNMRUVOXS53aWR0
aCk7CisKICAgICBoZXhfZmxhZ3MgPSBGSUVMRF9EUDMyKGhleF9mbGFncywgVEJfRkxBR1MsIE1N
VV9JTkRFWCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwdV9tbXVfaW5kZXgoZW52X2Nw
dShlbnYpLCBmYWxzZSkpOworCisgICAgaWYgKHBjeWNsZV9lbmFibGVkKSB7CisgICAgICAgIGhl
eF9mbGFncyA9IEZJRUxEX0RQMzIoaGV4X2ZsYWdzLCBUQl9GTEFHUywgUENZQ0xFX0VOQUJMRUQs
IDEpOworICAgIH0KICNlbHNlCisgICAgaGV4X2ZsYWdzID0gRklFTERfRFAzMihoZXhfZmxhZ3Ms
IFRCX0ZMQUdTLCBQQ1lDTEVfRU5BQkxFRCwgdHJ1ZSk7CiAgICAgaGV4X2ZsYWdzID0gRklFTERf
RFAzMihoZXhfZmxhZ3MsIFRCX0ZMQUdTLCBNTVVfSU5ERVgsIE1NVV9VU0VSX0lEWCk7CiAjZW5k
aWYKKyAgICAqZmxhZ3MgPSBoZXhfZmxhZ3M7CiB9CiAKIHR5cGVkZWYgSGV4YWdvbkNQVSBBcmNo
Q1BVOwpAQCAtMjI4LDYgKzI0OSw0IEBAIHZvaWQgaGV4YWdvbl90cmFuc2xhdGVfaW5pdCh2b2lk
KTsKIHZvaWQgaGV4YWdvbl90cmFuc2xhdGVfY29kZShDUFVTdGF0ZSAqY3MsIFRyYW5zbGF0aW9u
QmxvY2sgKnRiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCAqbWF4X2luc25zLCB2
YWRkciBwYywgdm9pZCAqaG9zdF9wYyk7CiAKLSNpbmNsdWRlICJleGVjL2NwdS1hbGwuaCIKLQog
I2VuZGlmIC8qIEhFWEFHT05fQ1BVX0ggKi8KZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29uL3Ry
YW5zbGF0ZS5oIGIvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmgKaW5kZXggMGVhYTNkYjAzZS4u
OWJjNGIzY2U4YiAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmgKKysrIGIv
dGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmgKQEAgLTgzLDYgKzgzLDggQEAgdHlwZWRlZiBzdHJ1
Y3QgRGlzYXNDb250ZXh0IHsKICAgICBUQ0d2IG5ld19wcmVkX3ZhbHVlW05VTV9QUkVHU107CiAg
ICAgVENHdiBicmFuY2hfdGFrZW47CiAgICAgVENHdiBkY3plcm9fYWRkcjsKKyAgICBib29sIHBj
eWNsZV9lbmFibGVkOworICAgIHVpbnQzMl90IG51bV9jeWNsZXM7CiB9IERpc2FzQ29udGV4dDsK
IAogYm9vbCBpc19nYXRoZXJfc3RvcmVfaW5zbihEaXNhc0NvbnRleHQgKmN0eCk7CmRpZmYgLS1n
aXQgYS90YXJnZXQvaGV4YWdvbi9jcHVfaGVscGVyLmMgYi90YXJnZXQvaGV4YWdvbi9jcHVfaGVs
cGVyLmMKaW5kZXggMGIwODAyYmZiOS4uMWQ5YjlmOGJlZiAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hl
eGFnb24vY3B1X2hlbHBlci5jCisrKyBiL3RhcmdldC9oZXhhZ29uL2NwdV9oZWxwZXIuYwpAQCAt
NDgsMTcgKzQ4LDIzIEBAIHVpbnQzMl90IGFyY2hfZ2V0X3N5c3RlbV9yZWcoQ1BVSGV4YWdvblN0
YXRlICplbnYsIHVpbnQzMl90IHJlZykKIAogdWludDY0X3QgaGV4YWdvbl9nZXRfc3lzX3BjeWNs
ZV9jb3VudChDUFVIZXhhZ29uU3RhdGUgKmVudikKIHsKLSAgICBnX2Fzc2VydF9ub3RfcmVhY2hl
ZCgpOworICAgIHVpbnQ2NF90IGN5Y2xlcyA9IDA7CisgICAgQ1BVU3RhdGUgKmNzOworICAgIENQ
VV9GT1JFQUNIKGNzKSB7CisgICAgICAgIENQVUhleGFnb25TdGF0ZSAqZW52XyA9IGNwdV9lbnYo
Y3MpOworICAgICAgICBjeWNsZXMgKz0gZW52Xy0+dF9jeWNsZV9jb3VudDsKKyAgICB9CisgICAg
cmV0dXJuICooZW52LT5nX3BjeWNsZV9iYXNlKSArIGN5Y2xlczsKIH0KIAogdWludDMyX3QgaGV4
YWdvbl9nZXRfc3lzX3BjeWNsZV9jb3VudF9oaWdoKENQVUhleGFnb25TdGF0ZSAqZW52KQogewot
ICAgIGdfYXNzZXJ0X25vdF9yZWFjaGVkKCk7CisgICAgcmV0dXJuIGhleGFnb25fZ2V0X3N5c19w
Y3ljbGVfY291bnQoZW52KSA+PiAzMjsKIH0KIAogdWludDMyX3QgaGV4YWdvbl9nZXRfc3lzX3Bj
eWNsZV9jb3VudF9sb3coQ1BVSGV4YWdvblN0YXRlICplbnYpCiB7Ci0gICAgZ19hc3NlcnRfbm90
X3JlYWNoZWQoKTsKKyAgICByZXR1cm4gZXh0cmFjdDY0KGhleGFnb25fZ2V0X3N5c19wY3ljbGVf
Y291bnQoZW52KSwgMCwgMzIpOwogfQogCiB2b2lkIGhleGFnb25fc2V0X3N5c19wY3ljbGVfY291
bnRfaGlnaChDUFVIZXhhZ29uU3RhdGUgKmVudiwKZGlmZiAtLWdpdCBhL3RhcmdldC9oZXhhZ29u
L3RyYW5zbGF0ZS5jIGIvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKaW5kZXggOTExOWU0MmZm
Ny4uMDYwZGY2ZTVlYiAxMDA2NDQKLS0tIGEvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKKysr
IGIvdGFyZ2V0L2hleGFnb24vdHJhbnNsYXRlLmMKQEAgLTU3LDYgKzU3LDcgQEAgVENHdl9pNjQg
aGV4X3N0b3JlX3ZhbDY0W1NUT1JFU19NQVhdOwogVENHdiBoZXhfbGxzY19hZGRyOwogVENHdiBo
ZXhfbGxzY192YWw7CiBUQ0d2X2k2NCBoZXhfbGxzY192YWxfaTY0OworVENHdl9pNjQgaGV4X2N5
Y2xlX2NvdW50OwogVENHdiBoZXhfdnN0b3JlX2FkZHJbVlNUT1JFU19NQVhdOwogVENHdiBoZXhf
dnN0b3JlX3NpemVbVlNUT1JFU19NQVhdOwogVENHdiBoZXhfdnN0b3JlX3BlbmRpbmdbVlNUT1JF
U19NQVhdOwpAQCAtMTI1LDYgKzEyNiwyMiBAQCBzdGF0aWMgdm9pZCBnZW5fZXhjZXB0aW9uX3Jh
dyhpbnQgZXhjcCkKICAgICBnZW5faGVscGVyX3JhaXNlX2V4Y2VwdGlvbih0Y2dfZW52LCB0Y2df
Y29uc3RhbnRfaTMyKGV4Y3ApKTsKIH0KIAorI2lmbmRlZiBDT05GSUdfVVNFUl9PTkxZCitzdGF0
aWMgaW5saW5lIHZvaWQgZ2VuX3ByZWNpc2VfZXhjZXB0aW9uKGludCBleGNwLCB0YXJnZXRfdWxv
bmcgUEMpCit7CisgICAgdGNnX2dlbl9tb3ZpX3RsKGhleF9jYXVzZV9jb2RlLCBleGNwKTsKKyAg
ICBnZW5fZXhjZXB0aW9uKEhFWF9FVkVOVF9QUkVDSVNFLCBQQyk7Cit9CisKK3N0YXRpYyBpbmxp
bmUgdm9pZCBnZW5fcGN5Y2xlX2NvdW50ZXJzKERpc2FzQ29udGV4dCAqY3R4KQoreworICAgIGlm
IChjdHgtPnBjeWNsZV9lbmFibGVkKSB7CisgICAgICAgIHRjZ19nZW5fYWRkaV9pNjQoaGV4X2N5
Y2xlX2NvdW50LCBoZXhfY3ljbGVfY291bnQsIGN0eC0+bnVtX2N5Y2xlcyk7CisgICAgICAgIGN0
eC0+bnVtX2N5Y2xlcyA9IDA7CisgICAgfQorfQorI2VuZGlmCisKIHN0YXRpYyB2b2lkIGdlbl9l
eGVjX2NvdW50ZXJzKERpc2FzQ29udGV4dCAqY3R4KQogewogICAgIHRjZ19nZW5fYWRkaV90bCho
ZXhfZ3ByW0hFWF9SRUdfUUVNVV9QS1RfQ05UXSwKQEAgLTEzMyw2ICsxNTAsMTAgQEAgc3RhdGlj
IHZvaWQgZ2VuX2V4ZWNfY291bnRlcnMoRGlzYXNDb250ZXh0ICpjdHgpCiAgICAgICAgICAgICAg
ICAgICAgIGhleF9ncHJbSEVYX1JFR19RRU1VX0lOU05fQ05UXSwgY3R4LT5udW1faW5zbnMpOwog
ICAgIHRjZ19nZW5fYWRkaV90bChoZXhfZ3ByW0hFWF9SRUdfUUVNVV9IVlhfQ05UXSwKICAgICAg
ICAgICAgICAgICAgICAgaGV4X2dwcltIRVhfUkVHX1FFTVVfSFZYX0NOVF0sIGN0eC0+bnVtX2h2
eF9pbnNucyk7CisKKyNpZm5kZWYgQ09ORklHX1VTRVJfT05MWQorICAgZ2VuX3BjeWNsZV9jb3Vu
dGVycyhjdHgpOworI2VuZGlmCiB9CiAKIHN0YXRpYyBib29sIHVzZV9nb3RvX3RiKERpc2FzQ29u
dGV4dCAqY3R4LCB0YXJnZXRfdWxvbmcgZGVzdCkKQEAgLTc4NSw2ICs4MDYsNyBAQCBzdGF0aWMg
dm9pZCBnZW5fY29tbWl0X2h2eChEaXNhc0NvbnRleHQgKmN0eCkKICAgICB9CiB9CiAKK3N0YXRp
YyBjb25zdCBpbnQgUENZQ0xFU19QRVJfUEFDS0VUID0gMzsKIHN0YXRpYyB2b2lkIHVwZGF0ZV9l
eGVjX2NvdW50ZXJzKERpc2FzQ29udGV4dCAqY3R4KQogewogICAgIFBhY2tldCAqcGt0ID0gY3R4
LT5wa3Q7CkBAIC04MDQsNiArODI2LDcgQEAgc3RhdGljIHZvaWQgdXBkYXRlX2V4ZWNfY291bnRl
cnMoRGlzYXNDb250ZXh0ICpjdHgpCiAgICAgfQogCiAgICAgY3R4LT5udW1fcGFja2V0cysrOwor
ICAgIGN0eC0+bnVtX2N5Y2xlcyArPSBQQ1lDTEVTX1BFUl9QQUNLRVQ7CiAgICAgY3R4LT5udW1f
aW5zbnMgKz0gbnVtX3JlYWxfaW5zbnM7CiAgICAgY3R4LT5udW1faHZ4X2luc25zICs9IG51bV9o
dnhfaW5zbnM7CiB9CkBAIC05NDYsMTEgKzk2OSwxMyBAQCBzdGF0aWMgdm9pZCBoZXhhZ29uX3Ry
X2luaXRfZGlzYXNfY29udGV4dChEaXNhc0NvbnRleHRCYXNlICpkY2Jhc2UsCiAKICAgICBjdHgt
Pm1lbV9pZHggPSBGSUVMRF9FWDMyKGhleF9mbGFncywgVEJfRkxBR1MsIE1NVV9JTkRFWCk7CiAg
ICAgY3R4LT5udW1fcGFja2V0cyA9IDA7CisgICAgY3R4LT5udW1fY3ljbGVzID0gMDsKICAgICBj
dHgtPm51bV9pbnNucyA9IDA7CiAgICAgY3R4LT5udW1faHZ4X2luc25zID0gMDsKICAgICBjdHgt
PmJyYW5jaF9jb25kID0gVENHX0NPTkRfTkVWRVI7CiAgICAgY3R4LT5pc190aWdodF9sb29wID0g
RklFTERfRVgzMihoZXhfZmxhZ3MsIFRCX0ZMQUdTLCBJU19USUdIVF9MT09QKTsKICAgICBjdHgt
PnNob3J0X2NpcmN1aXQgPSBoZXhfY3B1LT5zaG9ydF9jaXJjdWl0OworICAgIGN0eC0+cGN5Y2xl
X2VuYWJsZWQgPSBGSUVMRF9FWDMyKGhleF9mbGFncywgVEJfRkxBR1MsIFBDWUNMRV9FTkFCTEVE
KTsKIH0KIAogc3RhdGljIHZvaWQgaGV4YWdvbl90cl90Yl9zdGFydChEaXNhc0NvbnRleHRCYXNl
ICpkYiwgQ1BVU3RhdGUgKmNwdSkKQEAgLTEwNzcsNiArMTEwMiw4IEBAIHZvaWQgaGV4YWdvbl90
cmFuc2xhdGVfaW5pdCh2b2lkKQogICAgICAgICBvZmZzZXRvZihDUFVIZXhhZ29uU3RhdGUsIGxs
c2NfdmFsKSwgImxsc2NfdmFsIik7CiAgICAgaGV4X2xsc2NfdmFsX2k2NCA9IHRjZ19nbG9iYWxf
bWVtX25ld19pNjQodGNnX2VudiwKICAgICAgICAgb2Zmc2V0b2YoQ1BVSGV4YWdvblN0YXRlLCBs
bHNjX3ZhbF9pNjQpLCAibGxzY192YWxfaTY0Iik7CisgICAgaGV4X2N5Y2xlX2NvdW50ID0gdGNn
X2dsb2JhbF9tZW1fbmV3X2k2NCh0Y2dfZW52LAorICAgICAgICAgICAgb2Zmc2V0b2YoQ1BVSGV4
YWdvblN0YXRlLCB0X2N5Y2xlX2NvdW50KSwgInRfY3ljbGVfY291bnQiKTsKICAgICBmb3IgKGkg
PSAwOyBpIDwgU1RPUkVTX01BWDsgaSsrKSB7CiAgICAgICAgIHNucHJpbnRmKHN0b3JlX2FkZHJf
bmFtZXNbaV0sIE5BTUVfTEVOLCAic3RvcmVfYWRkcl8lZCIsIGkpOwogICAgICAgICBoZXhfc3Rv
cmVfYWRkcltpXSA9IHRjZ19nbG9iYWxfbWVtX25ldyh0Y2dfZW52LAotLSAKMi4zNC4xCgo=

