Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 3A3678D5564
	for <lists+qemu-devel@lfdr.de>; Fri, 31 May 2024 00:30:19 +0200 (CEST)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1sCoHP-0007SB-3W; Thu, 30 May 2024 18:29:51 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <pierrick.bouvier@linaro.org>)
 id 1sCoHL-0007RG-Dv
 for qemu-devel@nongnu.org; Thu, 30 May 2024 18:29:47 -0400
Received: from mail-pl1-x631.google.com ([2607:f8b0:4864:20::631])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_128_GCM_SHA256:128)
 (Exim 4.90_1) (envelope-from <pierrick.bouvier@linaro.org>)
 id 1sCoHJ-0000iS-EJ
 for qemu-devel@nongnu.org; Thu, 30 May 2024 18:29:47 -0400
Received: by mail-pl1-x631.google.com with SMTP id
 d9443c01a7336-1f630e35a01so3364465ad.1
 for <qemu-devel@nongnu.org>; Thu, 30 May 2024 15:29:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google; t=1717108183; x=1717712983; darn=nongnu.org;
 h=content-transfer-encoding:in-reply-to:from:references:cc:to
 :content-language:subject:user-agent:mime-version:date:message-id
 :from:to:cc:subject:date:message-id:reply-to;
 bh=bJIBF2y8HANHD0Q6gzbtPFg34ccNcS6D3nx5AmrLQO4=;
 b=yOPClIycAM2omaSxRtkXkzctg2sz+mbe0zd6wCzZS3lzmgtqhRrGz7zZWD4G1u/trb
 f4y8+YQYzBj2tk9AxaI5R029OjtEzTy1UGxKHHgSPVMSTmArU3j5YQbcJ9WiA+NJ08PH
 StSBIg7AxrP0QNrceWW9AuX+H5TaI9XxvW62brYcc3nuxFoshM6ZYgZVOGRc7aOaJI64
 jh1wm3pJLZbmYSSvFqg0TXIe6HXuh+jRsCecNzcMPdjGhOeOpz00qSsVPyAQUykG58ws
 Dk/t9wQfI7QqAzq7dTWDvx5qgKDHnRnyEjkU+CoowncPramJL/lSFeWzXsV4Ic6wUkzM
 MC7g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1717108183; x=1717712983;
 h=content-transfer-encoding:in-reply-to:from:references:cc:to
 :content-language:subject:user-agent:mime-version:date:message-id
 :x-gm-message-state:from:to:cc:subject:date:message-id:reply-to;
 bh=bJIBF2y8HANHD0Q6gzbtPFg34ccNcS6D3nx5AmrLQO4=;
 b=scihe8JMr0Yl37Clgqhmyr9J6Y4MbE8uGJYbTX5lO04r8sJYz318Jdy/B74i1wLdsy
 6YcP6FDF2OLcXu5RYVloMxXU+GN2L9iY6A6lvwn3W89qz/4H5tzzc9Ch+kGRByPj6O0T
 yrKO4n4Is2MFzs6Nr+ldLh3UYoJE8JVmjO/JEJdbs67VlRHG1J45M93krH8UEjPRuX3O
 oZOfKj9tKzzOnvDJgXMv7qLN9jXKspwSZCRHDZQcHCpoE4LjPS64623wUghCKcjmueuS
 mOMmJftK2Yb8dhXz9fWCAk9XcOPcFgN4oi4aPI3l8Fvq3PzyXraDj8dRzvKcVQCaMwI8
 agxQ==
X-Forwarded-Encrypted: i=1;
 AJvYcCUbMr2rA1KjBx3a8eoHgxCPaZKSBZ3n74HdOS1psF1AYQFKMt1uGXZOPmcaAbcHN+9MlfKMq72rTcui84TmPOcNf9ekOWU=
X-Gm-Message-State: AOJu0YxCG9YmflCplYORKvKKwM34KdYrLZSas0/8ePXyjh3KjNNpHu6D
 FAZgYK5NoBOOHjbpPa7u0gYvWiy2B1InuMG6eUPmTY75VuQnDx7tFvWZMLOExNY=
X-Google-Smtp-Source: AGHT+IHnOn7QrVToFY0J5kJuU3DN+hzIrNVydL8eHjGjXJAbOKbh6om6fzVm0zUhCqsUPn9VztuxgA==
X-Received: by 2002:a17:903:11c5:b0:1f4:8bba:5102 with SMTP id
 d9443c01a7336-1f63708fa0emr2015235ad.42.1717108183262; 
 Thu, 30 May 2024 15:29:43 -0700 (PDT)
Received: from ?IPV6:2604:3d08:9384:1d00::e697? ([2604:3d08:9384:1d00::e697])
 by smtp.gmail.com with ESMTPSA id
 d9443c01a7336-1f63237d065sm2878295ad.111.2024.05.30.15.29.42
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Thu, 30 May 2024 15:29:42 -0700 (PDT)
Message-ID: <2a20631b-ce2a-4079-87c6-f77c0ba589e3@linaro.org>
Date: Thu, 30 May 2024 15:29:41 -0700
MIME-Version: 1.0
User-Agent: Mozilla Thunderbird
Subject: Re: [PATCH 2/5] cpu: move Qemu[Thread|Cond] setup into common code
Content-Language: en-US
To: =?UTF-8?Q?Alex_Benn=C3=A9e?= <alex.bennee@linaro.org>,
 qemu-devel@nongnu.org
Cc: Marcel Apfelbaum <marcel.apfelbaum@gmail.com>,
 Cameron Esfahani <dirty@apple.com>, Alexandre Iooss <erdnaxe@crans.org>,
 Yanan Wang <wangyanan55@huawei.com>, Paolo Bonzini <pbonzini@redhat.com>,
 Eduardo Habkost <eduardo@habkost.net>,
 Sunil Muthuswamy <sunilmut@microsoft.com>,
 Richard Henderson <richard.henderson@linaro.org>,
 =?UTF-8?Q?Philippe_Mathieu-Daud=C3=A9?= <philmd@linaro.org>,
 Mahmoud Mandour <ma.mandourr@gmail.com>, Reinoud Zandijk
 <reinoud@netbsd.org>, kvm@vger.kernel.org,
 Roman Bolshakov <rbolshakov@ddn.com>
References: <20240530194250.1801701-1-alex.bennee@linaro.org>
 <20240530194250.1801701-3-alex.bennee@linaro.org>
From: Pierrick Bouvier <pierrick.bouvier@linaro.org>
In-Reply-To: <20240530194250.1801701-3-alex.bennee@linaro.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Received-SPF: pass client-ip=2607:f8b0:4864:20::631;
 envelope-from=pierrick.bouvier@linaro.org; helo=mail-pl1-x631.google.com
X-Spam_score_int: -20
X-Spam_score: -2.1
X-Spam_bar: --
X-Spam_report: (-2.1 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1,
 RCVD_IN_DNSWL_NONE=-0.0001, SPF_HELO_NONE=0.001, SPF_PASS=-0.001,
 T_SCC_BODY_TEXT_LINE=-0.01 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

T24gNS8zMC8yNCAxMjo0MiwgQWxleCBCZW5uw6llIHdyb3RlOg0KPiBBc2lkZSBmcm9tIHRo
ZSByb3VuZCByb2JpbiB0aHJlYWRzIHRoaXMgaXMgYWxsIGNvbW1vbiBjb2RlLiBCeQ0KPiBt
b3ZpbmcgdGhlIGhhbHRfY29uZCBzZXR1cCB3ZSBhbHNvIG5vIGxvbmdlciBuZWVkIGhhY2tz
IHRvIHdvcmsgYXJvdW5kDQo+IHRoZSByYWNlIGJldHdlZW4gUU9NIG9iamVjdCBjcmVhdGlv
biBhbmQgdGhyZWFkIGNyZWF0aW9uLg0KPiANCj4gSXQgaXMgYSBsaXR0bGUgdWdseSB0byBm
cmVlIHN0dWZmIHVwIGZvciB0aGUgcm91bmQgcm9iaW4gdGhyZWFkIGJ1dA0KPiBiZXR0ZXIg
aXQgZGVhbCB3aXRoIGl0cyBvd24gc3BlY2lhbGlzZXMgdGhhbiBtYWtpbmcgdGhlIG90aGVy
DQo+IGFjY2VsZXJhdG9ycyBqdW1wIHRocm91Z2ggaG9vcHMuDQo+IA0KPiBTaWduZWQtb2Zm
LWJ5OiBBbGV4IEJlbm7DqWUgPGFsZXguYmVubmVlQGxpbmFyby5vcmc+DQo+IC0tLQ0KPiAg
IGluY2x1ZGUvaHcvY29yZS9jcHUuaCAgICAgICAgICAgICB8ICA0ICsrKysNCj4gICBhY2Nl
bC9kdW1teS1jcHVzLmMgICAgICAgICAgICAgICAgfCAgMyAtLS0NCj4gICBhY2NlbC9odmYv
aHZmLWFjY2VsLW9wcy5jICAgICAgICAgfCAgNCAtLS0tDQo+ICAgYWNjZWwva3ZtL2t2bS1h
Y2NlbC1vcHMuYyAgICAgICAgIHwgIDMgLS0tDQo+ICAgYWNjZWwvdGNnL3RjZy1hY2NlbC1v
cHMtbXR0Y2cuYyAgIHwgIDQgLS0tLQ0KPiAgIGFjY2VsL3RjZy90Y2ctYWNjZWwtb3BzLXJy
LmMgICAgICB8IDE0ICsrKysrKystLS0tLS0tDQo+ICAgaHcvY29yZS9jcHUtY29tbW9uLmMg
ICAgICAgICAgICAgIHwgIDUgKysrKysNCj4gICB0YXJnZXQvaTM4Ni9udm1tL252bW0tYWNj
ZWwtb3BzLmMgfCAgMyAtLS0NCj4gICB0YXJnZXQvaTM4Ni93aHB4L3docHgtYWNjZWwtb3Bz
LmMgfCAgMyAtLS0NCj4gICA5IGZpbGVzIGNoYW5nZWQsIDE2IGluc2VydGlvbnMoKyksIDI3
IGRlbGV0aW9ucygtKQ0KPiANCj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvaHcvY29yZS9jcHUu
aCBiL2luY2x1ZGUvaHcvY29yZS9jcHUuaA0KPiBpbmRleCAzNWQzNDUzNzFiLi5hNDA1MTE5
ZWRhIDEwMDY0NA0KPiAtLS0gYS9pbmNsdWRlL2h3L2NvcmUvY3B1LmgNCj4gKysrIGIvaW5j
bHVkZS9ody9jb3JlL2NwdS5oDQo+IEBAIC00MDQsMTAgKzQwNCwxNCBAQCBzdHJ1Y3QgcWVt
dV93b3JrX2l0ZW07DQo+ICAgICogQHRjZ19jZmxhZ3M6IFByZS1jb21wdXRlZCBjZmxhZ3Mg
Zm9yIHRoaXMgY3B1Lg0KPiAgICAqIEBucl9jb3JlczogTnVtYmVyIG9mIGNvcmVzIHdpdGhp
biB0aGlzIENQVSBwYWNrYWdlLg0KPiAgICAqIEBucl90aHJlYWRzOiBOdW1iZXIgb2YgdGhy
ZWFkcyB3aXRoaW4gdGhpcyBDUFUgY29yZS4NCj4gKyAqIEB0aHJlYWQ6IEhvc3QgdGhyZWFk
IGRldGFpbHMsIG9ubHkgbGl2ZSBvbmNlIEBjcmVhdGVkIGlzICN0cnVlDQo+ICsgKiBAc2Vt
OiBXSU4zMiBvbmx5IHNlbWFwaG9yZSB1c2VkIG9ubHkgZm9yIHF0ZXN0DQo+ICsgKiBAdGhy
ZWFkX2lkOiBuYXRpdmUgdGhyZWFkIGlkIG9mIHZDUFUsIG9ubHkgbGl2ZSBvbmNlIEBjcmVh
dGVkIGlzICN0cnVlDQo+ICAgICogQHJ1bm5pbmc6ICN0cnVlIGlmIENQVSBpcyBjdXJyZW50
bHkgcnVubmluZyAobG9ja2xlc3MpLg0KPiAgICAqIEBoYXNfd2FpdGVyOiAjdHJ1ZSBpZiBh
IENQVSBpcyBjdXJyZW50bHkgd2FpdGluZyBmb3IgdGhlIGNwdV9leGVjX2VuZDsNCj4gICAg
KiB2YWxpZCB1bmRlciBjcHVfbGlzdF9sb2NrLg0KPiAgICAqIEBjcmVhdGVkOiBJbmRpY2F0
ZXMgd2hldGhlciB0aGUgQ1BVIHRocmVhZCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgY3JlYXRl
ZC4NCj4gKyAqIEBoYWx0X2NvbmQ6IGNvbmRpdGlvbiB2YXJpYWJsZSBzbGVlcGluZyB0aHJl
YWRzIGNhbiB3YWl0IG9uLg0KPiAgICAqIEBpbnRlcnJ1cHRfcmVxdWVzdDogSW5kaWNhdGVz
IGEgcGVuZGluZyBpbnRlcnJ1cHQgcmVxdWVzdC4NCj4gICAgKiBAaGFsdGVkOiBOb256ZXJv
IGlmIHRoZSBDUFUgaXMgaW4gc3VzcGVuZGVkIHN0YXRlLg0KPiAgICAqIEBzdG9wOiBJbmRp
Y2F0ZXMgYSBwZW5kaW5nIHN0b3AgcmVxdWVzdC4NCj4gZGlmZiAtLWdpdCBhL2FjY2VsL2R1
bW15LWNwdXMuYyBiL2FjY2VsL2R1bW15LWNwdXMuYw0KPiBpbmRleCAyMDUxOWYxZWE0Li5m
MzJkOGM4ZGMzIDEwMDY0NA0KPiAtLS0gYS9hY2NlbC9kdW1teS1jcHVzLmMNCj4gKysrIGIv
YWNjZWwvZHVtbXktY3B1cy5jDQo+IEBAIC02OCw5ICs2OCw2IEBAIHZvaWQgZHVtbXlfc3Rh
cnRfdmNwdV90aHJlYWQoQ1BVU3RhdGUgKmNwdSkNCj4gICB7DQo+ICAgICAgIGNoYXIgdGhy
ZWFkX25hbWVbVkNQVV9USFJFQURfTkFNRV9TSVpFXTsNCj4gICANCj4gLSAgICBjcHUtPnRo
cmVhZCA9IGdfbWFsbG9jMChzaXplb2YoUWVtdVRocmVhZCkpOw0KPiAtICAgIGNwdS0+aGFs
dF9jb25kID0gZ19tYWxsb2MwKHNpemVvZihRZW11Q29uZCkpOw0KPiAtICAgIHFlbXVfY29u
ZF9pbml0KGNwdS0+aGFsdF9jb25kKTsNCj4gICAgICAgc25wcmludGYodGhyZWFkX25hbWUs
IFZDUFVfVEhSRUFEX05BTUVfU0laRSwgIkNQVSAlZC9EVU1NWSIsDQo+ICAgICAgICAgICAg
ICAgIGNwdS0+Y3B1X2luZGV4KTsNCj4gICAgICAgcWVtdV90aHJlYWRfY3JlYXRlKGNwdS0+
dGhyZWFkLCB0aHJlYWRfbmFtZSwgZHVtbXlfY3B1X3RocmVhZF9mbiwgY3B1LA0KPiBkaWZm
IC0tZ2l0IGEvYWNjZWwvaHZmL2h2Zi1hY2NlbC1vcHMuYyBiL2FjY2VsL2h2Zi9odmYtYWNj
ZWwtb3BzLmMNCj4gaW5kZXggNDBkNDE4N2Q5ZC4uNmYxZTI3ZWY0NiAxMDA2NDQNCj4gLS0t
IGEvYWNjZWwvaHZmL2h2Zi1hY2NlbC1vcHMuYw0KPiArKysgYi9hY2NlbC9odmYvaHZmLWFj
Y2VsLW9wcy5jDQo+IEBAIC00NjMsMTAgKzQ2Myw2IEBAIHN0YXRpYyB2b2lkIGh2Zl9zdGFy
dF92Y3B1X3RocmVhZChDUFVTdGF0ZSAqY3B1KQ0KPiAgICAgICAgKi8NCj4gICAgICAgYXNz
ZXJ0KGh2Zl9lbmFibGVkKCkpOw0KPiAgIA0KPiAtICAgIGNwdS0+dGhyZWFkID0gZ19tYWxs
b2MwKHNpemVvZihRZW11VGhyZWFkKSk7DQo+IC0gICAgY3B1LT5oYWx0X2NvbmQgPSBnX21h
bGxvYzAoc2l6ZW9mKFFlbXVDb25kKSk7DQo+IC0gICAgcWVtdV9jb25kX2luaXQoY3B1LT5o
YWx0X2NvbmQpOw0KPiAtDQo+ICAgICAgIHNucHJpbnRmKHRocmVhZF9uYW1lLCBWQ1BVX1RI
UkVBRF9OQU1FX1NJWkUsICJDUFUgJWQvSFZGIiwNCj4gICAgICAgICAgICAgICAgY3B1LT5j
cHVfaW5kZXgpOw0KPiAgICAgICBxZW11X3RocmVhZF9jcmVhdGUoY3B1LT50aHJlYWQsIHRo
cmVhZF9uYW1lLCBodmZfY3B1X3RocmVhZF9mbiwNCj4gZGlmZiAtLWdpdCBhL2FjY2VsL2t2
bS9rdm0tYWNjZWwtb3BzLmMgYi9hY2NlbC9rdm0va3ZtLWFjY2VsLW9wcy5jDQo+IGluZGV4
IDk0YzgyOGFjOGQuLmMyMzlkZmM4N2EgMTAwNjQ0DQo+IC0tLSBhL2FjY2VsL2t2bS9rdm0t
YWNjZWwtb3BzLmMNCj4gKysrIGIvYWNjZWwva3ZtL2t2bS1hY2NlbC1vcHMuYw0KPiBAQCAt
NjYsOSArNjYsNiBAQCBzdGF0aWMgdm9pZCBrdm1fc3RhcnRfdmNwdV90aHJlYWQoQ1BVU3Rh
dGUgKmNwdSkNCj4gICB7DQo+ICAgICAgIGNoYXIgdGhyZWFkX25hbWVbVkNQVV9USFJFQURf
TkFNRV9TSVpFXTsNCj4gICANCj4gLSAgICBjcHUtPnRocmVhZCA9IGdfbWFsbG9jMChzaXpl
b2YoUWVtdVRocmVhZCkpOw0KPiAtICAgIGNwdS0+aGFsdF9jb25kID0gZ19tYWxsb2MwKHNp
emVvZihRZW11Q29uZCkpOw0KPiAtICAgIHFlbXVfY29uZF9pbml0KGNwdS0+aGFsdF9jb25k
KTsNCj4gICAgICAgc25wcmludGYodGhyZWFkX25hbWUsIFZDUFVfVEhSRUFEX05BTUVfU0la
RSwgIkNQVSAlZC9LVk0iLA0KPiAgICAgICAgICAgICAgICBjcHUtPmNwdV9pbmRleCk7DQo+
ICAgICAgIHFlbXVfdGhyZWFkX2NyZWF0ZShjcHUtPnRocmVhZCwgdGhyZWFkX25hbWUsIGt2
bV92Y3B1X3RocmVhZF9mbiwNCj4gZGlmZiAtLWdpdCBhL2FjY2VsL3RjZy90Y2ctYWNjZWwt
b3BzLW10dGNnLmMgYi9hY2NlbC90Y2cvdGNnLWFjY2VsLW9wcy1tdHRjZy5jDQo+IGluZGV4
IGM1NTJiNDViOGUuLjQ5ODE0ZWM0YWYgMTAwNjQ0DQo+IC0tLSBhL2FjY2VsL3RjZy90Y2ct
YWNjZWwtb3BzLW10dGNnLmMNCj4gKysrIGIvYWNjZWwvdGNnL3RjZy1hY2NlbC1vcHMtbXR0
Y2cuYw0KPiBAQCAtMTM3LDEwICsxMzcsNiBAQCB2b2lkIG10dGNnX3N0YXJ0X3ZjcHVfdGhy
ZWFkKENQVVN0YXRlICpjcHUpDQo+ICAgICAgIGdfYXNzZXJ0KHRjZ19lbmFibGVkKCkpOw0K
PiAgICAgICB0Y2dfY3B1X2luaXRfY2ZsYWdzKGNwdSwgY3VycmVudF9tYWNoaW5lLT5zbXAu
bWF4X2NwdXMgPiAxKTsNCj4gICANCj4gLSAgICBjcHUtPnRocmVhZCA9IGdfbmV3MChRZW11
VGhyZWFkLCAxKTsNCj4gLSAgICBjcHUtPmhhbHRfY29uZCA9IGdfbWFsbG9jMChzaXplb2Yo
UWVtdUNvbmQpKTsNCj4gLSAgICBxZW11X2NvbmRfaW5pdChjcHUtPmhhbHRfY29uZCk7DQo+
IC0NCj4gICAgICAgLyogY3JlYXRlIGEgdGhyZWFkIHBlciB2Q1BVIHdpdGggVENHIChNVFRD
RykgKi8NCj4gICAgICAgc25wcmludGYodGhyZWFkX25hbWUsIFZDUFVfVEhSRUFEX05BTUVf
U0laRSwgIkNQVSAlZC9UQ0ciLA0KPiAgICAgICAgICAgICAgICBjcHUtPmNwdV9pbmRleCk7
DQo+IGRpZmYgLS1naXQgYS9hY2NlbC90Y2cvdGNnLWFjY2VsLW9wcy1yci5jIGIvYWNjZWwv
dGNnL3RjZy1hY2NlbC1vcHMtcnIuYw0KPiBpbmRleCA4OTRlNzNlNTJjLi44NGMzNmMxNDUw
IDEwMDY0NA0KPiAtLS0gYS9hY2NlbC90Y2cvdGNnLWFjY2VsLW9wcy1yci5jDQo+ICsrKyBi
L2FjY2VsL3RjZy90Y2ctYWNjZWwtb3BzLXJyLmMNCj4gQEAgLTMxNywyMiArMzE3LDIyIEBA
IHZvaWQgcnJfc3RhcnRfdmNwdV90aHJlYWQoQ1BVU3RhdGUgKmNwdSkNCj4gICAgICAgdGNn
X2NwdV9pbml0X2NmbGFncyhjcHUsIGZhbHNlKTsNCj4gICANCj4gICAgICAgaWYgKCFzaW5n
bGVfdGNnX2NwdV90aHJlYWQpIHsNCj4gLSAgICAgICAgY3B1LT50aHJlYWQgPSBnX25ldzAo
UWVtdVRocmVhZCwgMSk7DQo+IC0gICAgICAgIGNwdS0+aGFsdF9jb25kID0gZ19uZXcwKFFl
bXVDb25kLCAxKTsNCj4gLSAgICAgICAgcWVtdV9jb25kX2luaXQoY3B1LT5oYWx0X2NvbmQp
Ow0KPiArICAgICAgICBzaW5nbGVfdGNnX2hhbHRfY29uZCA9IGNwdS0+aGFsdF9jb25kOw0K
PiArICAgICAgICBzaW5nbGVfdGNnX2NwdV90aHJlYWQgPSBjcHUtPnRocmVhZDsNCj4gICAN
Cj4gICAgICAgICAgIC8qIHNoYXJlIGEgc2luZ2xlIHRocmVhZCBmb3IgYWxsIGNwdXMgd2l0
aCBUQ0cgKi8NCj4gICAgICAgICAgIHNucHJpbnRmKHRocmVhZF9uYW1lLCBWQ1BVX1RIUkVB
RF9OQU1FX1NJWkUsICJBTEwgQ1BVcy9UQ0ciKTsNCj4gICAgICAgICAgIHFlbXVfdGhyZWFk
X2NyZWF0ZShjcHUtPnRocmVhZCwgdGhyZWFkX25hbWUsDQo+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcnJfY3B1X3RocmVhZF9mbiwNCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBjcHUsIFFFTVVfVEhSRUFEX0pPSU5BQkxFKTsNCj4gLQ0KPiAtICAgICAgICBz
aW5nbGVfdGNnX2hhbHRfY29uZCA9IGNwdS0+aGFsdF9jb25kOw0KPiAtICAgICAgICBzaW5n
bGVfdGNnX2NwdV90aHJlYWQgPSBjcHUtPnRocmVhZDsNCj4gICAgICAgfSBlbHNlIHsNCj4g
LSAgICAgICAgLyogd2Ugc2hhcmUgdGhlIHRocmVhZCAqLw0KPiArICAgICAgICAvKiB3ZSBz
aGFyZSB0aGUgdGhyZWFkLCBkdW1wIHNwYXJlIGRhdGEgKi8NCj4gKyAgICAgICAgZ19mcmVl
KGNwdS0+dGhyZWFkKTsNCj4gKyAgICAgICAgcWVtdV9jb25kX2Rlc3Ryb3koY3B1LT5oYWx0
X2NvbmQpOw0KPiAgICAgICAgICAgY3B1LT50aHJlYWQgPSBzaW5nbGVfdGNnX2NwdV90aHJl
YWQ7DQo+ICAgICAgICAgICBjcHUtPmhhbHRfY29uZCA9IHNpbmdsZV90Y2dfaGFsdF9jb25k
Ow0KPiArDQo+ICsgICAgICAgIC8qIGNvcHkgdGhlIHN0dWZmIGRvbmUgYXQgc3RhcnQgb2Yg
cnJfY3B1X3RocmVhZF9mbiAqLw0KPiAgICAgICAgICAgY3B1LT50aHJlYWRfaWQgPSBmaXJz
dF9jcHUtPnRocmVhZF9pZDsNCj4gICAgICAgICAgIGNwdS0+bmVnLmNhbl9kb19pbyA9IDE7
DQo+ICAgICAgICAgICBjcHUtPmNyZWF0ZWQgPSB0cnVlOw0KPiBkaWZmIC0tZ2l0IGEvaHcv
Y29yZS9jcHUtY29tbW9uLmMgYi9ody9jb3JlL2NwdS1jb21tb24uYw0KPiBpbmRleCAwZjBh
MjQ3ZjU2Li42Y2ZjMDE1OTNhIDEwMDY0NA0KPiAtLS0gYS9ody9jb3JlL2NwdS1jb21tb24u
Yw0KPiArKysgYi9ody9jb3JlL2NwdS1jb21tb24uYw0KPiBAQCAtMjYxLDYgKzI2MSwxMSBA
QCBzdGF0aWMgdm9pZCBjcHVfY29tbW9uX2luaXRmbihPYmplY3QgKm9iaikNCj4gICAgICAg
Y3B1LT5ucl90aHJlYWRzID0gMTsNCj4gICAgICAgY3B1LT5jZmxhZ3NfbmV4dF90YiA9IC0x
Ow0KPiAgIA0KPiArICAgIC8qIGFsbG9jYXRlIHN0b3JhZ2UgZm9yIHRocmVhZCBpbmZvLCBp
bml0aWFsaXNlIGNvbmRpdGlvbiB2YXJpYWJsZXMgKi8NCj4gKyAgICBjcHUtPnRocmVhZCA9
IGdfbmV3MChRZW11VGhyZWFkLCAxKTsNCj4gKyAgICBjcHUtPmhhbHRfY29uZCA9IGdfbmV3
MChRZW11Q29uZCwgMSk7DQo+ICsgICAgcWVtdV9jb25kX2luaXQoY3B1LT5oYWx0X2NvbmQp
Ow0KPiArDQo+ICAgICAgIHFlbXVfbXV0ZXhfaW5pdCgmY3B1LT53b3JrX211dGV4KTsNCj4g
ICAgICAgcWVtdV9sb2NrY250X2luaXQoJmNwdS0+aW5faW9jdGxfbG9jayk7DQo+ICAgICAg
IFFTSU1QTEVRX0lOSVQoJmNwdS0+d29ya19saXN0KTsNCj4gZGlmZiAtLWdpdCBhL3Rhcmdl
dC9pMzg2L252bW0vbnZtbS1hY2NlbC1vcHMuYyBiL3RhcmdldC9pMzg2L252bW0vbnZtbS1h
Y2NlbC1vcHMuYw0KPiBpbmRleCA2YjJiZmQ5YjljLi4wYmEzMTIwMWUyIDEwMDY0NA0KPiAt
LS0gYS90YXJnZXQvaTM4Ni9udm1tL252bW0tYWNjZWwtb3BzLmMNCj4gKysrIGIvdGFyZ2V0
L2kzODYvbnZtbS9udm1tLWFjY2VsLW9wcy5jDQo+IEBAIC02NCw5ICs2NCw2IEBAIHN0YXRp
YyB2b2lkIG52bW1fc3RhcnRfdmNwdV90aHJlYWQoQ1BVU3RhdGUgKmNwdSkNCj4gICB7DQo+
ICAgICAgIGNoYXIgdGhyZWFkX25hbWVbVkNQVV9USFJFQURfTkFNRV9TSVpFXTsNCj4gICAN
Cj4gLSAgICBjcHUtPnRocmVhZCA9IGdfbmV3MChRZW11VGhyZWFkLCAxKTsNCj4gLSAgICBj
cHUtPmhhbHRfY29uZCA9IGdfbmV3MChRZW11Q29uZCwgMSk7DQo+IC0gICAgcWVtdV9jb25k
X2luaXQoY3B1LT5oYWx0X2NvbmQpOw0KPiAgICAgICBzbnByaW50Zih0aHJlYWRfbmFtZSwg
VkNQVV9USFJFQURfTkFNRV9TSVpFLCAiQ1BVICVkL05WTU0iLA0KPiAgICAgICAgICAgICAg
ICBjcHUtPmNwdV9pbmRleCk7DQo+ICAgICAgIHFlbXVfdGhyZWFkX2NyZWF0ZShjcHUtPnRo
cmVhZCwgdGhyZWFkX25hbWUsIHFlbXVfbnZtbV9jcHVfdGhyZWFkX2ZuLA0KPiBkaWZmIC0t
Z2l0IGEvdGFyZ2V0L2kzODYvd2hweC93aHB4LWFjY2VsLW9wcy5jIGIvdGFyZ2V0L2kzODYv
d2hweC93aHB4LWFjY2VsLW9wcy5jDQo+IGluZGV4IDE4OWFlMGYxNDAuLjFhMmI0ZTFjNDMg
MTAwNjQ0DQo+IC0tLSBhL3RhcmdldC9pMzg2L3docHgvd2hweC1hY2NlbC1vcHMuYw0KPiAr
KysgYi90YXJnZXQvaTM4Ni93aHB4L3docHgtYWNjZWwtb3BzLmMNCj4gQEAgLTY0LDkgKzY0
LDYgQEAgc3RhdGljIHZvaWQgd2hweF9zdGFydF92Y3B1X3RocmVhZChDUFVTdGF0ZSAqY3B1
KQ0KPiAgIHsNCj4gICAgICAgY2hhciB0aHJlYWRfbmFtZVtWQ1BVX1RIUkVBRF9OQU1FX1NJ
WkVdOw0KPiAgIA0KPiAtICAgIGNwdS0+dGhyZWFkID0gZ19uZXcwKFFlbXVUaHJlYWQsIDEp
Ow0KPiAtICAgIGNwdS0+aGFsdF9jb25kID0gZ19uZXcwKFFlbXVDb25kLCAxKTsNCj4gLSAg
ICBxZW11X2NvbmRfaW5pdChjcHUtPmhhbHRfY29uZCk7DQo+ICAgICAgIHNucHJpbnRmKHRo
cmVhZF9uYW1lLCBWQ1BVX1RIUkVBRF9OQU1FX1NJWkUsICJDUFUgJWQvV0hQWCIsDQo+ICAg
ICAgICAgICAgICAgIGNwdS0+Y3B1X2luZGV4KTsNCj4gICAgICAgcWVtdV90aHJlYWRfY3Jl
YXRlKGNwdS0+dGhyZWFkLCB0aHJlYWRfbmFtZSwgd2hweF9jcHVfdGhyZWFkX2ZuLA0KDQpS
ZXZpZXdlZC1ieTogUGllcnJpY2sgQm91dmllciA8cGllcnJpY2suYm91dmllckBsaW5hcm8u
b3JnPg0K

