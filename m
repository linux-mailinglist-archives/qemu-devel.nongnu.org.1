Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 933CF8D7B33
	for <lists+qemu-devel@lfdr.de>; Mon,  3 Jun 2024 08:01:23 +0200 (CEST)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1sE0jw-0006ri-PB; Mon, 03 Jun 2024 02:00:16 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <clement.mathieu--drif@eviden.com>)
 id 1sE0jl-0006nM-Nf
 for qemu-devel@nongnu.org; Mon, 03 Jun 2024 02:00:05 -0400
Received: from smarthost2.eviden.com ([80.78.11.83])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <clement.mathieu--drif@eviden.com>)
 id 1sE0jf-000731-69
 for qemu-devel@nongnu.org; Mon, 03 Jun 2024 02:00:01 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
 d=eviden.com; i=@eviden.com; q=dns/txt; s=mail;
 t=1717394399; x=1748930399;
 h=from:to:cc:subject:date:message-id:references:
 in-reply-to:content-id:content-transfer-encoding: mime-version;
 bh=89kz2uZWAOgE5eTvYbbmfDZ+DOtI2Rb/PyJY5T5dams=;
 b=eE6NLiXShQbYKTcjWrepu0P+HSLv58AjZo9igwC/ONh8HlmF2Uhazx0J
 pB/9Mn9HRfC1zMckoO4VAOR/KVsPNwgctRLUjfDHb/zAegjCArq5WlIXq
 2TV82A9cIMfZnUY4fXgrmdunOW2Wz3DGombqyK79OXWmx6qu/nu6+BeGV
 ohRjZ5CB8gNPtvW+ugIt+Ws44QTD0uA1EMWsfCAotwB5uvzz4jXSUptd8
 z8mZ5Xx8pEe4RPOmFU/kKkmQH6CUVYsKompl/qho8M0E9JcRWjiqXdbiU
 bxX3CulNEZqv1qnH2myJDyC7PMoUSsPEU4n9EKkoO7L5C4c0KejhTqn8Q g==;
X-IronPort-AV: E=Sophos;i="6.08,210,1712613600"; d="scan'208";a="13763251"
X-MGA-submission: =?us-ascii?q?MDEhRueoPZ2SneOXDWaF/qVCmIZ0XWUWVw1hUB?=
 =?us-ascii?q?5jdhvWYDvS0uPLOPBUo4PH2MRNk5hX4umsRpb++0oVsS1qxFGCuPHke7?=
 =?us-ascii?q?BzkraSCcvPV04U28mH+Pok2QZKLnuxAP9jissimZ2f1T9fecroIBsKkT?=
 =?us-ascii?q?pcYW86i9AslOVvbVjkrYxXig=3D=3D?=
Received: from mail-he1eur01lp2051.outbound.protection.outlook.com (HELO
 EUR01-HE1-obe.outbound.protection.outlook.com) ([104.47.0.51])
 by smarthost2.eviden.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384;
 03 Jun 2024 07:59:55 +0200
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=j443M289D2aWD46oV8TJcANoImizt/UgWRlOpdOfGqApYYi3UYiPvBn5Z7R34/Y1JJooQTyOVVfkb7QH16wc4NPx2XrDacT+Ju0QB9a+Veje/GfiJdFGPh3+XysbcfiYEx+pZG9KGMLCIGhCd2PuR+NUx1+6WcMF6lQ0wl0bFE1dh1PRYoz17wE5GxA62zP4goE4RC+RvQhomoFnSbaFSpMA+ndXcnF9NzT1P4LNHcYSOZaNssTg3cjrFgvPxdZkRnCisMpOEcgfrlbRpj2eZ79BohI24W2j1lfX/jGcAtD/KEb4o2b7n4H3xJ5egiQ/P4twchaPWrooJ33vRWbpdA==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com; 
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=89kz2uZWAOgE5eTvYbbmfDZ+DOtI2Rb/PyJY5T5dams=;
 b=LNzkzm3oLnQSrNPGIRKwnf905za1e/RKw3TW6RMWusRq4weL4UkYHuzwbF66FPCh5DfyBkA7K+fLVfw8CL1e0/BzVWjDc9XFr9PoRBfe3HncAgcIaKod9uXr+HvvtDQt+2FIiavlm1DLYfBbOeETuHxMnxItQi19cQUrqlHOLZ16GcQVnvlfaaE/Gd3aLu5T60sfDMjVhNzgHNfj3cm2ayqcjAgSn5D+iaqX8XhLv44CQML6dcKkNz8kSmdI/uxs1Hhz4gUS/D19XO6KmRuJazgs5K2Osey6gk/pxekd0KkawSE/YJl0K1sbc24lDu5/6ZWbro+/xjpRWrdVJe0DYg==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=eviden.com; dmarc=pass action=none header.from=eviden.com;
 dkim=pass header.d=eviden.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=Eviden.com;
 s=selector1;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=89kz2uZWAOgE5eTvYbbmfDZ+DOtI2Rb/PyJY5T5dams=;
 b=q+6A0GylRHReocXIdZuG+m6pX7uk75h6aJnRK3rtnHNvlVwRvwkkY8VuZeWbL/i3+HPnWHdQqLZUFAOknnjzCffXdbilfosOZU2VDPwYKWAnIIzjsHpI+tDDVCZVECFRVNbWOj/HXbppyAtHRuX2m24zOkZI6R7GZcIyTkcP5+BUc2b4ZshJttrXKcPbvAhj63g/tk9b9tkn+Ilqk3OEhZhHj+vDRLkCdcyTQiQJKWwWT+1vluEOJMU6Sq+KBW6Na8M1KnQXePMVNL6xPkOS/QvAJ2/5yM1btOU+WZXzVqmce9WvlcmbxeXu5uwND0vBQCp5QwTRd5X6kDW05UG6Xg==
Received: from AM8PR07MB7602.eurprd07.prod.outlook.com (2603:10a6:20b:24b::7)
 by VI1PR07MB6238.eurprd07.prod.outlook.com (2603:10a6:800:136::13)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.7633.21; Mon, 3 Jun
 2024 05:59:51 +0000
Received: from AM8PR07MB7602.eurprd07.prod.outlook.com
 ([fe80::fbd7:ca71:b636:6f9d]) by AM8PR07MB7602.eurprd07.prod.outlook.com
 ([fe80::fbd7:ca71:b636:6f9d%5]) with mapi id 15.20.7633.021; Mon, 3 Jun 2024
 05:59:51 +0000
From: CLEMENT MATHIEU--DRIF <clement.mathieu--drif@eviden.com>
To: "qemu-devel@nongnu.org" <qemu-devel@nongnu.org>
CC: "jasowang@redhat.com" <jasowang@redhat.com>, "zhenzhong.duan@intel.com"
 <zhenzhong.duan@intel.com>, "kevin.tian@intel.com" <kevin.tian@intel.com>,
 "yi.l.liu@intel.com" <yi.l.liu@intel.com>, "joao.m.martins@oracle.com"
 <joao.m.martins@oracle.com>, "peterx@redhat.com" <peterx@redhat.com>,
 "mst@redhat.com" <mst@redhat.com>, CLEMENT MATHIEU--DRIF
 <clement.mathieu--drif@eviden.com>
Subject: [PATCH ats_vtd v5 17/22] atc: generic ATC that can be used by PCIe
 devices that support SVM
Thread-Topic: [PATCH ats_vtd v5 17/22] atc: generic ATC that can be used by
 PCIe devices that support SVM
Thread-Index: AQHatXs/4cl8uzc3D06D64WXq8wIGg==
Date: Mon, 3 Jun 2024 05:59:51 +0000
Message-ID: <20240603055917.18735-18-clement.mathieu--drif@eviden.com>
References: <20240603055917.18735-1-clement.mathieu--drif@eviden.com>
In-Reply-To: <20240603055917.18735-1-clement.mathieu--drif@eviden.com>
Accept-Language: en-GB, fr-FR, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=eviden.com;
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: AM8PR07MB7602:EE_|VI1PR07MB6238:EE_
x-ms-office365-filtering-correlation-id: fbb2d89d-1f7b-4ec4-9b67-08dc83926250
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0; ARA:13230031|376005|366007|1800799015|38070700009;
x-microsoft-antispam-message-info: =?utf-8?B?clZxSFJYTktlWnk2dnpjSEkzYXoySC9hNG5hUzFxT21TOTk2d3h0YkpibWhr?=
 =?utf-8?B?R1JZR1dzNlY3cktaU3RKdE0wUUpvc2tWc3FYR28zdm01SlZxUzJFYVppdGRP?=
 =?utf-8?B?NmY5c1dGdDVqWWU1Rk90ZFFPN2k5am9lU2RFdVVCd0l2SzEvaVh0STVKUlVz?=
 =?utf-8?B?b3VVZlBEWC93M1A0VlRNVkJtcHh1ZkVFQTlHY25RWFl6SEpkZjBGa3Z6ZzBQ?=
 =?utf-8?B?Nzc0YnZ3ZjZRZmFENUpRTmpnYURWUlQxYjBET0pNN2FkOXZpOVI3eG1iYTJE?=
 =?utf-8?B?TTdLVGdMRVRjWit1WGF3Y2RQeXoxMStZQmg5Q1FTZ0VuSm9kNG5rSzZKbHI5?=
 =?utf-8?B?QlBFdTNkckQ4VzlhVnZtdHVEK1lQSUNNL0c2TnhIQkZreHJucW4vTG1CYjVL?=
 =?utf-8?B?OVdITk1GNjFsc2FVRFhyN3RVVytySEVJMGVaOU9IKzltRGh0YkF6SFVIbUdI?=
 =?utf-8?B?ek9SMVMxUktKMFNKMjVLdHQyNEl6TFphRGhSV1h1TlBnejBadHlQS3BiZEM0?=
 =?utf-8?B?dVBMZ01qeDFPS1lpU1Y2NnpWSE9yeXF2SzdvaVdPQi9Fb09BMU54TGI3V3pP?=
 =?utf-8?B?MUQ1QVFUYzN0aTVINzgxb3ZjeWNYcW1xS3NJeFRQdE9oSUJNU0NpT0FEYW43?=
 =?utf-8?B?MW5meXoyL3BYcmgxM1FkU01RQUR3L2g3V1Y3UUxxd25LZnhCVGNFeUxkYk5v?=
 =?utf-8?B?NGFidk4rd2p2cjdLS3NKUDREdWxtNnhlVHBWaFJpSmVqV0g1RERobzUzano0?=
 =?utf-8?B?Y0JIaGpHU0RManJiWTczc2VwZGhPRmV5by9lSkFGTkt0Ykw3dk1aWTVDS3RK?=
 =?utf-8?B?OHlqVnd5RnhBbndHMFM4aG1DQmkwVFVLNzR6bkZjNmVsUmFDT3FsVkNsU04v?=
 =?utf-8?B?YjF4b0g4eVMrd2hoUDQ5NGRhZzZqTTFZMzVyZ0YwTW1tdHZQNUhERVljOTdz?=
 =?utf-8?B?QUJQTDk3ek45UzNRdTRkUUVYSlVYRnUyeEVLRWF1UzRkNmNWMGx1ZklmSks1?=
 =?utf-8?B?N0htYmJMQllqRGc0TUp1NUlYYzZINTkwQy82NWhURGplK3NkeVpWc0cwUzI0?=
 =?utf-8?B?TWZ5ZDlnSFVFdFk0eHlkYWtJbThsYWloRldVVVV4aXp1UWkwMFd1NFduTXNK?=
 =?utf-8?B?c294SUQwQkNpS051VlhBSUEwWVR1QVgvV1pSVTh1MEF1U3hQTWdDME1ZVGZV?=
 =?utf-8?B?Uko2eGM2R3MwaldDN09DWkwwTzZQQ1Q0YWw1aGRSN2FFUGNiV2g3WEV6eXd4?=
 =?utf-8?B?c3BrQmtVQnNsdVdpUENIQ3l6dmFCVmIvUk8ySGRZLzFwd3MzRjBOT1NvTlVG?=
 =?utf-8?B?SEQzUDkySWVndzBLdkVoU3JTUzJzRW5YMXI1QzI2OEN6akZkd240d2NWbzN2?=
 =?utf-8?B?VnpycThhclRsNFJHak5rQkJtOXkxamRyMUlHeHpud0lFLzZQWGdjZFVxdUlB?=
 =?utf-8?B?aEVYQXVuc0dxd0xia05MMXdhNWNDWlpua1F3OXFpUUhBbGpyeDVwai94Nzc2?=
 =?utf-8?B?dzdpNVdpck5PdWNnU1pucXkvN2d6cEZ2WUJGQ1lFYTZraTV6WE9rQi9oNkgw?=
 =?utf-8?B?TjlqZm9pdDBkaEl4akFFeG5BTTNzR2ZTWmg5a3IzLzJVYWtPR01DUStDanM0?=
 =?utf-8?B?c3dtZjBpbmQxb3M2bEV1NDZTUDUyT05WcTkwb1lmUTRZcjRFMmJsTUY5Mmlq?=
 =?utf-8?B?MStncm51eSs1ZFhVcGQvS3NDNSttY0ZmdlM5LzJWRU9CQ0x6eDZzZ2oxUGRR?=
 =?utf-8?B?aXArMHpmLzBpNDFMSG9PTU1TdW5PUDJRblg5VElZVHFyNmFEdTJaM3NWRVhi?=
 =?utf-8?B?SEtQSHphYXprTFJTdWZOUT09?=
x-forefront-antispam-report: CIP:255.255.255.255; CTRY:; LANG:en; SCL:1; SRV:;
 IPV:NLI; SFV:NSPM; H:AM8PR07MB7602.eurprd07.prod.outlook.com; PTR:; CAT:NONE;
 SFS:(13230031)(376005)(366007)(1800799015)(38070700009); DIR:OUT; SFP:1101; 
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?utf-8?B?blFoSDB4cWE1NDJxVHZ1SUwrakNPblRiQWpqdGMzVlNURkFkUDRzdVRxNjgx?=
 =?utf-8?B?dURFY2NCQmk1MytySU1jbnN5OS9wYy9zYzBQNjdqLzc4UHlnc0RCaEtsQklT?=
 =?utf-8?B?MFZDVlNnVitzdk1EV0Z2dWVtRWNxM0t5eU5xWVREa2xpbWlaWTd1dE1tYUYw?=
 =?utf-8?B?VSsrWUxqN2VWbUkvK0Z6ajJsZSs3YjE3Mk1QM0UvUXJKV25SWXVNUCtWUWxo?=
 =?utf-8?B?MVREb3NsdzJuNTR3QlFDaFp6MWFyUHdENW0rT280ay80YVNYRHRqdTdmejJj?=
 =?utf-8?B?T0ZMWWM4QXIzMCtxc2xHQS9qdlZpbXZvVG9zMTBFcHp1ckdRZWI3RTB2ekxK?=
 =?utf-8?B?TGhROUdZTzlUdXZDbmZCZ1FhRWlwSkZMYzN6T3RhdXFwQ0xLaE9Vck51T0xy?=
 =?utf-8?B?cnp6ZTVuaHlBRFplQndkRTJLMGtMSkhZOHI0RUJLVEZRa1BtVGw4SDdSaUpL?=
 =?utf-8?B?TFFjS0EwMmM2NDArUkYvVXJyNUoyWDdFb0JDNW1xZjZLa213QXQ2NkIyZkFh?=
 =?utf-8?B?ckMzaXIydFBCYS9aN0kvelNGbTA0YjlXZ1hQeFBQS2o5TTNhckxuZi94Nm1D?=
 =?utf-8?B?R1NtWTRqSzlnQWMxbXJDdlVxeWRQbkxTeHA0N0czc0FUQ0lyV2JaUC95RjEx?=
 =?utf-8?B?RGJPUjNaVGdCK082QWUzN1VIbkw5M3FxS1hJRHR6MWV2YlpRYmRoYjFLcUZ2?=
 =?utf-8?B?T2xRSkIvendSZGpWU0NoS0J6MmJ1eGY1SGo5UEFQNUM1MllQYzY4bjRCc2ds?=
 =?utf-8?B?b0FqQjhBTnBJVllGaVMzYWU2NWo2dmJLQ2VTRWFxOXE1M3dpeE5YMTJ5alFa?=
 =?utf-8?B?c2FXQlEwN3BWK3R4cmVxeW85Y09JV01KMTArSjlGTWFYb1JCTWc3T0FqNzlj?=
 =?utf-8?B?RzRxQk45MnNWako4dERFOGZOYyttaU03RTloTnMzUEdlUUJvRFgzcnIzRzFZ?=
 =?utf-8?B?L2Q5c2djNERmUVpqV2tFYmFwbVVtd0p5b2srT2JyQlhXUlQwVkN2RXRVakhP?=
 =?utf-8?B?bnFxeW9pZEgvZDNGMHZlQ0g3bWFHYjJaa2M3U1prd2orMVJiWlZQd3NqMEZ2?=
 =?utf-8?B?Zno4UFRvQTJDU3V3R3cxMEUvSlFUK2doTWFmcXg1bHNoc0pHMjNPMGpJK2dE?=
 =?utf-8?B?NFJidDIxUVQ4K2pXOVhWQmdpaFFsSUpKcFNSSDZndmNGR2tjYkZwUXQwMnZD?=
 =?utf-8?B?YXl3MGxkeVhKUHJLd2JmeE9HaDBFenZ4c2w5OFNoSG5NUTJ4VHBwMzZVUWc4?=
 =?utf-8?B?UDA1VmgzQTd1QjBsdURnY3pIdkRDWExiZzVRSEltcTZNbGJLaVJvQ09FNENx?=
 =?utf-8?B?SmZTVVhiaWJnSWtxUVVxN3VjT2o4dC9NK25mZnZKUEkybWVHZk1Xa084UUNB?=
 =?utf-8?B?Vk92bjdoVC9nTkFWRVZxYkFxUFhUR0RsblRBVVUzdlJOVGkyMXlDcmZaWWs1?=
 =?utf-8?B?Y1RxMUVRUzljckF3ek1yUW9YZ2NYbm1kUHBOcFZzZFZwSkR6UGNDTWNVZmQ3?=
 =?utf-8?B?bDlSOGluYXJqdEI0K0s5NDZlSTk5OW0rQ3NsbU0vdEl4dmVya2k2b1VLMlVh?=
 =?utf-8?B?QjhZWU9Ga0NxMlBVS0NrdXN3MGZDem1Lai8yQWpXcFcvdTB4Tk54M1hYUmk0?=
 =?utf-8?B?Y3ZuV1F3a1NrMGR0RWE5QTZCcXRjbmFkYlV5TzNJQ3psVHVqVTRKTi84OXFv?=
 =?utf-8?B?dzZxVVE4MWk2cXNKekI4UG42cDRrRUVLT0huR1lsUHZsY2FXL0ErTm1Ec3RI?=
 =?utf-8?B?NEZQU2p6Tmdnclk5SG9JeXQxdm5HZnhQeFVHTE1BdzZnSVZEQW1lblJlSWlu?=
 =?utf-8?B?dHJiTUI3NHdoZmZtd29qWWVoejRRZk5ML3JWdTI4N296dFFzWFN4a1VkMlZo?=
 =?utf-8?B?b3Bpby9kWDlhN0UySGJDN0w5bkh5U0M5dEdZVC9XTmIwc3kzdE8xdEl4ekFy?=
 =?utf-8?B?bFgzc29XZGZLNTJHU1Z3MVRoQ1lhaDFHaVJEVjVmbGM1WDNtRVF6anJBK0I0?=
 =?utf-8?B?Z0xNTWdac29QeWxBK1F1L2c4bWc3T1Z6UlBYMWZZU2FJR09yc3hrSGFSNThU?=
 =?utf-8?B?RUM3aUdzVURUM2ZVRFRwQXlscU9zUmF3clhYaDJaNnpwNHNrN2xDd1Avc1Jw?=
 =?utf-8?B?cDdteG1PWGt6Vm44MGRIK1puL2NXNXhsSm5iZVRwL2k5N0NKYzg0WEkyM09S?=
 =?utf-8?Q?W9/UEy4ero30/B9qgy6M/jM=3D?=
Content-Type: text/plain; charset="utf-8"
Content-ID: <5374C1BC3E978640B7878E39204C3407@eurprd07.prod.outlook.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: eviden.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: AM8PR07MB7602.eurprd07.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: fbb2d89d-1f7b-4ec4-9b67-08dc83926250
X-MS-Exchange-CrossTenant-originalarrivaltime: 03 Jun 2024 05:59:51.7273 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 7d1c7785-2d8a-437d-b842-1ed5d8fbe00a
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: HFbuudPL7muZupEHCkkhNpiOAjAdELDiiiHsgKJla74lTSmTDq9daS3qwD0SNepGGz2m48bIVpYaxyrGEsOACCTgWFs9n/QxnJjqQSQeJPzMbPCHvcGgSkxicu8NlWAC
X-MS-Exchange-Transport-CrossTenantHeadersStamped: VI1PR07MB6238
Received-SPF: pass client-ip=80.78.11.83;
 envelope-from=clement.mathieu--drif@eviden.com; helo=smarthost2.eviden.com
X-Spam_score_int: -20
X-Spam_score: -2.1
X-Spam_bar: --
X-Spam_report: (-2.1 / 5.0 requ) BAYES_00=-1.9, DKIM_SIGNED=0.1,
 DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1, SPF_HELO_PASS=-0.001,
 SPF_PASS=-0.001, T_SCC_BODY_TEXT_LINE=-0.01 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

RnJvbTogQ2zDqW1lbnQgTWF0aGlldS0tRHJpZiA8Y2xlbWVudC5tYXRoaWV1LS1kcmlmQGV2aWRl
bi5jb20+DQoNCkFzIHRoZSBTVk0tY2FwYWJsZSBkZXZpY2VzIHdpbGwgbmVlZCB0byBjYWNoZSB0
cmFuc2xhdGlvbnMsIHdlIHByb3ZpZGUNCmFuIGZpcnN0IGltcGxlbWVudGF0aW9uLg0KDQpUaGlz
IGNhY2hlIHVzZXMgYSB0d28tbGV2ZWwgZGVzaWduIGJhc2VkIG9uIGhhc2ggdGFibGVzLg0KVGhl
IGZpcnN0IGxldmVsIGlzIGluZGV4ZWQgYnkgYSBQQVNJRCBhbmQgdGhlIHNlY29uZCBieSBhIHZp
cnR1YWwgYWRkcmVzc2UuDQoNClNpZ25lZC1vZmYtYnk6IENsw6ltZW50IE1hdGhpZXUtLURyaWYg
PGNsZW1lbnQubWF0aGlldS0tZHJpZkBldmlkZW4uY29tPg0KLS0tDQogdXRpbC9hdGMuYyAgICAg
ICB8IDIxMSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKw0K
IHV0aWwvYXRjLmggICAgICAgfCAxMTcgKysrKysrKysrKysrKysrKysrKysrKysrKysNCiB1dGls
L21lc29uLmJ1aWxkIHwgICAxICsNCiAzIGZpbGVzIGNoYW5nZWQsIDMyOSBpbnNlcnRpb25zKCsp
DQogY3JlYXRlIG1vZGUgMTAwNjQ0IHV0aWwvYXRjLmMNCiBjcmVhdGUgbW9kZSAxMDA2NDQgdXRp
bC9hdGMuaA0KDQpkaWZmIC0tZ2l0IGEvdXRpbC9hdGMuYyBiL3V0aWwvYXRjLmMNCm5ldyBmaWxl
IG1vZGUgMTAwNjQ0DQppbmRleCAwMDAwMDAwMDAwLi41ODRjZTA0NWRiDQotLS0gL2Rldi9udWxs
DQorKysgYi91dGlsL2F0Yy5jDQpAQCAtMCwwICsxLDIxMSBAQA0KKy8qDQorICogUUVNVSBlbXVs
YXRpb24gb2YgYW4gQVRDDQorICoNCisgKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsg
eW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQ0KKyAqIGl0IHVuZGVyIHRoZSB0
ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5DQor
ICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBvZiB0aGUg
TGljZW5zZSwgb3INCisgKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLg0KKw0K
KyAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwg
YmUgdXNlZnVsLA0KKyAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRo
ZSBpbXBsaWVkIHdhcnJhbnR5IG9mDQorICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9S
IEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQ0KKyAqIEdOVSBHZW5lcmFsIFB1YmxpYyBM
aWNlbnNlIGZvciBtb3JlIGRldGFpbHMuDQorDQorICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVk
IGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYWxvbmcNCisgKiB3aXRo
IHRoaXMgcHJvZ3JhbTsgaWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+
Lg0KKyAqLw0KKw0KKyNpbmNsdWRlICJ1dGlsL2F0Yy5oIg0KKw0KKw0KKyNkZWZpbmUgUEFHRV9U
QUJMRV9FTlRSWV9TSVpFIDgNCisNCisvKiBhIHBhc2lkIGlzIGhhc2hlZCB1c2luZyB0aGUgaWRl
bnRpdHkgZnVuY3Rpb24gKi8NCitzdGF0aWMgZ3VpbnQgYXRjX3Bhc2lkX2tleV9oYXNoKGdjb25z
dHBvaW50ZXIgdikNCit7DQorICAgIHJldHVybiAoZ3VpbnQpKHVpbnRwdHJfdCl2OyAvKiBwYXNp
ZCAqLw0KK30NCisNCisvKiBwYXNpZCBlcXVhbGl0eSAqLw0KK3N0YXRpYyBnYm9vbGVhbiBhdGNf
cGFzaWRfa2V5X2VxdWFsKGdjb25zdHBvaW50ZXIgdjEsIGdjb25zdHBvaW50ZXIgdjIpDQorew0K
KyAgICByZXR1cm4gdjEgPT0gdjI7DQorfQ0KKw0KKy8qIEhhc2ggZnVuY3Rpb24gZm9yIElPVExC
IGVudHJpZXMgKi8NCitzdGF0aWMgZ3VpbnQgYXRjX2FkZHJfa2V5X2hhc2goZ2NvbnN0cG9pbnRl
ciB2KQ0KK3sNCisgICAgaHdhZGRyIGFkZHIgPSAoaHdhZGRyKXY7DQorICAgIHJldHVybiAoZ3Vp
bnQpKChhZGRyID4+IDMyKSBeIChhZGRyICYgMHhmZmZmZmZmZlUpKTsNCit9DQorDQorLyogRXF1
YWxpdHkgdGVzdCBmb3IgSU9UTEIgZW50cmllcyAqLw0KK3N0YXRpYyBnYm9vbGVhbiBhdGNfYWRk
cl9rZXlfZXF1YWwoZ2NvbnN0cG9pbnRlciB2MSwgZ2NvbnN0cG9pbnRlciB2MikNCit7DQorICAg
IHJldHVybiAoaHdhZGRyKXYxID09IChod2FkZHIpdjI7DQorfQ0KKw0KK3N0YXRpYyB2b2lkIGF0
Y19hZGRyZXNzX3NwYWNlX2ZyZWUodm9pZCAqYXMpDQorew0KKyAgICBnX2hhc2hfdGFibGVfdW5y
ZWYoYXMpOw0KK30NCisNCisvKiByZXR1cm4gbG9nMih2YWwpLCBvciBVSU5UOF9NQVggaWYgdmFs
IGlzIG5vdCBhIHBvd2VyIG9mIDIgKi8NCitzdGF0aWMgdWludDhfdCBpbG9nMih1aW50NjRfdCB2
YWwpDQorew0KKyAgICB1aW50OF90IHJlc3VsdCA9IDA7DQorICAgIHdoaWxlICh2YWwgIT0gMSkg
ew0KKyAgICAgICAgaWYgKHZhbCAmIDEpIHsNCisgICAgICAgICAgICByZXR1cm4gVUlOVDhfTUFY
Ow0KKyAgICAgICAgfQ0KKw0KKyAgICAgICAgdmFsID4+PSAxOw0KKyAgICAgICAgcmVzdWx0ICs9
IDE7DQorICAgIH0NCisgICAgcmV0dXJuIHJlc3VsdDsNCit9DQorDQorQVRDICphdGNfbmV3KHVp
bnQ2NF90IHBhZ2Vfc2l6ZSwgdWludDhfdCBhZGRyZXNzX3dpZHRoKQ0KK3sNCisgICAgQVRDICph
dGM7DQorICAgIHVpbnQ4X3QgbG9nX3BhZ2Vfc2l6ZSA9IGlsb2cyKHBhZ2Vfc2l6ZSk7DQorICAg
IC8qIG51bWJlciBvZiBiaXRzIGVhY2ggdXNlZCB0byBzdG9yZSBhbGwgdGhlIGludGVybWVkaWF0
ZSBpbmRleGVzICovDQorICAgIHVpbnQ2NF90IGFkZHJfbG9va3VwX2luZGV4ZXNfc2l6ZTsNCisN
CisgICAgaWYgKGxvZ19wYWdlX3NpemUgPT0gVUlOVDhfTUFYKSB7DQorICAgICAgICByZXR1cm4g
TlVMTDsNCisgICAgfQ0KKyAgICAvKg0KKyAgICAgKiBXZSBvbmx5IHN1cHBvcnQgcGFnZSB0YWJs
ZSBlbnRyaWVzIG9mIDggKFBBR0VfVEFCTEVfRU5UUllfU0laRSkgYnl0ZXMNCisgICAgICogbG9n
MihwYWdlX3NpemUgLyA4KSA9IGxvZzIocGFnZV9zaXplKSAtIDMNCisgICAgICogaXMgdGhlIGxl
dmVsIG9mZnNldA0KKyAgICAgKi8NCisgICAgaWYgKGxvZ19wYWdlX3NpemUgPD0gMykgew0KKyAg
ICAgICAgcmV0dXJuIE5VTEw7DQorICAgIH0NCisNCisgICAgYXRjID0gZ19uZXcwKEFUQywgMSk7
DQorICAgIGF0Yy0+YWRkcmVzc19zcGFjZXMgPSBnX2hhc2hfdGFibGVfbmV3X2Z1bGwoYXRjX3Bh
c2lkX2tleV9oYXNoLA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGF0Y19wYXNpZF9rZXlfZXF1YWwsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgTlVMTCwgYXRjX2FkZHJlc3Nfc3BhY2VfZnJlZSk7DQorICAg
IGF0Yy0+bGV2ZWxfb2Zmc2V0ID0gbG9nX3BhZ2Vfc2l6ZSAtIDM7DQorICAgIC8qIGF0IHRoaXMg
cG9pbnQsIHdlIGtub3cgdGhhdCBwYWdlX3NpemUgaXMgYSBwb3dlciBvZiAyICovDQorICAgIGF0
Yy0+bWluX2FkZHJfbWFzayA9IHBhZ2Vfc2l6ZSAtIDE7DQorICAgIGFkZHJfbG9va3VwX2luZGV4
ZXNfc2l6ZSA9IGFkZHJlc3Nfd2lkdGggLSBsb2dfcGFnZV9zaXplOw0KKyAgICBpZiAoKGFkZHJf
bG9va3VwX2luZGV4ZXNfc2l6ZSAlIGF0Yy0+bGV2ZWxfb2Zmc2V0KSAhPSAwKSB7DQorICAgICAg
ICBnb3RvIGVycm9yOw0KKyAgICB9DQorICAgIGF0Yy0+bGV2ZWxzID0gYWRkcl9sb29rdXBfaW5k
ZXhlc19zaXplIC8gYXRjLT5sZXZlbF9vZmZzZXQ7DQorICAgIGF0Yy0+cGFnZV9zaXplID0gcGFn
ZV9zaXplOw0KKyAgICByZXR1cm4gYXRjOw0KKw0KK2Vycm9yOg0KKyAgICBnX2ZyZWUoYXRjKTsN
CisgICAgcmV0dXJuIE5VTEw7DQorfQ0KKw0KK3N0YXRpYyBpbmxpbmUgR0hhc2hUYWJsZSAqYXRj
X2dldF9hZGRyZXNzX3NwYWNlX2NhY2hlKEFUQyAqYXRjLCB1aW50MzJfdCBwYXNpZCkNCit7DQor
ICAgIHJldHVybiBnX2hhc2hfdGFibGVfbG9va3VwKGF0Yy0+YWRkcmVzc19zcGFjZXMsDQorICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIChnY29uc3Rwb2ludGVyKSh1aW50cHRyX3QpcGFz
aWQpOw0KK30NCisNCit2b2lkIGF0Y19jcmVhdGVfYWRkcmVzc19zcGFjZV9jYWNoZShBVEMgKmF0
YywgdWludDMyX3QgcGFzaWQpDQorew0KKyAgICBHSGFzaFRhYmxlICphc19jYWNoZTsNCisNCisg
ICAgYXNfY2FjaGUgPSBhdGNfZ2V0X2FkZHJlc3Nfc3BhY2VfY2FjaGUoYXRjLCBwYXNpZCk7DQor
ICAgIGlmICghYXNfY2FjaGUpIHsNCisgICAgICAgIGFzX2NhY2hlID0gZ19oYXNoX3RhYmxlX25l
d19mdWxsKGF0Y19hZGRyX2tleV9oYXNoLA0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgYXRjX2FkZHJfa2V5X2VxdWFsLA0KKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgTlVMTCwgZ19mcmVlKTsNCisgICAgICAgIGdfaGFzaF90YWJsZV9y
ZXBsYWNlKGF0Yy0+YWRkcmVzc19zcGFjZXMsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAoZ3BvaW50ZXIpKHVpbnRwdHJfdClwYXNpZCwgYXNfY2FjaGUpOw0KKyAgICB9DQorfQ0KKw0K
K3ZvaWQgYXRjX2RlbGV0ZV9hZGRyZXNzX3NwYWNlX2NhY2hlKEFUQyAqYXRjLCB1aW50MzJfdCBw
YXNpZCkNCit7DQorICAgIGdfaGFzaF90YWJsZV9yZW1vdmUoYXRjLT5hZGRyZXNzX3NwYWNlcywg
KGdwb2ludGVyKSh1aW50cHRyX3QpcGFzaWQpOw0KK30NCisNCitpbnQgYXRjX3VwZGF0ZShBVEMg
KmF0YywgSU9NTVVUTEJFbnRyeSAqZW50cnkpDQorew0KKyAgICBJT01NVVRMQkVudHJ5ICp2YWx1
ZTsNCisgICAgR0hhc2hUYWJsZSAqYXNfY2FjaGUgPSBhdGNfZ2V0X2FkZHJlc3Nfc3BhY2VfY2Fj
aGUoYXRjLCBlbnRyeS0+cGFzaWQpOw0KKyAgICBpZiAoIWFzX2NhY2hlKSB7DQorICAgICAgICBy
ZXR1cm4gLUVOT0RFVjsNCisgICAgfQ0KKyAgICB2YWx1ZSA9IGdfbWVtZHVwMihlbnRyeSwgc2l6
ZW9mKCp2YWx1ZSkpOw0KKyAgICBnX2hhc2hfdGFibGVfcmVwbGFjZShhc19jYWNoZSwgKGdwb2lu
dGVyKShlbnRyeS0+aW92YSksIHZhbHVlKTsNCisgICAgcmV0dXJuIDA7DQorfQ0KKw0KK0lPTU1V
VExCRW50cnkgKmF0Y19sb29rdXAoQVRDICphdGMsIHVpbnQzMl90IHBhc2lkLCBod2FkZHIgYWRk
cikNCit7DQorICAgIElPTU1VVExCRW50cnkgKmVudHJ5Ow0KKyAgICBod2FkZHIgbWFzayA9IGF0
Yy0+bWluX2FkZHJfbWFzazsNCisgICAgaHdhZGRyIGtleSA9IGFkZHIgJiAofm1hc2spOw0KKyAg
ICBHSGFzaFRhYmxlICphc19jYWNoZSA9IGF0Y19nZXRfYWRkcmVzc19zcGFjZV9jYWNoZShhdGMs
IHBhc2lkKTsNCisNCisgICAgaWYgKCFhc19jYWNoZSkgew0KKyAgICAgICAgcmV0dXJuIE5VTEw7
DQorICAgIH0NCisNCisgICAgLyoNCisgICAgICogSXRlcmF0ZSBvdmVyIHRoZSBwb3NzaWJsZSBw
YWdlIHNpemVzIGFuZCB0cnkgdG8gZmluZCBhIGhpdA0KKyAgICAgKi8NCisgICAgZm9yICh1aW50
OF90IGxldmVsID0gMDsgbGV2ZWwgPCBhdGMtPmxldmVsczsgKytsZXZlbCkgew0KKyAgICAgICAg
ZW50cnkgPSBnX2hhc2hfdGFibGVfbG9va3VwKGFzX2NhY2hlLCAoZ2NvbnN0cG9pbnRlcilrZXkp
Ow0KKyAgICAgICAgaWYgKGVudHJ5ICYmIChtYXNrID09IGVudHJ5LT5hZGRyX21hc2spKSB7DQor
ICAgICAgICAgICAgcmV0dXJuIGVudHJ5Ow0KKyAgICAgICAgfQ0KKyAgICAgICAgbWFzayA9ICht
YXNrIDw8IGF0Yy0+bGV2ZWxfb2Zmc2V0KSB8ICgoMSA8PCBhdGMtPmxldmVsX29mZnNldCkgLSAx
KTsNCisgICAgICAgIGtleSA9IGFkZHIgJiAofm1hc2spOw0KKyAgICB9DQorDQorICAgIHJldHVy
biBOVUxMOw0KK30NCisNCitzdGF0aWMgZ2Jvb2xlYW4gYXRjX2ludmFsaWRhdGVfZW50cnlfcHJl
ZGljYXRlKGdwb2ludGVyIGtleSwgZ3BvaW50ZXIgdmFsdWUsDQorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncG9pbnRlciB1c2VyX2RhdGEpDQorew0KKyAg
ICBJT01NVVRMQkVudHJ5ICplbnRyeSA9IChJT01NVVRMQkVudHJ5ICopdmFsdWU7DQorICAgIElP
TU1VVExCRW50cnkgKnRhcmdldCA9IChJT01NVVRMQkVudHJ5ICopdXNlcl9kYXRhOw0KKyAgICBo
d2FkZHIgdGFyZ2V0X21hc2sgPSB+dGFyZ2V0LT5hZGRyX21hc2s7DQorICAgIGh3YWRkciBlbnRy
eV9tYXNrID0gfmVudHJ5LT5hZGRyX21hc2s7DQorICAgIHJldHVybiAoKHRhcmdldC0+aW92YSAm
IHRhcmdldF9tYXNrKSA9PSAoZW50cnktPmlvdmEgJiB0YXJnZXRfbWFzaykpIHx8DQorICAgICAg
ICAgICAoKHRhcmdldC0+aW92YSAmIGVudHJ5X21hc2spID09IChlbnRyeS0+aW92YSAmIGVudHJ5
X21hc2spKTsNCit9DQorDQordm9pZCBhdGNfaW52YWxpZGF0ZShBVEMgKmF0YywgSU9NTVVUTEJF
bnRyeSAqZW50cnkpDQorew0KKyAgICBHSGFzaFRhYmxlICphc19jYWNoZSA9IGF0Y19nZXRfYWRk
cmVzc19zcGFjZV9jYWNoZShhdGMsIGVudHJ5LT5wYXNpZCk7DQorICAgIGlmICghYXNfY2FjaGUp
IHsNCisgICAgICAgIHJldHVybjsNCisgICAgfQ0KKyAgICBnX2hhc2hfdGFibGVfZm9yZWFjaF9y
ZW1vdmUoYXNfY2FjaGUsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdGNfaW52
YWxpZGF0ZV9lbnRyeV9wcmVkaWNhdGUsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBlbnRyeSk7DQorfQ0KKw0KK3ZvaWQgYXRjX2Rlc3Ryb3koQVRDICphdGMpDQorew0KKyAgICBn
X2hhc2hfdGFibGVfdW5yZWYoYXRjLT5hZGRyZXNzX3NwYWNlcyk7DQorfQ0KKw0KK3NpemVfdCBh
dGNfZ2V0X21heF9udW1iZXJfb2ZfcGFnZXMoQVRDICphdGMsIGh3YWRkciBhZGRyLCBzaXplX3Qg
bGVuZ3RoKQ0KK3sNCisgICAgaHdhZGRyIHBhZ2VfbWFzayA9IH4oYXRjLT5taW5fYWRkcl9tYXNr
KTsNCisgICAgc2l6ZV90IHJlc3VsdCA9IChsZW5ndGggLyBhdGMtPnBhZ2Vfc2l6ZSk7DQorICAg
IGlmICgoKChhZGRyICYgcGFnZV9tYXNrKSArIGxlbmd0aCAtIDEpICYgcGFnZV9tYXNrKSAhPQ0K
KyAgICAgICAgKChhZGRyICsgbGVuZ3RoIC0gMSkgJiBwYWdlX21hc2spKSB7DQorICAgICAgICBy
ZXN1bHQgKz0gMTsNCisgICAgfQ0KKyAgICByZXR1cm4gcmVzdWx0ICsgKGxlbmd0aCAlIGF0Yy0+
cGFnZV9zaXplICE9IDAgPyAxIDogMCk7DQorfQ0KKw0KK3ZvaWQgYXRjX3Jlc2V0KEFUQyAqYXRj
KQ0KK3sNCisgICAgZ19oYXNoX3RhYmxlX3JlbW92ZV9hbGwoYXRjLT5hZGRyZXNzX3NwYWNlcyk7
DQorfQ0KZGlmZiAtLWdpdCBhL3V0aWwvYXRjLmggYi91dGlsL2F0Yy5oDQpuZXcgZmlsZSBtb2Rl
IDEwMDY0NA0KaW5kZXggMDAwMDAwMDAwMC4uOGJlOTVmNWNjYQ0KLS0tIC9kZXYvbnVsbA0KKysr
IGIvdXRpbC9hdGMuaA0KQEAgLTAsMCArMSwxMTcgQEANCisvKg0KKyAqIFFFTVUgZW11bGF0aW9u
IG9mIGFuIEFUQw0KKyAqDQorICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBj
YW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkNCisgKiBpdCB1bmRlciB0aGUgdGVybXMg
b2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQ0KKyAqIHRo
ZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDIgb2YgdGhlIExpY2Vu
c2UsIG9yDQorICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4NCisNCisgKiBU
aGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVz
ZWZ1bCwNCisgKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1w
bGllZCB3YXJyYW50eSBvZg0KKyAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBB
UlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUNCisgKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5z
ZSBmb3IgbW9yZSBkZXRhaWxzLg0KKw0KKyAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNv
cHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFsb25nDQorICogd2l0aCB0aGlz
IHByb2dyYW07IGlmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4NCisg
Ki8NCisNCisjaWZuZGVmIFVUSUxfQVRDX0gNCisjZGVmaW5lIFVUSUxfQVRDX0gNCisNCisjaW5j
bHVkZSAicWVtdS9vc2RlcC5oIg0KKyNpbmNsdWRlICJleGVjL21lbW9yeS5oIg0KKw0KK3R5cGVk
ZWYgc3RydWN0IEFUQyB7DQorICAgIEdIYXNoVGFibGUgKmFkZHJlc3Nfc3BhY2VzOyAvKiBLZXkg
OiBwYXNpZCwgdmFsdWUgOiBHSGFzaFRhYmxlICovDQorICAgIGh3YWRkciBtaW5fYWRkcl9tYXNr
Ow0KKyAgICB1aW50NjRfdCBwYWdlX3NpemU7DQorICAgIHVpbnQ4X3QgbGV2ZWxzOw0KKyAgICB1
aW50OF90IGxldmVsX29mZnNldDsNCit9IEFUQzsNCisNCisvKg0KKyAqIGF0Y19uZXc6IENyZWF0
ZSBhbiBBVEMuDQorICoNCisgKiBSZXR1cm4gYW4gQVRDIG9yIE5VTEwgaWYgdGhlIGNyZWF0aW9u
IGZhaWxlZA0KKyAqDQorICogQHBhZ2Vfc2l6ZTogI1BDSURldmljZSBkb2luZyB0aGUgbWVtb3J5
IGFjY2Vzcw0KKyAqIEBhZGRyZXNzX3dpZHRoOiB3aWR0aCBvZiB0aGUgdmlydHVhbCBhZGRyZXNz
ZXMgdXNlZCBieSB0aGUgSU9NTVUgKGluIGJpdHMpDQorICovDQorQVRDICphdGNfbmV3KHVpbnQ2
NF90IHBhZ2Vfc2l6ZSwgdWludDhfdCBhZGRyZXNzX3dpZHRoKTsNCisNCisvKg0KKyAqIGF0Y191
cGRhdGU6IEluc2VydCBvciB1cGRhdGUgYW4gZW50cnkgaW4gdGhlIGNhY2hlDQorICoNCisgKiBS
ZXR1cm4gMCBpZiB0aGUgb3BlcmF0aW9uIHN1Y2NlZWRzLCBhIG5lZ2F0aXZlIGVycm9yIGNvZGUg
b3RoZXJ3aXNlDQorICoNCisgKiBUaGUgaW5zZXJ0aW9uIHdpbGwgZmFpbCBpZiB0aGUgYWRkcmVz
cyBzcGFjZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBwYXNpZA0KKyAqIGhhcyBub3QgYmVlbiBjcmVh
dGVkIHdpdGggYXRjX2NyZWF0ZV9hZGRyZXNzX3NwYWNlX2NhY2hlDQorICoNCisgKiBAYXRjOiB0
aGUgQVRDIHRvIHVwZGF0ZQ0KKyAqIEBlbnRyeTogdGhlIHRsYiBlbnRyeSB0byBpbnNlcnQgaW50
byB0aGUgY2FjaGUNCisgKi8NCitpbnQgYXRjX3VwZGF0ZShBVEMgKmF0YywgSU9NTVVUTEJFbnRy
eSAqZW50cnkpOw0KKw0KKy8qDQorICogYXRjX2NyZWF0ZV9hZGRyZXNzX3NwYWNlX2NhY2hlOiBk
ZWxhcmUgYSBuZXcgYWRkcmVzcyBzcGFjZQ0KKyAqIGlkZW50aWZpZWQgYnkgYSBQQVNJRA0KKyAq
DQorICogQGF0YzogdGhlIEFUQyB0byB1cGRhdGUNCisgKiBAcGFzaWQ6IHRoZSBwYXNpZCBvZiB0
aGUgYWRkcmVzcyBzcGFjZSB0byBiZSBjcmVhdGVkDQorICovDQordm9pZCBhdGNfY3JlYXRlX2Fk
ZHJlc3Nfc3BhY2VfY2FjaGUoQVRDICphdGMsIHVpbnQzMl90IHBhc2lkKTsNCisNCisvKg0KKyAq
IGF0Y19kZWxldGVfYWRkcmVzc19zcGFjZV9jYWNoZTogZGVsZXRlIGFuIGFkZHJlc3Mgc3BhY2UN
CisgKiBpZGVudGlmaWVkIGJ5IGEgUEFTSUQNCisgKg0KKyAqIEBhdGM6IHRoZSBBVEMgdG8gdXBk
YXRlDQorICogQHBhc2lkOiB0aGUgcGFzaWQgb2YgdGhlIGFkZHJlc3Mgc3BhY2UgdG8gYmUgZGVs
ZXRlZA0KKyAqLw0KK3ZvaWQgYXRjX2RlbGV0ZV9hZGRyZXNzX3NwYWNlX2NhY2hlKEFUQyAqYXRj
LCB1aW50MzJfdCBwYXNpZCk7DQorDQorLyoNCisgKiBhdGNfbG9va3VwOiBxdWVyeSB0aGUgY2Fj
aGUgaW4gYSBnaXZlbiBhZGRyZXNzIHNwYWNlDQorICoNCisgKiBAYXRjOiB0aGUgQVRDIHRvIHF1
ZXJ5DQorICogQHBhc2lkOiB0aGUgcGFzaWQgb2YgdGhlIGFkZHJlc3Mgc3BhY2UgdG8gcXVlcnkN
CisgKiBAYWRkcjogdGhlIHZpcnR1YWwgYWRkcmVzcyB0byB0cmFuc2xhdGUNCisgKi8NCitJT01N
VVRMQkVudHJ5ICphdGNfbG9va3VwKEFUQyAqYXRjLCB1aW50MzJfdCBwYXNpZCwgaHdhZGRyIGFk
ZHIpOw0KKw0KKy8qDQorICogYXRjX2ludmFsaWRhdGU6IGludmFsaWRhdGUgYW4gZW50cnkgaW4g
dGhlIGNhY2hlDQorICoNCisgKiBAYXRjOiB0aGUgQVRDIHRvIHVwZGF0ZQ0KKyAqIEBlbnRyeTog
dGhlIGVudHJ5IHRvIGludmFsaWRhdGUNCisgKi8NCit2b2lkIGF0Y19pbnZhbGlkYXRlKEFUQyAq
YXRjLCBJT01NVVRMQkVudHJ5ICplbnRyeSk7DQorDQorLyoNCisgKiBhdGNfZGVzdHJveTogZGVs
ZXRlIGFuIEFUQw0KKyAqDQorICogQGF0YzogdGhlIGNhY2hlIHRvIGJlIGRlbGV0ZWQNCisgKi8N
Cit2b2lkIGF0Y19kZXN0cm95KEFUQyAqYXRjKTsNCisNCisvKg0KKyAqIGF0Y19nZXRfbWF4X251
bWJlcl9vZl9wYWdlczogZ2V0IHRoZSBudW1iZXIgb2YgcGFnZXMgYSBtZW1vcnkgb3BlcmF0aW9u
DQorICogd2lsbCBhY2Nlc3MgaWYgYWxsIHRoZSBwYWdlcyBjb25jZXJuZWQgaGF2ZSB0aGUgbWlu
aW11bSBzaXplLg0KKyAqDQorICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBkZXRlcm1p
bmUgdGhlIHNpemUgb2YgdGhlIHJlc3VsdCBhcnJheSB0byBiZQ0KKyAqIGFsbG9jYXRlZCB3aGVu
IGlzc3VpbmcgYW4gQVRTIHJlcXVlc3QuDQorICoNCisgKiBAYXRjOiB0aGUgY2FjaGUNCisgKiBA
YWRkcjogc3RhcnQgYWRkcmVzcw0KKyAqIEBsZW5ndGg6IG51bWJlciBvZiBieXRlcyBhY2Nlc3Nl
ZCBmcm9tIGFkZHINCisgKi8NCitzaXplX3QgYXRjX2dldF9tYXhfbnVtYmVyX29mX3BhZ2VzKEFU
QyAqYXRjLCBod2FkZHIgYWRkciwgc2l6ZV90IGxlbmd0aCk7DQorDQorLyoNCisgKiBhdGNfcmVz
ZXQ6IGludmFsaWRhdGVzIGFsbCB0aGUgZW50cmllcyBzdG9yZWQgaW4gdGhlIEFUQw0KKyAqDQor
ICogQGF0YzogdGhlIGNhY2hlDQorICovDQordm9pZCBhdGNfcmVzZXQoQVRDICphdGMpOw0KKw0K
KyNlbmRpZg0KZGlmZiAtLWdpdCBhL3V0aWwvbWVzb24uYnVpbGQgYi91dGlsL21lc29uLmJ1aWxk
DQppbmRleCAyYWQ1N2IxMGJhLi5lNmNhMzdhNGIxIDEwMDY0NA0KLS0tIGEvdXRpbC9tZXNvbi5i
dWlsZA0KKysrIGIvdXRpbC9tZXNvbi5idWlsZA0KQEAgLTkzLDYgKzkzLDcgQEAgaWYgaGF2ZV9i
bG9jaw0KICAgdXRpbF9zcy5hZGQoZmlsZXMoJ2hiaXRtYXAuYycpKQ0KICAgdXRpbF9zcy5hZGQo
ZmlsZXMoJ2hleGR1bXAuYycpKQ0KICAgdXRpbF9zcy5hZGQoZmlsZXMoJ2lvdmEtdHJlZS5jJykp
DQorICB1dGlsX3NzLmFkZChmaWxlcygnYXRjLmMnKSkNCiAgIHV0aWxfc3MuYWRkKGZpbGVzKCdp
b3YuYycsICd1cmkuYycpKQ0KICAgdXRpbF9zcy5hZGQoZmlsZXMoJ252ZGltbS11dGlscy5jJykp
DQogICB1dGlsX3NzLmFkZChmaWxlcygnYmxvY2staGVscGVycy5jJykpDQotLSANCjIuNDUuMQ0K

