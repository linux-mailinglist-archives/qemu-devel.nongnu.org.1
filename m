Return-Path: <qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org>
X-Original-To: lists+qemu-devel@lfdr.de
Delivered-To: lists+qemu-devel@lfdr.de
Received: from lists.gnu.org (lists.gnu.org [209.51.188.17])
	by mail.lfdr.de (Postfix) with ESMTPS id 34903B09493
	for <lists+qemu-devel@lfdr.de>; Thu, 17 Jul 2025 21:08:27 +0200 (CEST)
Received: from localhost ([::1] helo=lists1p.gnu.org)
	by lists.gnu.org with esmtp (Exim 4.90_1)
	(envelope-from <qemu-devel-bounces@nongnu.org>)
	id 1ucTx2-0004Pd-SV; Thu, 17 Jul 2025 15:07:30 -0400
Received: from eggs.gnu.org ([2001:470:142:3::10])
 by lists.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <maz@kernel.org>) id 1ucREV-0005z4-VM
 for qemu-devel@nongnu.org; Thu, 17 Jul 2025 12:13:22 -0400
Received: from nyc.source.kernel.org ([147.75.193.91])
 by eggs.gnu.org with esmtps (TLS1.2:ECDHE_RSA_AES_256_GCM_SHA384:256)
 (Exim 4.90_1) (envelope-from <maz@kernel.org>) id 1ucREU-0002xZ-5E
 for qemu-devel@nongnu.org; Thu, 17 Jul 2025 12:13:19 -0400
Received: from smtp.kernel.org (transwarp.subspace.kernel.org [100.75.92.58])
 by nyc.source.kernel.org (Postfix) with ESMTP id 2E725A579F2;
 Thu, 17 Jul 2025 16:13:14 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id CC9DEC4CEE3;
 Thu, 17 Jul 2025 16:13:13 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=k20201202; t=1752768793;
 bh=yXaeA1V7daaolkCE+XmSLVGIVgLBr/+ARyqVfPyk9LM=;
 h=Date:From:To:Cc:Subject:In-Reply-To:References:From;
 b=aBIyEdRu4dK1hIwiHqKCNIjc41reRkzNGP4sy4Y9eamqOESOhqzzv3Wl06y8COd8q
 utSHRCMOohyN3dpLSkfSllytsQaKRS36aOUpmQr/s7oXITAyvLmGkPehR9G3YzGIyw
 6M7QJXbM9qKoya/W8rE1UtBWz/EBFEpN0vyZJZImche+v5EppTfRbAPxXDb1Ribl2S
 gQnO17+oERJvWZZuSHlXwCDb8a1q5GcQ2aKlG2yKEOg9uq1HqRrHP2K9tsofNrs+R7
 CiycuqzBWWwtiaF4G8MsIHEQZ7Our6tY/+goKJwcRMXuZ9B2NfYL4JcsQv2rvWOSxM
 bgAFPF3Mfetyg==
Received: from sofa.misterjones.org ([185.219.108.64]
 helo=goblin-girl.misterjones.org)
 by disco-boy.misterjones.org with esmtpsa (TLS1.3) tls
 TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 (Exim 4.95)
 (envelope-from <maz@kernel.org>) id 1ucREN-00GfRK-BZ;
 Thu, 17 Jul 2025 17:13:11 +0100
Date: Thu, 17 Jul 2025 17:13:11 +0100
Message-ID: <86tt3a94o8.wl-maz@kernel.org>
From: Marc Zyngier <maz@kernel.org>
To: Mark Burton <mburton@qti.qualcomm.com>
Cc: Peter Maydell <peter.maydell@linaro.org>,	Danny Canter
 <danny_canter@apple.com>,	Alex =?UTF-8?B?QmVubsOpZQ==?=
 <alex.bennee@linaro.org>,	Joelle van Dyne <j@getutm.app>,	qemu-devel
 <qemu-devel@nongnu.org>,	Alexander Graf <agraf@csgraf.de>,	Ynddal
 <mads@ynddal.dk>,	Cameron Esfahani <dirty@apple.com>,	Roman Bolshakov
 <rbolshakov@ddn.com>,	Phil Dennis-Jordan <phil@philjordan.eu>,	Philippe
 =?UTF-8?B?TWF0aGlldS1EYXVkw6k=?= <philmd@linaro.org>,	Richard Henderson
 <richard.henderson@linaro.org>
Subject: Re: HVF EL2 support in QEMU (aka FEAT_NV/FEAT_NV2) for MacOS
In-Reply-To: <CO1PR02MB86174C98FACECFFD6116231B8F51A@CO1PR02MB8617.namprd02.prod.outlook.com>
References: <87zfd5zouv.fsf@draig.linaro.org> <86wm898yf4.wl-maz@kernel.org>
 <CA+E+eSASz9Tx76-8PxMNF30f3L9DfPNYf_Zgf=ENozXapc3gyw@mail.gmail.com>
 <03A3BBBF-6A01-4ECB-BE50-8103B9201528@apple.com>
 <87a554z5wp.fsf@draig.linaro.org>
 <B08AAF88-3770-478A-8589-ADB407878B19@apple.com>
 <CAFEAcA_s2zXkSZCWXqJ7nWTka5wwBPiKJyHmYE7fGr2=fNsOvw@mail.gmail.com>
 <CO1PR02MB86174C98FACECFFD6116231B8F51A@CO1PR02MB8617.namprd02.prod.outlook.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/30.1
 (aarch64-unknown-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 185.219.108.64
X-SA-Exim-Rcpt-To: mburton@qti.qualcomm.com, peter.maydell@linaro.org,
 danny_canter@apple.com, alex.bennee@linaro.org, j@getutm.app,
 qemu-devel@nongnu.org, agraf@csgraf.de, mads@ynddal.dk, dirty@apple.com,
 rbolshakov@ddn.com, phil@philjordan.eu, philmd@linaro.org,
 richard.henderson@linaro.org
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org);
 SAEximRunCond expanded to false
Received-SPF: pass client-ip=147.75.193.91; envelope-from=maz@kernel.org;
 helo=nyc.source.kernel.org
X-Spam_score_int: -43
X-Spam_score: -4.4
X-Spam_bar: ----
X-Spam_report: (-4.4 / 5.0 requ) BAYES_00=-1.9, DKIMWL_WL_HIGH=-0.001,
 DKIM_SIGNED=0.1, DKIM_VALID=-0.1, DKIM_VALID_AU=-0.1, DKIM_VALID_EF=-0.1,
 RCVD_IN_DNSWL_MED=-2.3, RCVD_IN_VALIDITY_RPBL_BLOCKED=0.001,
 RCVD_IN_VALIDITY_SAFE_BLOCKED=0.001, SPF_HELO_NONE=0.001,
 SPF_PASS=-0.001 autolearn=ham autolearn_force=no
X-Spam_action: no action
X-BeenThere: qemu-devel@nongnu.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <qemu-devel.nongnu.org>
List-Unsubscribe: <https://lists.nongnu.org/mailman/options/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=unsubscribe>
List-Archive: <https://lists.nongnu.org/archive/html/qemu-devel>
List-Post: <mailto:qemu-devel@nongnu.org>
List-Help: <mailto:qemu-devel-request@nongnu.org?subject=help>
List-Subscribe: <https://lists.nongnu.org/mailman/listinfo/qemu-devel>,
 <mailto:qemu-devel-request@nongnu.org?subject=subscribe>
Errors-To: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org
Sender: qemu-devel-bounces+lists+qemu-devel=lfdr.de@nongnu.org

On Thu, 17 Jul 2025 16:45:37 +0100,
Mark Burton <mburton@qti.qualcomm.com> wrote:
> 
> So long as we can also switch to the emulated GIC when we want/need
> to :-) (looking at you KVM :-))

KVM really doesn't need such a non-feature. Specially as it cannot be
implemented without an actual GICv3 in HW, for obvious reasons.

My not-so-secret plan is to eventually deprecate the userspace
interface anyway, as it has been bitrotting for quite some time, and
can be replaced with an in-kernel GICv2 emulation.

But this is getting majorly off-topic in this thread...

	M.

-- 
Without deviation from the norm, progress is not possible.

